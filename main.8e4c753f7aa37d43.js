"use strict";(self.webpackChunkangular_notes=self.webpackChunkangular_notes||[]).push([[179],{56:()=>{function Te(t){return"function"==typeof t}function Sc(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const Ac=Sc(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Ts(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class Sn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(Te(r))try{r()}catch(s){e=s instanceof Ac?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Ib(s)}catch(o){e=e??[],o instanceof Ac?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Ac(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Ib(e);else{if(e instanceof Sn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ts(n,e)}remove(e){const{_finalizers:n}=this;n&&Ts(n,e),e instanceof Sn&&e._removeParent(this)}}Sn.EMPTY=(()=>{const t=new Sn;return t.closed=!0,t})();const vb=Sn.EMPTY;function wb(t){return t instanceof Sn||t&&"closed"in t&&Te(t.remove)&&Te(t.add)&&Te(t.unsubscribe)}function Ib(t){Te(t)?t():t.unsubscribe()}const Ei={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},xc={setTimeout(t,e,...n){const{delegate:r}=xc;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=xc;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Eb(t){xc.setTimeout(()=>{const{onUnhandledError:e}=Ei;if(!e)throw t;e(t)})}function Db(){}const $L=yf("C",void 0,void 0);function yf(t,e,n){return{kind:t,value:e,error:n}}let Di=null;function Mc(t){if(Ei.useDeprecatedSynchronousErrorHandling){const e=!Di;if(e&&(Di={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Di;if(Di=null,n)throw r}}else t()}class _f extends Sn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,wb(e)&&e.add(this)):this.destination=QL}static create(e,n,r){return new ua(e,n,r)}next(e){this.isStopped?wf(function HL(t){return yf("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?wf(function GL(t){return yf("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?wf($L,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const zL=Function.prototype.bind;function vf(t,e){return zL.call(t,e)}class WL{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Nc(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Nc(r)}else Nc(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Nc(n)}}}class ua extends _f{constructor(e,n,r){let i;if(super(),Te(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Ei.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&vf(e.next,s),error:e.error&&vf(e.error,s),complete:e.complete&&vf(e.complete,s)}):i=e}this.destination=new WL(i)}}function Nc(t){Ei.useDeprecatedSynchronousErrorHandling?function qL(t){Ei.useDeprecatedSynchronousErrorHandling&&Di&&(Di.errorThrown=!0,Di.error=t)}(t):Eb(t)}function wf(t,e){const{onStoppedNotification:n}=Ei;n&&xc.setTimeout(()=>n(t,e))}const QL={closed:!0,next:Db,error:function KL(t){throw t},complete:Db},If="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ef(t){return t}let ot=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function XL(t){return t&&t instanceof _f||function YL(t){return t&&Te(t.next)&&Te(t.error)&&Te(t.complete)}(t)&&wb(t)}(n)?n:new ua(n,r,i);return Mc(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Tb(r))((i,s)=>{const o=new ua({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[If](){return this}pipe(...n){return function bb(t){return 0===t.length?Ef:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=Tb(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Tb(t){var e;return null!==(e=t??Ei.Promise)&&void 0!==e?e:Promise}const JL=Sc(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Df=(()=>{class t extends ot{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new Cb(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new JL}next(n){Mc(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Mc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Mc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?vb:(this.currentObservers=null,s.push(n),new Sn(()=>{this.currentObservers=null,Ts(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new ot;return n.source=this,n}}return t.create=(e,n)=>new Cb(e,n),t})();class Cb extends Df{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:vb}}function Cs(t){return e=>{if(function ZL(t){return Te(t?.lift)}(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ss(t,e,n,r,i){return new eV(t,e,n,r,i)}class eV extends _f{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ca(t,e){return Cs((n,r)=>{let i=0;n.subscribe(Ss(r,s=>{r.next(t.call(e,s,i++))}))})}function Ab(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function bi(t){return this instanceof bi?(this.v=t,this):new bi(t)}function iV(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function Mb(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){!function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}(a,u,(o=t[s](o)).done,o.value)})}}}const Nb=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function kb(t){return Te(t?.then)}function Rb(t){return Te(t[If])}function Pb(t){return Symbol.asyncIterator&&Te(t?.[Symbol.asyncIterator])}function Ob(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Fb=function oV(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Lb(t){return Te(t?.[Fb])}function Vb(t){return function rV(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(p,g){s.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{!function u(h){h.value instanceof bi?Promise.resolve(h.value.v).then(c,l):d(s[0][2],h)}(r[h](f))}catch(p){d(s[0][3],p)}}function c(h){a("next",h)}function l(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield bi(n.read());if(i)return yield bi(void 0);yield yield bi(r)}}finally{n.releaseLock()}})}function Bb(t){return Te(t?.getReader)}function lr(t){if(t instanceof ot)return t;if(null!=t){if(Rb(t))return function aV(t){return new ot(e=>{const n=t[If]();if(Te(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(Nb(t))return function uV(t){return new ot(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(kb(t))return function cV(t){return new ot(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Eb)})}(t);if(Pb(t))return Ub(t);if(Lb(t))return function lV(t){return new ot(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(Bb(t))return function dV(t){return Ub(Vb(t))}(t)}throw Ob(t)}function Ub(t){return new ot(e=>{(function hV(t,e){var n,r,i,s;return function tV(t,e,n,r){return new(n||(n=Promise))(function(s,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(l.value).then(a,u)}c((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=iV(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Gr(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function jb(t,e,n=1/0){return Te(e)?jb((r,i)=>ca((s,o)=>e(r,s,i,o))(lr(t(r,i))),n):("number"==typeof e&&(n=e),Cs((r,i)=>function fV(t,e,n,r,i,s,o,a){const u=[];let c=0,l=0,d=!1;const h=()=>{d&&!u.length&&!c&&e.complete()},f=g=>c<r?p(g):u.push(g),p=g=>{s&&e.next(g),c++;let y=!1;lr(n(g,l++)).subscribe(Ss(e,I=>{i?.(I),s?f(I):e.next(I)},()=>{y=!0},void 0,()=>{if(y)try{for(c--;u.length&&c<r;){const I=u.shift();o?Gr(e,o,()=>p(I)):p(I)}h()}catch(I){e.error(I)}}))};return t.subscribe(Ss(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,i,t,n)))}const $b=new ot(t=>t.complete());function Tf(t){return t[t.length-1]}function kc(t,e=0){return Cs((n,r)=>{n.subscribe(Ss(r,i=>Gr(r,t,()=>r.next(i),e),()=>Gr(r,t,()=>r.complete(),e),i=>Gr(r,t,()=>r.error(i),e)))})}function Rc(t,e=0){return Cs((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Gb(t,e){if(!t)throw new Error("Iterable cannot be null");return new ot(n=>{Gr(n,e,()=>{const r=t[Symbol.asyncIterator]();Gr(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Hb(t,e){return e?function TV(t,e){if(null!=t){if(Rb(t))return function wV(t,e){return lr(t).pipe(Rc(e),kc(e))}(t,e);if(Nb(t))return function EV(t,e){return new ot(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(kb(t))return function IV(t,e){return lr(t).pipe(Rc(e),kc(e))}(t,e);if(Pb(t))return Gb(t,e);if(Lb(t))return function DV(t,e){return new ot(n=>{let r;return Gr(n,e,()=>{r=t[Fb](),Gr(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>Te(r?.return)&&r.return()})}(t,e);if(Bb(t))return function bV(t,e){return Gb(Vb(t),e)}(t,e)}throw Ob(t)}(t,e):lr(t)}function CV(...t){const e=function _V(t){return function mV(t){return t&&Te(t.schedule)}(Tf(t))?t.pop():void 0}(t),n=function vV(t,e){return"number"==typeof Tf(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?lr(r[0]):function pV(t=1/0){return jb(Ef,t)}(n)(Hb(r,e)):$b}function Cf(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new ua({next:()=>{r.unsubscribe(),t()}});return lr(e(...n)).subscribe(r)}function ye(t){for(let e in t)if(t[e]===ye)return e;throw Error("Could not find renamed property on target object.")}function Sf(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function _e(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(_e).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Af(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const AV=ye({__forward_ref__:ye});function ve(t){return t.__forward_ref__=ve,t.toString=function(){return _e(this())},t}function j(t){return xf(t)?t():t}function xf(t){return"function"==typeof t&&t.hasOwnProperty(AV)&&t.__forward_ref__===ve}function Mf(t){return t&&!!t.\u0275providers}class M extends Error{constructor(e,n){super(Pc(e,n)),this.code=e}}function Pc(t,e){return`NG0${Math.abs(t)}${e?": "+e.trim():""}`}function W(t){return"string"==typeof t?t:null==t?"":String(t)}function Oc(t,e){throw new M(-201,!1)}function vn(t,e){null==t&&function de(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function ge(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function An(t){return{providers:t.providers||[],imports:t.imports||[]}}function Fc(t){return zb(t,Lc)||zb(t,Kb)}function zb(t,e){return t.hasOwnProperty(e)?t[e]:null}function Wb(t){return t&&(t.hasOwnProperty(Nf)||t.hasOwnProperty(FV))?t[Nf]:null}const Lc=ye({\u0275prov:ye}),Nf=ye({\u0275inj:ye}),Kb=ye({ngInjectableDef:ye}),FV=ye({ngInjectorDef:ye});var H=(()=>((H=H||{})[H.Default=0]="Default",H[H.Host=1]="Host",H[H.Self=2]="Self",H[H.SkipSelf=4]="SkipSelf",H[H.Optional=8]="Optional",H))();let kf;function wn(t){const e=kf;return kf=t,e}function Qb(t,e,n){const r=Fc(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&H.Optional?null:void 0!==e?e:void Oc(_e(t))}const Ie=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),la={},Rf="__NG_DI_FLAG__",Vc="ngTempTokenPath",VV="ngTokenPath",BV=/\n/gm,UV="\u0275",Yb="__source";let da;function As(t){const e=da;return da=t,e}function jV(t,e=H.Default){if(void 0===da)throw new M(-203,!1);return null===da?Qb(t,void 0,e):da.get(t,e&H.Optional?null:void 0,e)}function ie(t,e=H.Default){return(function LV(){return kf}()||jV)(j(t),e)}function Bc(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Pf(t){const e=[];for(let n=0;n<t.length;n++){const r=j(t[n]);if(Array.isArray(r)){if(0===r.length)throw new M(900,!1);let i,s=H.Default;for(let o=0;o<r.length;o++){const a=r[o],u=$V(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(ie(i,s))}else e.push(ie(r))}return e}function ha(t,e){return t[Rf]=e,t.prototype[Rf]=e,t}function $V(t){return t[Rf]}function qr(t){return{toString:t}.toString()}var jn=(()=>((jn=jn||{})[jn.OnPush=0]="OnPush",jn[jn.Default=1]="Default",jn))(),$n=(()=>{return(t=$n||($n={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",$n;var t})();const dr={},ce=[],Uc=ye({\u0275cmp:ye}),Of=ye({\u0275dir:ye}),Ff=ye({\u0275pipe:ye}),Zb=ye({\u0275mod:ye}),hr=ye({\u0275fac:ye}),fa=ye({__NG_ELEMENT_ID__:ye});let qV=0;function pa(t){return qr(()=>{const n=!0===t.standalone,r={},i={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===jn.OnPush,directiveDefs:null,pipeDefs:null,standalone:n,dependencies:n&&t.dependencies||null,getStandaloneInjector:null,selectors:t.selectors||ce,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||$n.Emulated,id:"c"+qV++,styles:t.styles||ce,_:null,setInput:null,schemas:t.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},s=t.dependencies,o=t.features;return i.inputs=nT(t.inputs,r),i.outputs=nT(t.outputs),o&&o.forEach(a=>a(i)),i.directiveDefs=s?()=>("function"==typeof s?s():s).map(eT).filter(tT):null,i.pipeDefs=s?()=>("function"==typeof s?s():s).map(Pt).filter(tT):null,i})}function eT(t){return he(t)||Et(t)}function tT(t){return null!==t}function Gn(t){return qr(()=>({type:t.type,bootstrap:t.bootstrap||ce,declarations:t.declarations||ce,imports:t.imports||ce,exports:t.exports||ce,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function nT(t,e){if(null==t)return dr;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}const K=pa;function he(t){return t[Uc]||null}function Et(t){return t[Of]||null}function Pt(t){return t[Ff]||null}const fr=0,R=1,J=2,ke=3,xn=4,Ti=5,Dt=6,xs=7,Le=8,jc=9,$c=10,ee=11,Lf=12,ma=13,rT=14,Ms=15,bt=16,ya=17,Ns=18,Hn=19,_a=20,iT=21,Ee=22,Vf=1,sT=2,Gc=7,Hc=8,ks=9,Ot=10;function un(t){return Array.isArray(t)&&"object"==typeof t[Vf]}function Mn(t){return Array.isArray(t)&&!0===t[Vf]}function Bf(t){return 0!=(4&t.flags)}function va(t){return t.componentOffset>-1}function qc(t){return 1==(1&t.flags)}function Nn(t){return null!==t.template}function KV(t){return 0!=(256&t[J])}function Ci(t,e){return t.hasOwnProperty(hr)?t[hr]:null}class XV{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function pr(){return uT}function uT(t){return t.type.prototype.ngOnChanges&&(t.setInput=ZV),JV}function JV(){const t=lT(this),e=t?.current;if(e){const n=t.previous;if(n===dr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function ZV(t,e,n,r){const i=this.declaredInputs[n],s=lT(t)||function eB(t,e){return t[cT]=e}(t,{previous:dr,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new XV(u&&u.currentValue,e,a===dr),t[r]=e}pr.ngInherit=!0;const cT="__ngSimpleChanges__";function lT(t){return t[cT]||null}const In=function(t,e,n){};function ft(t){for(;Array.isArray(t);)t=t[fr];return t}function zc(t,e){return ft(e[t])}function cn(t,e){return ft(e[t.index])}function fT(t,e){return t.data[e]}function ln(t,e){const n=e[t];return un(n)?n:n[fr]}function Wc(t){return 64==(64&t[J])}function zr(t,e){return null==e?null:t[e]}function pT(t){t[Ns]=0}function jf(t,e){t[Ti]+=e;let n=t,r=t[ke];for(;null!==r&&(1===e&&1===n[Ti]||-1===e&&0===n[Ti]);)r[Ti]+=e,n=r,r=r[ke]}const Q={lFrame:bT(null),bindingsEnabled:!0};function mT(){return Q.bindingsEnabled}function E(){return Q.lFrame.lView}function se(){return Q.lFrame.tView}function $f(t){return Q.lFrame.contextLView=t,t[Le]}function Gf(t){return Q.lFrame.contextLView=null,t}function pt(){let t=yT();for(;null!==t&&64===t.type;)t=t.parent;return t}function yT(){return Q.lFrame.currentTNode}function qn(t,e){const n=Q.lFrame;n.currentTNode=t,n.isParent=e}function Hf(){return Q.lFrame.isParent}function Ps(){return Q.lFrame.bindingIndex++}function fB(t,e){const n=Q.lFrame;n.bindingIndex=n.bindingRootIndex=t,zf(e)}function zf(t){Q.lFrame.currentDirectiveIndex=t}function Kf(t){Q.lFrame.currentQueryIndex=t}function gB(t){const e=t[R];return 2===e.type?e.declTNode:1===e.type?t[Dt]:null}function ET(t,e,n){if(n&H.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&H.Host||(i=gB(s),null===i||(s=s[Ms],10&i.type))););if(null===i)return!1;e=i,t=s}const r=Q.lFrame=DT();return r.currentTNode=e,r.lView=t,!0}function Qf(t){const e=DT(),n=t[R];Q.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function DT(){const t=Q.lFrame,e=null===t?null:t.child;return null===e?bT(t):e}function bT(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function TT(){const t=Q.lFrame;return Q.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const CT=TT;function Yf(){const t=TT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Lt(){return Q.lFrame.selectedIndex}function Si(t){Q.lFrame.selectedIndex=t}function xe(){const t=Q.lFrame;return fT(t.tView,t.selectedIndex)}function Kc(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:l}=s;o&&(t.contentHooks||(t.contentHooks=[])).push(-n,o),a&&((t.contentHooks||(t.contentHooks=[])).push(n,a),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,a)),u&&(t.viewHooks||(t.viewHooks=[])).push(-n,u),c&&((t.viewHooks||(t.viewHooks=[])).push(n,c),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,c)),null!=l&&(t.destroyHooks||(t.destroyHooks=[])).push(n,l)}}function Qc(t,e,n){ST(t,e,3,n)}function Yc(t,e,n,r){(3&t[J])===n&&ST(t,e,n,r)}function Xf(t,e){let n=t[J];(3&n)===e&&(n&=2047,n+=1,t[J]=n)}function ST(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&t[Ns]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[Ns]+=65536),(a<s||-1==s)&&(bB(t,n,e,u),t[Ns]=(4294901760&t[Ns])+u+2),u++}function bB(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];if(i){if(t[J]>>11<t[Ns]>>16&&(3&t[J])===e){t[J]+=2048,In(4,a,s);try{s.call(a)}finally{In(5,a,s)}}}else{In(4,a,s);try{s.call(a)}finally{In(5,a,s)}}}const Os=-1;class Ia{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Zf(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];xT(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function AT(t){return 3===t||4===t||6===t}function xT(t){return 64===t.charCodeAt(0)}function Ea(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||MT(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function MT(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}function NT(t){return t!==Os}function Xc(t){return 32767&t}function Jc(t,e){let n=function AB(t){return t>>16}(t),r=e;for(;n>0;)r=r[Ms],n--;return r}let ep=!0;function Zc(t){const e=ep;return ep=t,e}const kT=255,RT=5;let xB=0;const zn={};function el(t,e){const n=PT(t,e);if(-1!==n)return n;const r=e[R];r.firstCreatePass&&(t.injectorIndex=e.length,tp(r.data,t),tp(e,null),tp(r.blueprint,null));const i=np(t,e),s=t.injectorIndex;if(NT(i)){const o=Xc(i),a=Jc(i,e),u=a[R].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|u[o+c]}return e[s+8]=i,s}function tp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function PT(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function np(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=jT(i),null===r)return Os;if(n++,i=i[Ms],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Os}function rp(t,e,n){!function MB(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(fa)&&(r=n[fa]),null==r&&(r=n[fa]=xB++);const i=r&kT;e.data[t+(i>>RT)]|=1<<i}(t,e,n)}function OT(t,e,n){if(n&H.Optional||void 0!==t)return t;Oc()}function FT(t,e,n,r){if(n&H.Optional&&void 0===r&&(r=null),!(n&(H.Self|H.Host))){const i=t[jc],s=wn(void 0);try{return i?i.get(e,r,n&H.Optional):Qb(e,r,n&H.Optional)}finally{wn(s)}}return OT(r,0,n)}function LT(t,e,n,r=H.Default,i){if(null!==t){if(1024&e[J]){const o=function OB(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&1024&o[J]&&!(256&o[J]);){const a=VT(s,o,n,r|H.Self,zn);if(a!==zn)return a;let u=s.parent;if(!u){const c=o[iT];if(c){const l=c.get(n,zn,r);if(l!==zn)return l}u=jT(o),o=o[Ms]}s=u}return i}(t,e,n,r,zn);if(o!==zn)return o}const s=VT(t,e,n,r,zn);if(s!==zn)return s}return FT(e,n,r,i)}function VT(t,e,n,r,i){const s=function RB(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(fa)?t[fa]:void 0;return"number"==typeof e?e>=0?e&kT:PB:e}(n);if("function"==typeof s){if(!ET(e,t,r))return r&H.Host?OT(i,0,r):FT(e,n,r,i);try{const o=s(r);if(null!=o||r&H.Optional)return o;Oc()}finally{CT()}}else if("number"==typeof s){let o=null,a=PT(t,e),u=Os,c=r&H.Host?e[bt][Dt]:null;for((-1===a||r&H.SkipSelf)&&(u=-1===a?np(t,e):e[a+8],u!==Os&&UT(r,!1)?(o=e[R],a=Xc(u),e=Jc(u,e)):a=-1);-1!==a;){const l=e[R];if(BT(s,a,l.data)){const d=kB(a,e,n,o,r,c);if(d!==zn)return d}u=e[a+8],u!==Os&&UT(r,e[R].data[a+8]===c)&&BT(s,a,e)?(o=l,a=Xc(u),e=Jc(u,e)):a=-1}}return i}function kB(t,e,n,r,i,s){const o=e[R],a=o.data[t+8],l=function tl(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,l=s>>20,h=i?a+l:t.directiveEnd;for(let f=r?a:a+l;f<h;f++){const p=o[f];if(f<u&&n===p||f>=u&&p.type===n)return f}if(i){const f=o[u];if(f&&Nn(f)&&f.type===n)return u}return null}(a,o,n,null==r?va(a)&&ep:r!=o&&0!=(3&a.type),i&H.Host&&s===a);return null!==l?Ai(e,o,l,a):zn}function Ai(t,e,n,r){let i=t[n];const s=e.data;if(function TB(t){return t instanceof Ia}(i)){const o=i;o.resolving&&function xV(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new M(-200,`Circular dependency in DI detected for ${t}${n}`)}(function le(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():W(t)}(s[n]));const a=Zc(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?wn(o.injectImpl):null;ET(t,r,H.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function DB(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=uT(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==u&&wn(u),Zc(a),o.resolving=!1,CT()}}return i}function BT(t,e,n){return!!(n[e+(t>>RT)]&1<<t)}function UT(t,e){return!(t&H.Self||t&H.Host&&e)}class Fs{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return LT(this._tNode,this._lView,e,Bc(r),n)}}function PB(){return new Fs(pt(),E())}function ip(t){return xf(t)?()=>{const e=ip(j(t));return e&&e()}:Ci(t)}function jT(t){const e=t[R],n=e.type;return 2===n?e.declTNode:1===n?t[Dt]:null}const Vs="__parameters__";function Us(t,e,n){return qr(()=>{const r=function op(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,c,l){const d=u.hasOwnProperty(Vs)?u[Vs]:Object.defineProperty(u,Vs,{value:[]})[Vs];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class ${constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=ge({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function xi(t,e){t.forEach(n=>Array.isArray(n)?xi(n,e):e(n))}function GT(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function nl(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function dn(t,e,n){let r=js(t,e);return r>=0?t[1|r]=n:(r=~r,function BB(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function up(t,e){const n=js(t,e);if(n>=0)return t[1|n]}function js(t,e){return function HT(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}(t,e,1)}const Kt=ha(Us("Optional"),8),il=ha(Us("SkipSelf"),4);var Qt=(()=>((Qt=Qt||{})[Qt.Important=1]="Important",Qt[Qt.DashCase=2]="DashCase",Qt))();const pp=new Map;let a2=0;const mp="__ngContext__";function Ct(t,e){un(e)?(t[mp]=e[_a],function c2(t){pp.set(t[_a],t)}(e)):t[mp]=e}let yp;function _p(t,e){return yp(t,e)}function xa(t){const e=t[ke];return Mn(e)?e[ke]:e}function vp(t){return d0(t[ma])}function wp(t){return d0(t[xn])}function d0(t){for(;null!==t&&!Mn(t);)t=t[xn];return t}function Gs(t,e,n,r,i){if(null!=r){let s,o=!1;Mn(r)?s=r:un(r)&&(o=!0,r=r[fr]);const a=ft(r);0===t&&null!==n?null==i?y0(e,n,a):Mi(e,n,a,i||null,!0):1===t&&null!==n?Mi(e,n,a,i||null,!0):2===t?function Sp(t,e,n){const r=al(t,e);r&&function x2(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function k2(t,e,n,r,i){const s=n[Gc];s!==ft(n)&&Gs(e,t,r,s,i);for(let a=Ot;a<n.length;a++){const u=n[a];Ma(u[R],u,t,e,r,s)}}(e,t,s,n,i)}}function Ep(t,e,n){return t.createElement(e,n)}function f0(t,e){const n=t[ks],r=n.indexOf(e),i=e[ke];512&e[J]&&(e[J]&=-513,jf(i,-1)),n.splice(r,1)}function Dp(t,e){if(t.length<=Ot)return;const n=Ot+e,r=t[n];if(r){const i=r[ya];null!==i&&i!==t&&f0(i,r),e>0&&(t[n-1][xn]=r[xn]);const s=nl(t,Ot+e);!function I2(t,e){Ma(t,e,e[ee],2,null,null),e[fr]=null,e[Dt]=null}(r[R],r);const o=s[Hn];null!==o&&o.detachView(s[R]),r[ke]=null,r[xn]=null,r[J]&=-65}return r}function p0(t,e){if(!(128&e[J])){const n=e[ee];n.destroyNode&&Ma(t,e,n,3,null,null),function b2(t){let e=t[ma];if(!e)return bp(t[R],t);for(;e;){let n=null;if(un(e))n=e[ma];else{const r=e[Ot];r&&(n=r)}if(!n){for(;e&&!e[xn]&&e!==t;)un(e)&&bp(e[R],e),e=e[ke];null===e&&(e=t),un(e)&&bp(e[R],e),n=e&&e[xn]}e=n}}(e)}}function bp(t,e){if(!(128&e[J])){e[J]&=-65,e[J]|=128,function A2(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Ia)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];In(4,a,u);try{u.call(a)}finally{In(5,a,u)}}else{In(4,i,s);try{s.call(i)}finally{In(5,i,s)}}}}}(t,e),function S2(t,e){const n=t.cleanup,r=e[xs];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[i=o]():r[i=-o].unsubscribe(),s+=2}else{const o=r[i=n[s+1]];n[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)(0,r[s])();e[xs]=null}}(t,e),1===e[R].type&&e[ee].destroy();const n=e[ya];if(null!==n&&Mn(e[ke])){n!==e[ke]&&f0(n,e);const r=e[Hn];null!==r&&r.detachView(t)}!function l2(t){pp.delete(t[_a])}(e)}}function g0(t,e,n){return function m0(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[fr];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===$n.None||s===$n.Emulated)return null}return cn(r,n)}}(t,e.parent,n)}function Mi(t,e,n,r,i){t.insertBefore(e,n,r,i)}function y0(t,e,n){t.appendChild(e,n)}function _0(t,e,n,r,i){null!==r?Mi(t,e,n,r,i):y0(t,e,n)}function al(t,e){return t.parentNode(e)}let Tp,Mp,I0=function w0(t,e,n){return 40&t.type?cn(t,n):null};function ul(t,e,n,r){const i=g0(t,r,e),s=e[ee],a=function v0(t,e,n){return I0(t,e,n)}(r.parent||e[Dt],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)_0(s,i,n[u],a,!1);else _0(s,i,n,a,!1);void 0!==Tp&&Tp(s,r,e,n,i)}function cl(t,e){if(null!==e){const n=e.type;if(3&n)return cn(e,t);if(4&n)return Cp(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return cl(t,r);{const i=t[e.index];return Mn(i)?Cp(-1,i):ft(i)}}if(32&n)return _p(e,t)()||ft(t[e.index]);{const r=D0(t,e);return null!==r?Array.isArray(r)?r[0]:cl(xa(t[bt]),r):cl(t,e.next)}}return null}function D0(t,e){return null!==e?t[bt][Dt].projection[e.projection]:null}function Cp(t,e){const n=Ot+t+1;if(n<e.length){const r=e[n],i=r[R].firstChild;if(null!==i)return cl(r,i)}return e[Gc]}function Ap(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&Ct(ft(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)Ap(t,e,n.child,r,i,s,!1),Gs(e,t,i,a,s);else if(32&u){const c=_p(n,r);let l;for(;l=c();)Gs(e,t,i,l,s);Gs(e,t,i,a,s)}else 16&u?b0(t,e,r,n,i,s):Gs(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Ma(t,e,n,r,i,s){Ap(n,r,t.firstChild,e,i,s,!1)}function b0(t,e,n,r,i,s){const o=n[bt],u=o[Dt].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++)Gs(e,t,i,u[c],s);else Ap(t,e,u,o[ke],i,s,!0)}function T0(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function C0(t,e,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&Zf(t,e,r),null!==i&&T0(t,e,i),null!==s&&function P2(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}class N0{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const U0=new $("ENVIRONMENT_INITIALIZER"),j0=new $("INJECTOR",-1),$0=new $("INJECTOR_DEF_TYPES");class G0{get(e,n=la){if(n===la){const r=new Error(`NullInjectorError: No provider for ${_e(e)}!`);throw r.name="NullInjectorError",r}return n}}function uU(...t){return{\u0275providers:H0(0,t),\u0275fromNgModule:!0}}function H0(t,...e){const n=[],r=new Set;let i;return xi(e,s=>{const o=s;Fp(o,n,[],r)&&(i||(i=[]),i.push(o))}),void 0!==i&&q0(i,n),n}function q0(t,e){for(let n=0;n<t.length;n++){const{providers:i}=t[n];Lp(i,s=>{e.push(s)})}}function Fp(t,e,n,r){if(!(t=j(t)))return!1;let i=null,s=Wb(t);const o=!s&&he(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const u=t.ngModule;if(s=Wb(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of u)Fp(c,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;r.add(i);try{xi(s.imports,l=>{Fp(l,e,n,r)&&(c||(c=[]),c.push(l))})}finally{}void 0!==c&&q0(c,e)}if(!a){const c=Ci(i)||(()=>new i);e.push({provide:i,useFactory:c,deps:ce},{provide:$0,useValue:i,multi:!0},{provide:U0,useValue:()=>ie(i),multi:!0})}const u=s.providers;null==u||a||Lp(u,l=>{e.push(l)})}}return i!==t&&void 0!==t.providers}function Lp(t,e){for(let n of t)Mf(n)&&(n=n.\u0275providers),Array.isArray(n)?Lp(n,e):e(n)}const cU=ye({provide:String,useValue:ye});function Vp(t){return null!==t&&"object"==typeof t&&cU in t}function Ni(t){return"function"==typeof t}const Bp=new $("Set Injector scope."),fl={},dU={};let Up;function pl(){return void 0===Up&&(Up=new G0),Up}class qs{}class K0 extends qs{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,$p(e,o=>this.processProvider(o)),this.records.set(j0,zs(void 0,this)),i.has("environment")&&this.records.set(qs,zs(void 0,this));const s=this.records.get(Bp);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get($0.multi,ce,H.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const n=As(this),r=wn(void 0);try{return e()}finally{As(n),wn(r)}}get(e,n=la,r=H.Default){this.assertNotDestroyed(),r=Bc(r);const i=As(this),s=wn(void 0);try{if(!(r&H.SkipSelf)){let a=this.records.get(e);if(void 0===a){const u=function mU(t){return"function"==typeof t||"object"==typeof t&&t instanceof $}(e)&&Fc(e);a=u&&this.injectableDefInScope(u)?zs(jp(e),fl):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&H.Self?pl():this.parent).get(e,n=r&H.Optional&&n===la?null:n)}catch(o){if("NullInjectorError"===o.name){if((o[Vc]=o[Vc]||[]).unshift(_e(e)),i)throw o;return function GV(t,e,n,r){const i=t[Vc];throw e[Yb]&&i.unshift(e[Yb]),t.message=function HV(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&t.charAt(1)==UV?t.slice(2):t;let i=_e(e);if(Array.isArray(e))i=e.map(_e).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):_e(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(BV,"\n  ")}`}("\n"+t.message,i,n,r),t[VV]=i,t[Vc]=null,t}(o,e,"R3InjectorError",this.source)}throw o}finally{wn(s),As(i)}}resolveInjectorInitializers(){const e=As(this),n=wn(void 0);try{const r=this.get(U0.multi,ce,H.Self);for(const i of r)i()}finally{As(e),wn(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(_e(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new M(205,!1)}processProvider(e){let n=Ni(e=j(e))?e:j(e&&e.provide);const r=function fU(t){return Vp(t)?zs(void 0,t.useValue):zs(Q0(t),fl)}(e);if(Ni(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=zs(void 0,fl,!0),i.factory=()=>Pf(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===fl&&(n.value=dU,n.value=n.factory()),"object"==typeof n.value&&n.value&&function gU(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=j(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function jp(t){const e=Fc(t),n=null!==e?e.factory:Ci(t);if(null!==n)return n;if(t instanceof $)throw new M(204,!1);if(t instanceof Function)return function hU(t){const e=t.length;if(e>0)throw function Ta(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new M(204,!1);const n=function PV(t){const e=t&&(t[Lc]||t[Kb]);return e?(function OV(t){if(t.hasOwnProperty("name"))return t.name;(""+t).match(/^function\s*([^\s(]+)/)}(t),e):null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new M(204,!1)}function Q0(t,e,n){let r;if(Ni(t)){const i=j(t);return Ci(i)||jp(i)}if(Vp(t))r=()=>j(t.useValue);else if(function W0(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Pf(t.deps||[]));else if(function z0(t){return!(!t||!t.useExisting)}(t))r=()=>ie(j(t.useExisting));else{const i=j(t&&(t.useClass||t.provide));if(!function pU(t){return!!t.deps}(t))return Ci(i)||jp(i);r=()=>new i(...Pf(t.deps))}return r}function zs(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function $p(t,e){for(const n of t)Array.isArray(n)?$p(n,e):n&&Mf(n)?$p(n.\u0275providers,e):e(n)}class yU{}class Y0{}class vU{resolveComponentFactory(e){throw function _U(t){const e=Error(`No component factory found for ${_e(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(e)}}let gl=(()=>{class t{}return t.NULL=new vU,t})();function wU(){return Ws(pt(),E())}function Ws(t,e){return new kn(cn(t,e))}let kn=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=wU,t})();class J0{}let ki=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function EU(){const t=E(),n=ln(pt().index,t);return(un(n)?n:t)[ee]}(),t})(),DU=(()=>{class t{}return t.\u0275prov=ge({token:t,providedIn:"root",factory:()=>null}),t})();class Pa{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Z0=new Pa("15.2.2"),Gp={},Hp="ngOriginalError";function qp(t){return t[Hp]}class Ks{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&qp(e);for(;n&&qp(n);)n=qp(n);return n||null}}function tC(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}const nC="ng-template";function PU(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==tC(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function rC(t){return 4===t.type&&t.value!==nC}function OU(t,e,n){return e===(4!==t.type||n?t.value:nC)}function FU(t,e,n){let r=4;const i=t.attrs||[],s=function BU(t){for(let e=0;e<t.length;e++)if(AT(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!OU(t,u,n)||""===u&&1===e.length){if(Rn(r))return!1;o=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!PU(t.attrs,c,n)){if(Rn(r))return!1;o=!0}continue}const d=LU(8&r?"class":u,i,rC(t),n);if(-1===d){if(Rn(r))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==tC(f,c,0)||2&r&&c!==h){if(Rn(r))return!1;o=!0}}}}else{if(!o&&!Rn(r)&&!Rn(u))return!1;if(o&&Rn(u))continue;o=!1,r=u|1&r}}return Rn(r)||o}function Rn(t){return 0==(1&t)}function LU(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function UU(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function iC(t,e,n=!1){for(let r=0;r<e.length;r++)if(FU(t,e[r],n))return!0;return!1}function sC(t,e){return t?":not("+e.trim()+")":e}function $U(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Rn(o)&&(e+=sC(s,i),i=""),r=o,s=s||!Rn(r);n++}return""!==i&&(e+=sC(s,i)),e}const Y={};function hn(t){oC(se(),E(),Lt()+t,!1)}function oC(t,e,n,r){if(!r)if(3==(3&e[J])){const s=t.preOrderCheckHooks;null!==s&&Qc(e,s,n)}else{const s=t.preOrderHooks;null!==s&&Yc(e,s,0,n)}Si(n)}function lC(t,e=null,n=null,r){const i=dC(t,e,n,r);return i.resolveInjectorInitializers(),i}function dC(t,e=null,n=null,r,i=new Set){const s=[n||ce,uU(t)];return r=r||("object"==typeof t?void 0:_e(t)),new K0(s,e||pl(),r||null,i)}let Wn=(()=>{class t{static create(n,r){if(Array.isArray(n))return lC({name:""},r,n,"");{const i=n.name??"";return lC({name:i},n.parent,n.providers,i)}}}return t.THROW_IF_NOT_FOUND=la,t.NULL=new G0,t.\u0275prov=ge({token:t,providedIn:"any",factory:()=>ie(j0)}),t.__NG_ELEMENT_ID__=-1,t})();function C(t,e=H.Default){const n=E();return null===n?ie(t,e):LT(pt(),n,j(t),e)}function _C(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=t.data[s];Kf(n[r]),o.contentQueries(2,e[s],s)}}}function yl(t,e,n,r,i,s,o,a,u,c,l){const d=e.blueprint.slice();return d[fr]=i,d[J]=76|r,(null!==l||t&&1024&t[J])&&(d[J]|=1024),pT(d),d[ke]=d[Ms]=t,d[Le]=n,d[$c]=o||t&&t[$c],d[ee]=a||t&&t[ee],d[Lf]=u||t&&t[Lf]||null,d[jc]=c||t&&t[jc]||null,d[Dt]=s,d[_a]=function u2(){return a2++}(),d[iT]=l,d[bt]=2==e.type?t[bt]:d,d}function Xs(t,e,n,r,i){let s=t.data[e];if(null===s)s=function Yp(t,e,n,r,i){const s=yT(),o=Hf(),u=t.data[e]=function gj(t,e,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(t,e,n,r,i),function hB(){return Q.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function wa(){const t=Q.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return qn(s,!0),s}function Oa(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Xp(t,e,n){Qf(e);try{const r=t.viewQuery;null!==r&&ag(1,r,n);const i=t.template;null!==i&&vC(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&_C(t,e),t.staticViewQueries&&ag(2,t.viewQuery,n);const s=t.components;null!==s&&function hj(t,e){for(let n=0;n<e.length;n++)Pj(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[J]&=-5,Yf()}}function _l(t,e,n,r){const i=e[J];if(128!=(128&i)){Qf(e);try{pT(e),function vT(t){return Q.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&vC(t,e,n,2,r);const o=3==(3&i);if(o){const c=t.preOrderCheckHooks;null!==c&&Qc(e,c,null)}else{const c=t.preOrderHooks;null!==c&&Yc(e,c,0,null),Xf(e,0)}if(function kj(t){for(let e=vp(t);null!==e;e=wp(e)){if(!e[sT])continue;const n=e[ks];for(let r=0;r<n.length;r++){const i=n[r];512&i[J]||jf(i[ke],1),i[J]|=512}}}(e),function Nj(t){for(let e=vp(t);null!==e;e=wp(e))for(let n=Ot;n<e.length;n++){const r=e[n],i=r[R];Wc(r)&&_l(i,r,i.template,r[Le])}}(e),null!==t.contentQueries&&_C(t,e),o){const c=t.contentCheckHooks;null!==c&&Qc(e,c)}else{const c=t.contentHooks;null!==c&&Yc(e,c,1),Xf(e,1)}!function lj(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)Si(~i);else{const s=i,o=n[++r],a=n[++r];fB(o,s),a(2,e[s])}}}finally{Si(-1)}}(t,e);const a=t.components;null!==a&&function dj(t,e){for(let n=0;n<e.length;n++)Rj(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&ag(2,u,r),o){const c=t.viewCheckHooks;null!==c&&Qc(e,c)}else{const c=t.viewHooks;null!==c&&Yc(e,c,2),Xf(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[J]&=-41,512&e[J]&&(e[J]&=-513,jf(e[ke],-1))}finally{Yf()}}}function vC(t,e,n,r,i){const s=Lt(),o=2&r;try{Si(-1),o&&e.length>Ee&&oC(t,e,Ee,!1),In(o?2:0,i),n(r,i)}finally{Si(s),In(o?3:1,i)}}function Jp(t,e,n){if(Bf(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const o=t.data[s];o.contentQueries&&o.contentQueries(1,n[s],s)}}}function Zp(t,e,n){mT()&&(function Ij(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;va(n)&&function Aj(t,e,n){const r=cn(e,t),i=wC(n),s=t[$c],o=vl(t,yl(t,i,null,n.onPush?32:16,r,e,s,s.createRenderer(r,n),null,null,null));t[e.index]=o}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||el(n,e),Ct(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const u=t.data[a],c=Ai(e,t,a,n);Ct(c,e),null!==o&&xj(0,a-i,c,u,0,o),Nn(u)&&(ln(n.index,e)[Le]=Ai(e,t,a,n))}}(t,e,n,cn(n,e)),64==(64&n.flags)&&CC(t,e,n))}function eg(t,e,n=cn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function wC(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=tg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function tg(t,e,n,r,i,s,o,a,u,c){const l=Ee+r,d=l+i,h=function fj(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Y);return n}(l,d),f="function"==typeof c?c():c;return h[R]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function EC(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const s=t[i];null===r?DC(n,e,i,s):r.hasOwnProperty(i)&&DC(n,e,r[i],s)}return n}function DC(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function fn(t,e,n,r,i,s,o,a){const u=cn(e,n);let l,c=e.inputs;!a&&null!=c&&(l=c[r])?(ug(t,n,l,r,i),va(e)&&bC(n,e.index)):3&e.type&&(r=function yj(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}function bC(t,e){const n=ln(e,t);16&n[J]||(n[J]|=32)}function ng(t,e,n,r){if(mT()){const i=null===r?null:{"":-1},s=function Dj(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(iC(e,o.selectors,!1))if(r||(r=[]),Nn(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),rg(t,e,a.length)}else r.unshift(o),rg(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&TC(t,e,n,o,i,a),i&&function bj(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new M(-301,!1);r.push(e[i],s)}}}(n,r,i)}n.mergedAttrs=Ea(n.mergedAttrs,n.attrs)}function TC(t,e,n,r,i,s){for(let c=0;c<r.length;c++)rp(el(n,e),t,r[c].type);!function Cj(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let c=0;c<r.length;c++){const l=r[c];l.providersResolver&&l.providersResolver(l)}let o=!1,a=!1,u=Oa(t,e,r.length,null);for(let c=0;c<r.length;c++){const l=r[c];n.mergedAttrs=Ea(n.mergedAttrs,l.hostAttrs),Sj(t,n,e,u,l),Tj(u,l,i),null!==l.contentQueries&&(n.flags|=4),(null!==l.hostBindings||null!==l.hostAttrs||0!==l.hostVars)&&(n.flags|=64);const d=l.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function mj(t,e,n){const i=e.directiveEnd,s=t.data,o=e.attrs,a=[];let u=null,c=null;for(let l=e.directiveStart;l<i;l++){const d=s[l],h=n?n.get(d):null,p=h?h.outputs:null;u=EC(d.inputs,l,u,h?h.inputs:null),c=EC(d.outputs,l,c,p);const g=null===u||null===o||rC(e)?null:Mj(u,l,o);a.push(g)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=c}(t,n,s)}function CC(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function pB(){return Q.lFrame.currentDirectiveIndex}();try{Si(s);for(let a=r;a<i;a++){const u=t.data[a],c=e[a];zf(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&Ej(u,c)}}finally{Si(-1),zf(o)}}function Ej(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function rg(t,e,n){e.componentOffset=n,(t.components||(t.components=[])).push(e.index)}function Tj(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Nn(e)&&(n[""]=t)}}function Sj(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=Ci(i.type)),o=new Ia(s,Nn(i),C);t.blueprint[r]=o,n[r]=o,function vj(t,e,n,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function wj(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(t,e,r,Oa(t,n,i.hostVars,Y),i)}function xj(t,e,n,r,i,s){const o=s[e];if(null!==o){const a=r.setInput;for(let u=0;u<o.length;){const c=o[u++],l=o[u++],d=o[u++];null!==a?r.setInput(n,d,c,l):n[l]=d}}}function Mj(t,e,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function SC(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null]}function Rj(t,e){const n=ln(e,t);if(Wc(n)){const r=n[R];48&n[J]?_l(r,n,r.template,n[Le]):n[Ti]>0&&sg(n)}}function sg(t){for(let r=vp(t);null!==r;r=wp(r))for(let i=Ot;i<r.length;i++){const s=r[i];if(Wc(s))if(512&s[J]){const o=s[R];_l(o,s,o.template,s[Le])}else s[Ti]>0&&sg(s)}const n=t[R].components;if(null!==n)for(let r=0;r<n.length;r++){const i=ln(n[r],t);Wc(i)&&i[Ti]>0&&sg(i)}}function Pj(t,e){const n=ln(e,t),r=n[R];(function Oj(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(r,n),Xp(r,n,n[Le])}function vl(t,e){return t[ma]?t[rT][xn]=e:t[ma]=e,t[rT]=e,e}function og(t){for(;t;){t[J]|=32;const e=xa(t);if(KV(t)&&!e)return t;t=e}return null}function wl(t,e,n,r=!0){const i=e[$c];i.begin&&i.begin();try{_l(t,e,t.template,n)}catch(o){throw r&&NC(e,o),o}finally{i.end&&i.end()}}function ag(t,e,n){Kf(0),e(t,n)}function AC(t){return t[xs]||(t[xs]=[])}function xC(t){return t.cleanup||(t.cleanup=[])}function NC(t,e){const n=t[jc],r=n?n.get(Ks,null):null;r&&r.handleError(e)}function ug(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],u=e[o],c=t.data[o];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Il(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Af(i,a):2==s&&(r=Af(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function El(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(ft(s)),Mn(s))for(let a=Ot;a<s.length;a++){const u=s[a],c=u[R].firstChild;null!==c&&El(u[R],u,c,r)}const o=n.type;if(8&o)El(t,e,n.child,r);else if(32&o){const a=_p(n,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=D0(e,n);if(Array.isArray(a))r.push(...a);else{const u=xa(e[bt]);El(u[R],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}class Fa{get rootNodes(){const e=this._lView,n=e[R];return El(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Le]}set context(e){this._lView[Le]=e}get destroyed(){return 128==(128&this._lView[J])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[ke];if(Mn(e)){const n=e[Hc],r=n?n.indexOf(this):-1;r>-1&&(Dp(e,r),nl(n,r))}this._attachedToViewContainer=!1}p0(this._lView[R],this._lView)}onDestroy(e){!function IC(t,e,n,r){const i=AC(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&xC(t).push(r,i.length-1))}(this._lView[R],this._lView,null,e)}markForCheck(){og(this._cdRefInjectingView||this._lView)}detach(){this._lView[J]&=-65}reattach(){this._lView[J]|=64}detectChanges(){wl(this._lView[R],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new M(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function D2(t,e){Ma(t,e,e[ee],2,null,null)}(this._lView[R],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new M(902,!1);this._appRef=e}}class Fj extends Fa{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;wl(e[R],e,e[Le],!1)}checkNoChanges(){}get context(){return null}}class kC extends gl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=he(e);return new La(n,this.ngModule)}}function RC(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class Vj{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Bc(r);const i=this.injector.get(e,Gp,r);return i!==Gp||n===Gp?i:this.parentInjector.get(e,n,r)}}class La extends Y0{get inputs(){return RC(this.componentDef.inputs)}get outputs(){return RC(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function GU(t){return t.map($U).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof qs?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new Vj(e,s):e,a=o.get(J0,null);if(null===a)throw new M(407,!1);const u=o.get(DU,null),c=a.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",d=r?function pj(t,e,n){return t.selectRootElement(e,n===$n.ShadowDom)}(c,r,this.componentDef.encapsulation):Ep(c,l,function Lj(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(l)),h=this.componentDef.onPush?288:272,f=tg(0,null,null,1,0,null,null,null,null,null),p=yl(null,f,null,h,null,null,a,c,u,o,null);let g,y;Qf(p);try{const I=this.componentDef;let b,v=null;I.findHostDirectiveDefs?(b=[],v=new Map,I.findHostDirectiveDefs(I,b,v),b.push(I)):b=[I];const k=function Uj(t,e){const n=t[R],r=Ee;return t[r]=e,Xs(n,r,2,"#host",null)}(p,d),L=function jj(t,e,n,r,i,s,o,a){const u=i[R];!function $j(t,e,n,r){for(const i of t)e.mergedAttrs=Ea(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Il(e,e.mergedAttrs,!0),null!==n&&C0(r,n,e))}(r,t,e,o);const c=s.createRenderer(e,n),l=yl(i,wC(n),null,n.onPush?32:16,i[t.index],t,s,c,a||null,null,null);return u.firstCreatePass&&rg(u,t,r.length-1),vl(i,l),i[t.index]=l}(k,d,I,b,p,a,c);y=fT(f,Ee),d&&function Hj(t,e,n,r){if(r)Zf(t,n,["ng-version",Z0.full]);else{const{attrs:i,classes:s}=function HU(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Rn(i))break;i=s}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&Zf(t,n,i),s&&s.length>0&&T0(t,n,s.join(" "))}}(c,I,d,r),void 0!==n&&function qj(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(y,this.ngContentSelectors,n),g=function Gj(t,e,n,r,i,s){const o=pt(),a=i[R],u=cn(o,i);TC(a,i,o,n,null,r);for(let l=0;l<n.length;l++)Ct(Ai(i,a,o.directiveStart+l,o),i);CC(a,i,o),u&&Ct(u,i);const c=Ai(i,a,o.directiveStart+o.componentOffset,o);if(t[Le]=i[Le]=c,null!==s)for(const l of s)l(c,e);return Jp(a,o,t),c}(L,I,b,v,p,[zj]),Xp(f,p,null)}finally{Yf()}return new Bj(this.componentType,g,Ws(y,p),p,y)}}class Bj extends yU{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=n,this.hostView=this.changeDetectorRef=new Fj(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){const s=this._rootLView;ug(s[R],s,i,e,n),bC(s,this._tNode.index)}}get injector(){return new Fs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function zj(){const t=pt();Kc(E()[R],t)}function fe(t){let e=function PC(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(Nn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new M(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const o=t;o.inputs=cg(t.inputs),o.declaredInputs=cg(t.declaredInputs),o.outputs=cg(t.outputs);const a=i.hostBindings;a&&Yj(t,a);const u=i.viewQuery,c=i.contentQueries;if(u&&Kj(t,u),c&&Qj(t,c),Sf(t.inputs,i.inputs),Sf(t.declaredInputs,i.declaredInputs),Sf(t.outputs,i.outputs),Nn(i)&&i.data.animation){const l=t.data;l.animation=(l.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(t),a===fe&&(n=!1)}}e=Object.getPrototypeOf(e)}!function Wj(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ea(i.hostAttrs,n=Ea(n,i.hostAttrs))}}(r)}function cg(t){return t===dr?{}:t===ce?[]:t}function Kj(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function Qj(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,s)=>{e(r,i,s),n(r,i,s)}:e}function Yj(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function Dl(t){return!!function lg(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function St(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Zs(t,e,n,r){return St(t,Ps(),n)?e+W(n)+r:Y}function Kr(t,e,n){const r=E();return St(r,Ps(),e)&&fn(se(),xe(),r,t,e,r[ee],n,!1),Kr}function dg(t,e,n,r,i){const o=i?"class":"style";ug(t,n,e.inputs[o],o,r)}function At(t,e,n,r){const i=E(),s=se(),o=Ee+t,a=i[ee],u=s.firstCreatePass?function c$(t,e,n,r,i,s){const o=e.consts,u=Xs(e,t,2,r,zr(o,i));return ng(e,n,u,zr(o,s)),null!==u.attrs&&Il(u,u.attrs,!1),null!==u.mergedAttrs&&Il(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,n,r):s.data[o],c=i[o]=Ep(a,e,function EB(){return Q.lFrame.currentNamespace}()),l=qc(u);return qn(u,!0),C0(a,c,u),32!=(32&u.flags)&&ul(s,i,c,u),0===function oB(){return Q.lFrame.elementDepthCount}()&&Ct(c,i),function aB(){Q.lFrame.elementDepthCount++}(),l&&(Zp(s,i,u),Jp(s,u,i)),null!==r&&eg(i,u),At}function We(){let t=pt();Hf()?function qf(){Q.lFrame.isParent=!1}():(t=t.parent,qn(t,!1));const e=t;!function uB(){Q.lFrame.elementDepthCount--}();const n=se();return n.firstCreatePass&&(Kc(n,t),Bf(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function CB(t){return 0!=(8&t.flags)}(e)&&dg(n,e,E(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function SB(t){return 0!=(16&t.flags)}(e)&&dg(n,e,E(),e.stylesWithoutHost,!1),We}function Qr(t,e,n,r){return At(t,e,n,r),We(),Qr}function Tl(t){return!!t&&"function"==typeof t.then}const XC=function YC(t){return!!t&&"function"==typeof t.subscribe};function Xt(t,e,n,r){const i=E(),s=se(),o=pt();return function ZC(t,e,n,r,i,s,o){const a=qc(r),c=t.firstCreatePass&&xC(t),l=e[Le],d=AC(e);let h=!0;if(3&r.type||o){const g=cn(r,e),y=o?o(g):g,I=d.length,b=o?k=>o(ft(k[r.index])):r.index;let v=null;if(!o&&a&&(v=function d$(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[xs],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==v)(v.__ngLastListenerFn__||v).__ngNextListenerFn__=s,v.__ngLastListenerFn__=s,h=!1;else{s=tS(r,e,l,s,!1);const k=n.listen(y,i,s);d.push(s,k),c&&c.push(i,b,I,I+1)}}else s=tS(r,e,l,s,!1);const f=r.outputs;let p;if(h&&null!==f&&(p=f[i])){const g=p.length;if(g)for(let y=0;y<g;y+=2){const L=e[p[y]][p[y+1]].subscribe(s),B=d.length;d.push(s,L),c&&c.push(i,r.index,B,-(B+1))}}}(s,i,i[ee],o,t,e,r),Xt}function eS(t,e,n,r){try{return In(6,e,n),!1!==n(r)}catch(i){return NC(t,i),!1}finally{In(7,e,n)}}function tS(t,e,n,r,i){return function s(o){if(o===Function)return r;og(t.componentOffset>-1?ln(t.index,e):e);let u=eS(e,n,r,o),c=s.__ngNextListenerFn__;for(;c;)u=eS(e,n,c,o)&&u,c=c.__ngNextListenerFn__;return i&&!1===u&&(o.preventDefault(),o.returnValue=!1),u}}function pg(t=1){return function mB(t){return(Q.lFrame.contextLView=function yB(t,e){for(;t>0;)e=e[Ms],t--;return e}(t,Q.lFrame.contextLView))[Le]}(t)}function gg(t,e,n){return mg(t,"",e,"",n),gg}function mg(t,e,n,r,i){const s=E(),o=Zs(s,e,n,r);return o!==Y&&fn(se(),xe(),s,t,o,s[ee],i,!1),mg}function Cl(t,e){return t<<17|e<<2}function Yr(t){return t>>17&32767}function yg(t){return 2|t}function Pi(t){return(131068&t)>>2}function _g(t,e){return-131069&t|e<<2}function vg(t){return 1|t}function lS(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?Yr(s):Pi(s),u=!1;for(;0!==a&&(!1===u||o);){const l=t[a+1];w$(t[a],e)&&(u=!0,t[a+1]=r?vg(l):yg(l)),a=r?Yr(l):Pi(l)}u&&(t[n+1]=r?yg(s):vg(s))}function w$(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&js(t,e)>=0}function Sl(t,e){return function Pn(t,e,n,r){const i=E(),s=se(),o=function mr(t){const e=Q.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2);s.firstUpdatePass&&function vS(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[Lt()],o=function _S(t,e){return e>=t.expandoStartIndex}(t,n);(function DS(t,e){return 0!=(t.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function x$(t,e,n,r){const i=function Wf(t){const e=Q.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Ba(n=wg(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=wg(i,t,e,n,r),null===s){let u=function M$(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Pi(r))return t[Yr(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=wg(null,t,e,u[1],r),u=Ba(u,e.attrs,r),function N$(t,e,n,r){t[Yr(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else s=function k$(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Ba(r,t[s].hostAttrs,n);return Ba(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function _$(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Yr(o),u=Pi(o);t[r]=n;let l,c=!1;if(Array.isArray(n)?(l=n[1],(null===l||js(n,l)>0)&&(c=!0)):l=n,i)if(0!==u){const h=Yr(t[a+1]);t[r+1]=Cl(h,a),0!==h&&(t[h+1]=_g(t[h+1],r)),t[a+1]=function m$(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=Cl(a,0),0!==a&&(t[a+1]=_g(t[a+1],r)),a=r;else t[r+1]=Cl(u,0),0===a?a=r:t[u+1]=_g(t[u+1],r),u=r;c&&(t[r+1]=yg(t[r+1])),lS(t,l,r,!0),lS(t,l,r,!1),function v$(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&js(s,e)>=0&&(n[r+1]=vg(n[r+1]))}(e,l,t,r,s),o=Cl(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}(s,t,o,r),e!==Y&&St(i,o,e)&&function IS(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,c=u[a+1],l=function y$(t){return 1==(1&t)}(c)?ES(u,e,n,i,Pi(c),o):void 0;Al(l)||(Al(s)||function g$(t){return 2==(2&t)}(c)&&(s=ES(u,null,n,i,a,o)),function R2(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=-1===r.indexOf("-")?void 0:Qt.DashCase;null==i?t.removeStyle(n,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Qt.Important),t.setStyle(n,r,i,s))}}(r,o,zc(Lt(),n),i,s))}(s,s.data[Lt()],i,i[ee],t,i[o+1]=function O$(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=_e(function Wr(t){return t instanceof N0?t.changingThisBreaksApplicationSecurity:t}(t)))),t}(e,n),r,o)}(t,e,null,!0),Sl}function wg(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=Ba(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Ba(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),dn(t,o,!!n||e[++s]))}return void 0===t?null:t}function ES(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const u=t[i],c=Array.isArray(u),l=c?u[1]:u,d=null===l;let h=n[i+1];h===Y&&(h=d?ce:void 0);let f=d?up(h,r):l===r?h:void 0;if(c&&!Al(f)&&(f=up(u,r)),Al(f)&&(a=f,o))return a;const p=t[i+1];i=o?Yr(p):Pi(p)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=up(u,r))}return a}function Al(t){return void 0!==t}function Jn(t,e=""){const n=E(),r=se(),i=t+Ee,s=r.firstCreatePass?Xs(r,i,1,e,null):r.data[i],o=n[i]=function Ip(t,e){return t.createText(e)}(n[ee],e);ul(r,n,o,s),qn(s,!1)}function Ua(t){return uo("",t,""),Ua}function uo(t,e,n){const r=E(),i=Zs(r,t,e,n);return i!==Y&&function vr(t,e,n){const r=zc(e,t);!function h0(t,e,n){t.setValue(e,n)}(t[ee],r,n)}(r,Lt(),i),uo}const lo="en-US";let qS=lo;function Dg(t,e,n,r,i){if(t=j(t),Array.isArray(t))for(let s=0;s<t.length;s++)Dg(t[s],e,n,r,i);else{const s=se(),o=E();let a=Ni(t)?t:j(t.provide),u=Q0(t);const c=pt(),l=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(Ni(t)||!t.multi){const f=new Ia(u,i,C),p=Tg(a,e,i?l:l+h,d);-1===p?(rp(el(c,o),s,a),bg(s,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(f),o.push(f)):(n[p]=f,o[p]=f)}else{const f=Tg(a,e,l+h,d),p=Tg(a,e,l,l+h),y=p>=0&&n[p];if(i&&!y||!i&&!(f>=0&&n[f])){rp(el(c,o),s,a);const I=function ZG(t,e,n,r,i){const s=new Ia(t,n,C);return s.multi=[],s.index=e,s.componentProviders=0,mA(s,i,r&&!n),s}(i?JG:XG,n.length,i,r,u);!i&&y&&(n[p].providerFactory=I),bg(s,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(I),o.push(I)}else bg(s,t,f>-1?f:p,mA(n[i?p:f],u,!i&&r));!i&&r&&y&&n[p].componentProviders++}}}function bg(t,e,n,r){const i=Ni(e),s=function lU(t){return!!t.useClass}(e);if(i||s){const u=(s?j(e.useClass):e).prototype.ngOnDestroy;if(u){const c=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const l=c.indexOf(n);-1===l?c.push(n,[r,u]):c[l+1].push(r,u)}else c.push(n,u)}}}function mA(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Tg(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function XG(t,e,n,r){return Cg(this.multi,[])}function JG(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Ai(n,n[R],this.providerFactory.index,r);s=a.slice(0,o),Cg(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],Cg(i,s);return s}function Cg(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Ce(t,e=[]){return n=>{n.providersResolver=(r,i)=>function YG(t,e,n){const r=se();if(r.firstCreatePass){const i=Nn(t);Dg(n,r.data,r.blueprint,i,!0),Dg(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}class ho{}class eH{}class yA extends ho{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kC(this);const r=function an(t,e){const n=t[Zb]||null;if(!n&&!0===e)throw new Error(`Type ${_e(t)} does not have '\u0275mod' property.`);return n}(e);this._bootstrapComponents=function _r(t){return t instanceof Function?t():t}(r.bootstrap),this._r3Injector=dC(e,n,[{provide:ho,useValue:this},{provide:gl,useValue:this.componentFactoryResolver}],_e(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Sg extends eH{constructor(e){super(),this.moduleType=e}create(e){return new yA(this.moduleType,e)}}function xg(t,e,n){const r=function Ft(){const t=Q.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}()+t,i=E();return i[r]===Y?function Qn(t,e,n){return t[e]=n}(i,r,n?e.call(n):e()):function Va(t,e){return t[e]}(i,r)}function Mg(t){return e=>{setTimeout(t,void 0,e)}}const xt=class xH extends Df{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=Mg(s),i&&(i=Mg(i)),o&&(o=Mg(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof Sn&&e.add(a),a}};let Ir=(()=>{class t{}return t.__NG_ELEMENT_ID__=RH,t})();const NH=Ir,kH=class extends NH{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(e,n){const r=this._declarationTContainer.tView,i=yl(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,n||null);i[ya]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[Hn];return null!==o&&(i[Hn]=o.createEmbeddedView(r)),Xp(r,i,e),new Fa(i)}};function RH(){return function Rl(t,e){return 4&t.type?new kH(e,t,Ws(t,e)):null}(pt(),E())}let Zn=(()=>{class t{}return t.__NG_ELEMENT_ID__=PH,t})();function PH(){return function kA(t,e){let n;const r=e[t.index];if(Mn(r))n=r;else{let i;if(8&t.type)i=ft(r);else{const s=e[ee];i=s.createComment("");const o=cn(t,e);Mi(s,al(s,o),i,function M2(t,e){return t.nextSibling(e)}(s,o),!1)}e[t.index]=n=SC(r,e,i,t),vl(e,n)}return new MA(n,t,e)}(pt(),E())}const OH=Zn,MA=class extends OH{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Ws(this._hostTNode,this._hostLView)}get injector(){return new Fs(this._hostTNode,this._hostLView)}get parentInjector(){const e=np(this._hostTNode,this._hostLView);if(NT(e)){const n=Jc(e,this._hostLView),r=Xc(e);return new Fs(n[R].data[r+8],n)}return new Fs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=NA(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-Ot}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const o=e.createEmbeddedView(n||{},s);return this.insert(o,i),o}createComponent(e,n,r,i,s){const o=e&&!function ba(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const d=n||{};a=d.index,r=d.injector,i=d.projectableNodes,s=d.environmentInjector||d.ngModuleRef}const u=o?e:new La(he(e)),c=r||this.parentInjector;if(!s&&null==u.ngModule){const h=(o?c:this.parentInjector).get(qs,null);h&&(s=h)}const l=u.create(c,i,void 0,s);return this.insert(l.hostView,a),l}insert(e,n){const r=e._lView,i=r[R];if(function sB(t){return Mn(t[ke])}(r)){const l=this.indexOf(e);if(-1!==l)this.detach(l);else{const d=r[ke],h=new MA(d,d[Dt],d[ke]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(n),o=this._lContainer;!function T2(t,e,n,r){const i=Ot+r,s=n.length;r>0&&(n[i-1][xn]=e),r<s-Ot?(e[xn]=n[i],GT(n,Ot+r,e)):(n.push(e),e[xn]=null),e[ke]=n;const o=e[ya];null!==o&&n!==o&&function C2(t,e){const n=t[ks];e[bt]!==e[ke][ke][bt]&&(t[sT]=!0),null===n?t[ks]=[e]:n.push(e)}(o,e);const a=e[Hn];null!==a&&a.insertView(t),e[J]|=64}(i,r,o,s);const a=Cp(s,o),u=r[ee],c=al(u,o[Gc]);return null!==c&&function E2(t,e,n,r,i,s){r[fr]=i,r[Dt]=e,Ma(t,r,n,1,i,s)}(i,o[Dt],u,r,c,a),e.attachToViewContainerRef(),GT(kg(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=NA(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Dp(this._lContainer,n);r&&(nl(kg(this._lContainer),n),p0(r[R],r))}detach(e){const n=this._adjustIndex(e,-1),r=Dp(this._lContainer,n);return r&&null!=nl(kg(this._lContainer),n)?new Fa(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function NA(t){return t[Hc]}function kg(t){return t[Hc]||(t[Hc]=[])}function Ol(...t){}const nx=new $("Application Initializer");let Fl=(()=>{class t{constructor(n){this.appInits=n,this.resolve=Ol,this.reject=Ol,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(Tl(s))n.push(s);else if(XC(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(ie(nx,8))},t.\u0275prov=ge({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Qa=new $("AppId",{providedIn:"root",factory:function rx(){return`${$g()}${$g()}${$g()}`}});function $g(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ix=new $("Platform Initializer"),Ll=new $("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Er=new $("LocaleId",{providedIn:"root",factory:()=>function Jb(t,e=H.Default){return ie(t,Bc(e))}(Er,H.Optional|H.SkipSelf)||function hq(){return typeof $localize<"u"&&$localize.locale||lo}()}),yq=(()=>Promise.resolve(0))();function Gg(t){typeof Zone>"u"?yq.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class et{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new xt(!1),this.onMicrotaskEmpty=new xt(!1),this.onStable=new xt(!1),this.onError=new xt(!1),typeof Zone>"u")throw new M(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function _q(){let t=Ie.requestAnimationFrame,e=Ie.cancelAnimationFrame;if(typeof Zone<"u"&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function Iq(t){const e=()=>{!function wq(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Ie,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,qg(t),t.isCheckStableRunning=!0,Hg(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),qg(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return ax(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),ux(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return ax(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),ux(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,qg(t),Hg(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!et.isInAngularZone())throw new M(909,!1)}static assertNotInAngularZone(){if(et.isInAngularZone())throw new M(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,vq,Ol,Ol);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const vq={};function Hg(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function qg(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function ax(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ux(t){t._nesting--,Hg(t)}class Eq{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new xt,this.onMicrotaskEmpty=new xt,this.onStable=new xt,this.onError=new xt}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const cx=new $(""),Vl=new $("");let Kg,zg=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Kg||(function Dq(t){Kg=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{et.assertNotInAngularZone(),Gg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Gg(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}}return t.\u0275fac=function(n){return new(n||t)(ie(et),ie(Wg),ie(Vl))},t.\u0275prov=ge({token:t,factory:t.\u0275fac}),t})(),Wg=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Kg?.findTestabilityInTree(this,n,r)??null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=ge({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const Dr=!1;let Xr=null;const lx=new $("AllowMultipleToken"),Qg=new $("PlatformDestroyListeners"),bq=new $("appBootstrapListener");function hx(t,e,n=[]){const r=`Platform: ${e}`,i=new $(r);return(s=[])=>{let o=Yg();if(!o||o.injector.get(lx,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function Sq(t){if(Xr&&!Xr.get(lx,!1))throw new M(400,!1);Xr=t;const e=t.get(px);(function dx(t){const e=t.get(ix,null);e&&e.forEach(n=>n())})(t)}(function fx(t=[],e){return Wn.create({name:e,providers:[{provide:Bp,useValue:"platform"},{provide:Qg,useValue:new Set([()=>Xr=null])},...t]})}(a,r))}return function xq(t){const e=Yg();if(!e)throw new M(401,!1);return e}()}}function Yg(){return Xr?.get(px)??null}let px=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function mx(t,e){let n;return n="noop"===t?new Eq:("zone.js"===t?void 0:t)||new et(e),n}(r?.ngZone,function gx(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!t||!t.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!t||!t.ngZoneRunCoalescing)||!1}}(r)),s=[{provide:et,useValue:i}];return i.run(()=>{const o=Wn.create({providers:s,parent:this.injector,name:n.moduleType.name}),a=n.create(o),u=a.injector.get(Ks,null);if(!u)throw new M(402,!1);return i.runOutsideAngular(()=>{const c=i.onError.subscribe({next:l=>{u.handleError(l)}});a.onDestroy(()=>{Bl(this._modules,a),c.unsubscribe()})}),function yx(t,e,n){try{const r=n();return Tl(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(u,i,()=>{const c=a.injector.get(Fl);return c.runInitializers(),c.donePromise.then(()=>(function zS(t){vn(t,"Expected localeId to be defined"),"string"==typeof t&&(qS=t.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Er,lo)||lo),this._moduleDoBootstrap(a),a))})})}bootstrapModule(n,r=[]){const i=_x({},r);return function Tq(t,e,n){const r=new Sg(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(Xg);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new M(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new M(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(Qg,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(ie(Wn))},t.\u0275prov=ge({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function _x(t,e){return Array.isArray(e)?e.reduce(_x,t):{...t,...e}}let Xg=(()=>{class t{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(n,r,i){this._zone=n,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new ot(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new ot(a=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{et.assertNotInAngularZone(),Gg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{et.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{u.unsubscribe(),c.unsubscribe()}});this.isStable=CV(s,o.pipe(function SV(t={}){const{connector:e=(()=>new Df),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,u,c=0,l=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=u=void 0,l=d=!1},p=()=>{const g=o;f(),g?.unsubscribe()};return Cs((g,y)=>{c++,!d&&!l&&h();const I=u=u??e();y.add(()=>{c--,0===c&&!d&&!l&&(a=Cf(p,i))}),I.subscribe(y),!o&&c>0&&(o=new ua({next:b=>I.next(b),error:b=>{d=!0,h(),a=Cf(f,n,b),I.error(b)},complete:()=>{l=!0,h(),a=Cf(f,r),I.complete()}}),lr(g).subscribe(o))})(s)}}()))}bootstrap(n,r){const i=n instanceof Y0;if(!this._injector.get(Fl).done){!i&&function ga(t){const e=he(t)||Et(t)||Pt(t);return null!==e&&e.standalone}(n);throw new M(405,Dr)}let o;o=i?n:this._injector.get(gl).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function Cq(t){return t.isBoundToModule}(o)?void 0:this._injector.get(ho),c=o.create(Wn.NULL,[],r||o.selector,a),l=c.location.nativeElement,d=c.injector.get(cx,null);return d?.registerApplication(l),c.onDestroy(()=>{this.detachView(c.hostView),Bl(this.components,c),d?.unregisterApplication(l)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new M(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Bl(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(bq,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Bl(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new M(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(n){return new(n||t)(ie(et),ie(qs),ie(Ks))},t.\u0275prov=ge({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Bl(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class bx{constructor(){}supports(e){return Dl(e)}create(e){return new Vq(e)}}const Lq=(t,e)=>e;class Vq{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Lq}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<Cx(r,i,s)?n:r,a=Cx(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,l=u-i;if(c!=l){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;l<=p&&p<c&&(s[h]=f+1)}s[o.previousIndex]=l-c}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!Dl(e))throw new M(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function r$(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Bq(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new Tx),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Tx),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Bq{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Uq{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class Tx{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new Uq,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Cx(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function Ax(){return new $l([new bx])}let $l=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||Ax()),deps:[[t,new il,new Kt]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new M(901,!1)}}return t.\u0275prov=ge({token:t,providedIn:"root",factory:Ax}),t})();const qq=hx(null,"core",[]);let zq=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(ie(Xg))},t.\u0275mod=Gn({type:t}),t.\u0275inj=An({}),t})(),rm=null;function go(){return rm}class Qq{}const br=new $("DocumentToken");class Lz{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $x=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Lz(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),Gx(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{Gx(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)(C(Zn),C(Ir),C($l))},t.\u0275dir=K({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),t})();function Gx(t,e){t.context.$implicit=e.item}let dW=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Gn({type:t}),t.\u0275inj=An({}),t})();class GW extends Qq{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class wm extends GW{static makeCurrent(){!function Kq(t){rm||(rm=t)}(new wm)}onAndCancel(e,n,r){return e.addEventListener(n,r,!1),()=>{e.removeEventListener(n,r,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function HW(){return eu=eu||document.querySelector("base"),eu?eu.getAttribute("href"):null}();return null==n?null:function qW(t){ed=ed||document.createElement("a"),ed.setAttribute("href",t);const e=ed.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){eu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Pz(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let ed,eu=null;const Zx=new $("TRANSITION_ID"),WW=[{provide:nx,useFactory:function zW(t,e,n){return()=>{n.get(Fl).donePromise.then(()=>{const r=go(),i=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[Zx,br,Wn],multi:!0}];let QW=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=ge({token:t,factory:t.\u0275fac}),t})();const td=new $("EventManagerPlugins");let nd=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(n))return this._eventNameToPlugin.set(n,o),o}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(ie(td),ie(et))},t.\u0275prov=ge({token:t,factory:t.\u0275fac}),t})();class eM{constructor(e){this._doc=e}addGlobalEventListener(e,n,r){const i=go().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let tM=(()=>{class t{constructor(){this.usageCount=new Map}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(n){}onStyleAdded(n){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(n,r){const i=this.usageCount;let s=i.get(n)??0;return s+=r,s>0?i.set(n,s):i.delete(n),s}ngOnDestroy(){for(const n of this.getAllStyles())this.onStyleRemoved(n);this.usageCount.clear()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=ge({token:t,factory:t.\u0275fac}),t})(),tu=(()=>{class t extends tM{constructor(n){super(),this.doc=n,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.forEach(s=>s.remove()),r.delete(n)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}addStyleToHost(n,r){const i=this.doc.createElement("style");i.textContent=r,n.appendChild(i);const s=this.styleRef.get(r);s?s.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}}return t.\u0275fac=function(n){return new(n||t)(ie(br))},t.\u0275prov=ge({token:t,factory:t.\u0275fac}),t})();const Im={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Em=/%COMP%/g,iM=new $("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function sM(t,e){return e.flat(100).map(n=>n.replace(Em,t))}function oM(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Dm=(()=>{class t{constructor(n,r,i,s){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new bm(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(n,r);return i instanceof cM?i.applyToHost(n):i instanceof Tm&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.eventManager,a=this.sharedStylesHost,u=this.removeStylesOnCompDestory;switch(r.encapsulation){case $n.Emulated:s=new cM(o,a,r,this.appId,u);break;case $n.ShadowDom:return new n3(o,a,n,r);default:s=new Tm(o,a,r,u)}s.onDestroy=()=>i.delete(r.id),i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(ie(nd),ie(tu),ie(Qa),ie(iM))},t.\u0275prov=ge({token:t,factory:t.\u0275fac}),t})();class bm{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?document.createElementNS(Im[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){(uM(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(uM(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=Im[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=Im[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Qt.DashCase|Qt.Important)?e.style.setProperty(n,r,i&Qt.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Qt.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,oM(r)):this.eventManager.addEventListener(e,n,oM(r))}}function uM(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class n3 extends bm{constructor(e,n,r,i){super(e),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=sM(i.id,i.styles);for(const o of s){const a=document.createElement("style");a.textContent=o,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Tm extends bm{constructor(e,n,r,i,s=r.id){super(e),this.sharedStylesHost=n,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=sM(s,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class cM extends Tm{constructor(e,n,r,i,s){const o=i+"-"+r.id;super(e,n,r,s,o),this.contentAttr=function ZW(t){return"_ngcontent-%COMP%".replace(Em,t)}(o),this.hostAttr=function e3(t){return"_nghost-%COMP%".replace(Em,t)}(o)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let r3=(()=>{class t extends eM{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return t.\u0275fac=function(n){return new(n||t)(ie(br))},t.\u0275prov=ge({token:t,factory:t.\u0275fac}),t})();const lM=["alt","control","meta","shift"],i3={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},s3={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let o3=(()=>{class t extends eM{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>go().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),lM.forEach(c=>{const l=r.indexOf(c);l>-1&&(r.splice(l,1),o+=c+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=i3[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),lM.forEach(o=>{o!==i&&(0,s3[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return t.\u0275fac=function(n){return new(n||t)(ie(br))},t.\u0275prov=ge({token:t,factory:t.\u0275fac}),t})();const hM=[{provide:Ll,useValue:"browser"},{provide:ix,useValue:function a3(){wm.makeCurrent()},multi:!0},{provide:br,useFactory:function c3(){return function V2(t){Mp=t}(document),document},deps:[]}],l3=hx(qq,"browser",hM),fM=new $(""),pM=[{provide:Vl,useClass:class KW{addToWindow(e){Ie.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},Ie.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ie.getAllAngularRootElements=()=>e.getAllRootElements(),Ie.frameworkStabilizers||(Ie.frameworkStabilizers=[]),Ie.frameworkStabilizers.push(r=>{const i=Ie.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(function(u){u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?go().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:cx,useClass:zg,deps:[et,Wg,Vl]},{provide:zg,useClass:zg,deps:[et,Wg,Vl]}],gM=[{provide:Bp,useValue:"root"},{provide:Ks,useFactory:function u3(){return new Ks},deps:[]},{provide:td,useClass:r3,multi:!0,deps:[br,et,Ll]},{provide:td,useClass:o3,multi:!0,deps:[br]},{provide:Dm,useClass:Dm,deps:[nd,tu,Qa,iM]},{provide:J0,useExisting:Dm},{provide:tM,useExisting:tu},{provide:tu,useClass:tu,deps:[br]},{provide:nd,useClass:nd,deps:[td,et]},{provide:class mW{},useClass:QW,deps:[]},[]];let d3=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:Qa,useValue:n.appId},{provide:Zx,useExisting:Qa},WW]}}}return t.\u0275fac=function(n){return new(n||t)(ie(fM,12))},t.\u0275mod=Gn({type:t}),t.\u0275inj=An({providers:[...gM,...pM],imports:[dW,zq]}),t})();typeof window<"u"&&window;const{isArray:v3}=Array,{getPrototypeOf:w3,prototype:I3,keys:E3}=Object;const{isArray:T3}=Array;function A3(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function x3(...t){const e=function yV(t){return Te(Tf(t))?t.pop():void 0}(t),{args:n,keys:r}=function D3(t){if(1===t.length){const e=t[0];if(v3(e))return{args:e,keys:null};if(function b3(t){return t&&"object"==typeof t&&w3(t)===I3}(e)){const n=E3(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}(t),i=new ot(s=>{const{length:o}=n;if(!o)return void s.complete();const a=new Array(o);let u=o,c=o;for(let l=0;l<o;l++){let d=!1;lr(n[l]).subscribe(Ss(s,h=>{d||(d=!0,c--),a[l]=h},()=>u--,void 0,()=>{(!u||!d)&&(c||s.next(r?A3(r,a):a),s.complete())}))}});return e?i.pipe(function S3(t){return ca(e=>function C3(t,e){return T3(e)?t(...e):t(e)}(t,e))}(e)):i}let _M=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}}return t.\u0275fac=function(n){return new(n||t)(C(ki),C(kn))},t.\u0275dir=K({type:t}),t})(),Li=(()=>{class t extends _M{}return t.\u0275fac=function(){let e;return function(r){return(e||(e=function Tt(t){return qr(()=>{const e=t.prototype.constructor,n=e[hr]||ip(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const s=i[hr]||ip(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}(t)))(r||t)}}(),t.\u0275dir=K({type:t,features:[fe]}),t})();const er=new $("NgValueAccessor"),N3={provide:er,useExisting:ve(()=>rd),multi:!0},R3=new $("CompositionEventMode");let rd=(()=>{class t extends _M{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function k3(){const t=go()?go().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}}return t.\u0275fac=function(n){return new(n||t)(C(ki),C(kn),C(R3,8))},t.\u0275dir=K({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){1&n&&Xt("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[Ce([N3]),fe]}),t})();const P3=!1;function Zr(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}function wM(t){return null!=t&&"number"==typeof t.length}const Mt=new $("NgValidators"),ei=new $("NgAsyncValidators"),O3=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class IM{static min(e){return function EM(t){return e=>{if(Zr(e.value)||Zr(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(e)}static max(e){return function DM(t){return e=>{if(Zr(e.value)||Zr(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(e)}static required(e){return function bM(t){return Zr(t.value)?{required:!0}:null}(e)}static requiredTrue(e){return function TM(t){return!0===t.value?null:{required:!0}}(e)}static email(e){return function CM(t){return Zr(t.value)||O3.test(t.value)?null:{email:!0}}(e)}static minLength(e){return function SM(t){return e=>Zr(e.value)||!wM(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function AM(t){return e=>wM(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(e)}static pattern(e){return function xM(t){if(!t)return id;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(Zr(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return OM(e)}static composeAsync(e){return FM(e)}}function id(t){return null}function MM(t){return null!=t}function NM(t){const e=Tl(t)?Hb(t):t;if(P3&&!XC(e)){let n="Expected async validator to return Promise or Observable.";throw"object"==typeof t&&(n+=" Are you using a synchronous validator where an async validator is expected?"),new M(-1101,n)}return e}function kM(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function RM(t,e){return e.map(n=>n(t))}function PM(t){return t.map(e=>function F3(t){return!t.validate}(e)?e:n=>e.validate(n))}function OM(t){if(!t)return null;const e=t.filter(MM);return 0==e.length?null:function(n){return kM(RM(n,e))}}function Am(t){return null!=t?OM(PM(t)):null}function FM(t){if(!t)return null;const e=t.filter(MM);return 0==e.length?null:function(n){return x3(RM(n,e).map(NM)).pipe(ca(kM))}}function xm(t){return null!=t?FM(PM(t)):null}function LM(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function VM(t){return t._rawValidators}function BM(t){return t._rawAsyncValidators}function Mm(t){return t?Array.isArray(t)?t:[t]:[]}function sd(t,e){return Array.isArray(t)?t.includes(e):t===e}function UM(t,e){const n=Mm(e);return Mm(t).forEach(i=>{sd(n,i)||n.push(i)}),n}function jM(t,e){return Mm(e).filter(n=>!sd(t,n))}class $M{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Am(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=xm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class Ut extends $M{get formDirective(){return null}get path(){return null}}class ti extends $M{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class GM{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let HM=(()=>{class t extends GM{constructor(n){super(n)}}return t.\u0275fac=function(n){return new(n||t)(C(ti,2))},t.\u0275dir=K({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){2&n&&Sl("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[fe]}),t})(),Nm=(()=>{class t extends GM{constructor(n){super(n)}}return t.\u0275fac=function(n){return new(n||t)(C(Ut,10))},t.\u0275dir=K({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,r){2&n&&Sl("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[fe]}),t})();function qM(t,e){return t?`with name: '${e}'`:`at index: ${e}`}const Pm=!1,nu="VALID",ad="INVALID",mo="PENDING",ru="DISABLED";function Om(t){return(ud(t)?t.validators:t)||null}function Fm(t,e){return(ud(e)?e.asyncValidators:t)||null}function ud(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}function zM(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new M(1e3,Pm?function U3(t){return`\n    There are no form controls registered with this ${t?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[n])throw new M(1001,Pm?function j3(t,e){return`Cannot find form control ${qM(t,e)}`}(e,n):"")}function WM(t,e,n){t._forEachChild((r,i)=>{if(void 0===n[i])throw new M(1002,Pm?function $3(t,e){return`Must supply a value for form control ${qM(t,e)}`}(e,i):"")})}class cd{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===nu}get invalid(){return this.status===ad}get pending(){return this.status==mo}get disabled(){return this.status===ru}get enabled(){return this.status!==ru}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(UM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(UM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(jM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(jM(e,this._rawAsyncValidators))}hasValidator(e){return sd(this._rawValidators,e)}hasAsyncValidator(e){return sd(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=mo,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=ru,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=nu,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===nu||this.status===mo)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ru:nu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=mo,this._hasOwnPendingAsyncValidator=!0;const n=NM(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new xt,this.statusChanges=new xt}_calculateStatus(){return this._allControlsDisabled()?ru:this.errors?ad:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(mo)?mo:this._anyControlsHaveStatus(ad)?ad:nu}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ud(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function G3(t){return Array.isArray(t)?Am(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function H3(t){return Array.isArray(t)?xm(t):t||null}(this._rawAsyncValidators)}}class iu extends cd{constructor(e,n,r){super(Om(n),Fm(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){WM(this,!0,e),Object.keys(e).forEach(r=>{zM(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class KM extends iu{}const yo=new $("CallSetDisabledState",{providedIn:"root",factory:()=>ld}),ld="always";function su(t,e,n=ld){Lm(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function z3(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&QM(t,e)})}(t,e),function K3(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function W3(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&QM(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function q3(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function hd(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),pd(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function fd(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function Lm(t,e){const n=VM(t);null!==e.validator?t.setValidators(LM(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=BM(t);null!==e.asyncValidator?t.setAsyncValidators(LM(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();fd(e._rawValidators,i),fd(e._rawAsyncValidators,i)}function pd(t,e){let n=!1;if(null!==t){if(null!==e.validator){const i=VM(t);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(n=!0,t.setValidators(s))}}if(null!==e.asyncValidator){const i=BM(t);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(n=!0,t.setAsyncValidators(s))}}}const r=()=>{};return fd(e._rawValidators,r),fd(e._rawAsyncValidators,r),n}function QM(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function JM(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function ZM(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const au=class extends cd{constructor(e=null,n,r){super(Om(n),Fm(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ud(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=ZM(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){JM(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){JM(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){ZM(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let $m=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=K({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),sN=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Gn({type:t}),t.\u0275inj=An({}),t})();const Gm=new $("NgModelWithFormControlWarning"),u4={provide:Ut,useExisting:ve(()=>uu)};let uu=(()=>{class t extends Ut{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new xt,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(pd(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){const r=this.form.get(n.path);return su(r,n,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){hd(n.control||null,n,!1),function J3(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,r){this.form.get(n.path).setValue(r)}onSubmit(n){return this.submitted=!0,function XM(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n){this.form.reset(n),this.submitted=!1}_updateDomValue(){this.directives.forEach(n=>{const r=n.control,i=this.form.get(n.path);r!==i&&(hd(r||null,n),(t=>t instanceof au)(i)&&(su(i,n,this.callSetDisabledState),n.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){const r=this.form.get(n.path);(function YM(t,e){Lm(t,e)})(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){const r=this.form.get(n.path);r&&function Q3(t,e){return pd(t,e)}(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Lm(this.form,this),this._oldForm&&pd(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(n){return new(n||t)(C(Mt,10),C(ei,10),C(yo,8))},t.\u0275dir=K({type:t,selectors:[["","formGroup",""]],hostBindings:function(n,r){1&n&&Xt("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ce([u4]),fe,pr]}),t})();const d4={provide:ti,useExisting:ve(()=>zm)};let zm=(()=>{class t extends ti{set isDisabled(n){}constructor(n,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new xt,this._ngModelWarningSent=!1,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Um(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===rd?n=s:function X3(t){return Object.getPrototypeOf(t.constructor)===Li}(s)?r=s:i=s}),i||r||n||null}(0,s)}ngOnChanges(n){this._added||this._setUpControl(),function Bm(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return function dd(t,e){return[...e.path,t]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return t._ngModelWarningSentOnce=!1,t.\u0275fac=function(n){return new(n||t)(C(Ut,13),C(Mt,10),C(ei,10),C(er,10),C(Gm,8))},t.\u0275dir=K({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Ce([d4]),fe,pr]}),t})(),C4=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Gn({type:t}),t.\u0275inj=An({imports:[sN]}),t})();class IN extends cd{constructor(e,n,r){super(Om(n),Fm(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){WM(this,!1,e),e.forEach((r,i)=>{zM(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>!!r._syncPendingControls()||n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function EN(t){return!!t&&(void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn)}let S4=(()=>{class t{constructor(){this.useNonNullable=!1}get nonNullable(){const n=new t;return n.useNonNullable=!0,n}group(n,r=null){const i=this._reduceControls(n);let s={};return EN(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new iu(i,s)}record(n,r=null){const i=this._reduceControls(n);return new KM(i,r)}control(n,r,i){let s={};return this.useNonNullable?(EN(r)?s=r:(s.validators=r,s.asyncValidators=i),new au(n,{...s,nonNullable:!0})):new au(n,r,i)}array(n,r,i){const s=n.map(o=>this._createControl(o));return new IN(s,r,i)}_reduceControls(n){const r={};return Object.keys(n).forEach(i=>{r[i]=this._createControl(n[i])}),r}_createControl(n){return n instanceof au||n instanceof cd?n:Array.isArray(n)?this.control(n[0],n.length>1?n[1]:null,n.length>2?n[2]:null):this.control(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=ge({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),A4=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Gm,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:yo,useValue:n.callSetDisabledState??ld}]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Gn({type:t}),t.\u0275inj=An({imports:[C4]}),t})();function DN(t,e,n,r,i,s,o){try{var a=t[s](o),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,i)}function m(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(u){DN(s,r,i,o,a,"next",u)}function a(u){DN(s,r,i,o,a,"throw",u)}o(void 0)})}}const bN=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},Xm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0;let h=(15&a)<<2|c>>6,f=63&c;u||(f=64,o||(h=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(bN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const u=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,null==s||null==a||null==c||null==d)throw new k4;r.push(s<<2|a>>4),64!==c&&(r.push(a<<4&240|c>>2),64!==d&&r.push(c<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class k4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gd=function(t){return function(t){const e=bN(t);return Xm.encodeByteArray(e,!0)}(t).replace(/\./g,"")},md=function(t){try{return Xm.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},yd=()=>{try{return function O4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&md(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},U4=t=>{const e=(t=>{var e,n;return null===(n=null===(e=yd())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]})(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]},j4=()=>{var t;return null===(t=yd())||void 0===t?void 0:t.config};class _d{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,r))}}}function pn(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Jm(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function Bi(){try{return"object"==typeof indexedDB}catch{return!1}}function cu(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(n){e(n)}})}function Zm(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Bn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Bn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tr.prototype.create)}}class tr{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function K4(t,e){return t.replace(Q4,(n,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new Bn(i,`${this.serviceName}: ${o} (${i}).`,r)}}const Q4=/\{\$([^}]+)}/g;function ey(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(SN(s)&&SN(o)){if(!ey(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function SN(t){return null!==t&&"object"==typeof t}function AN(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class X4{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(void 0===e&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function J4(t,e){if("object"!=typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:n,complete:r},void 0===i.next&&(i.next=ty),void 0===i.error&&(i.error=ty),void 0===i.complete&&(i.complete=ty);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ty(){}const Z4=1e3,e8=2,t8=144e5,n8=.5;function ry(t,e=Z4,n=e8){const r=e*Math.pow(n,t),i=Math.round(n8*r*(Math.random()-.5)*2);return Math.min(t8,r+i)}function jt(t){return t&&t._delegate?t._delegate:t}class Nt{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ui="[DEFAULT]";class i8{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new _d;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(n=e?.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function o8(t){return"EAGER"===t.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ui})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ui){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return m(function*(){const n=Array.from(e.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Ui){return this.instances.has(e)}getOptions(e=Ui){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(t=e,t===Ui?void 0:t),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var t;return r||null}normalizeInstanceIdentifier(e=Ui){return this.component?this.component.multipleInstances?e:Ui:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a8{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new i8(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const iy=[];var oe=(()=>{return(t=oe||(oe={}))[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",oe;var t})();const xN={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},u8=oe.INFO,c8={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},l8=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=c8[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class _o{constructor(e){this.name=e,this._logLevel=u8,this._logHandler=l8,this._userLogHandler=null,iy.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?xN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}}const d8=(t,e)=>e.some(n=>t instanceof n);let MN,NN;const kN=new WeakMap,sy=new WeakMap,RN=new WeakMap,oy=new WeakMap,ay=new WeakMap;let uy={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return sy.get(t);if("objectStoreNames"===e)return t.objectStoreNames||RN.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Cr(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function _8(t){return"function"==typeof t?function y8(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function f8(){return NN||(NN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(cy(this),e),Cr(kN.get(this))}:function(...e){return Cr(t.apply(cy(this),e))}:function(e,...n){const r=t.call(cy(this),e,...n);return RN.set(r,e.sort?e.sort():[e]),Cr(r)}}(t):(t instanceof IDBTransaction&&function g8(t){if(sy.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});sy.set(t,e)}(t),d8(t,function h8(){return MN||(MN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,uy):t)}function Cr(t){if(t instanceof IDBRequest)return function p8(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Cr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&kN.set(n,t)}).catch(()=>{}),ay.set(e,t),e}(t);if(oy.has(t))return oy.get(t);const e=_8(t);return e!==t&&(oy.set(t,e),ay.set(e,t)),e}const cy=t=>ay.get(t);function wd(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Cr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Cr(o.result),u.oldVersion,u.newVersion,Cr(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function ly(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",()=>e()),Cr(n).then(()=>{})}const v8=["get","getKey","getAll","getAllKeys","count"],w8=["put","add","delete","clear"],dy=new Map;function PN(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(dy.get(e))return dy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=w8.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!v8.includes(n))return;const s=function(){var o=m(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(u.shift())),(yield Promise.all([l[n](...u),i&&c.done]))[0]});return function(u){return o.apply(this,arguments)}}();return dy.set(e,s),s}!function m8(t){uy=t(uy)}(t=>({...t,get:(e,n,r)=>PN(e,n)||t.get(e,n,r),has:(e,n)=>!!PN(e,n)||t.has(e,n)}));class I8{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function E8(t){return"VERSION"===t.getComponent()?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const hy="@firebase/app",ji=new _o("@firebase/app"),Id="[DEFAULT]",K8={[hy]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},$i=new Map,Ed=new Map;function Q8(t,e){try{t.container.addComponent(e)}catch(n){ji.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function $t(t){const e=t.name;if(Ed.has(e))return ji.debug(`There were multiple attempts to register component ${e}.`),!1;Ed.set(e,t);for(const n of $i.values())Q8(n,t);return!0}function Dd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const Sr=new tr("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class X8{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Nt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sr.create("app-deleted",{appName:this._name})}}const bd="9.17.2";function FN(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:Id,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw Sr.create("bad-app-name",{appName:String(i)});if(n||(n=j4()),!n)throw Sr.create("no-options");const s=$i.get(i);if(s){if(ey(n,s.options)&&ey(r,s.config))return s;throw Sr.create("duplicate-app",{appName:i})}const o=new a8(i);for(const u of Ed.values())o.addComponent(u);const a=new X8(n,r,o);return $i.set(i,a),a}function LN(t=Id){const e=$i.get(t);if(!e&&t===Id)return FN();if(!e)throw Sr.create("no-app",{appName:t});return e}function VN(){return Array.from($i.values())}function Ue(t,e,n){var r;let i=null!==(r=K8[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void ji.warn(a.join(" "))}$t(new Nt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const J8="firebase-heartbeat-database",Z8=1,lu="firebase-heartbeat-store";let py=null;function BN(){return py||(py=wd(J8,Z8,{upgrade:(t,e)=>{0===e&&t.createObjectStore(lu)}}).catch(t=>{throw Sr.create("idb-open",{originalErrorMessage:t.message})})),py}function gy(){return(gy=m(function*(t){try{return(yield BN()).transaction(lu).objectStore(lu).get(jN(t))}catch(e){if(e instanceof Bn)ji.warn(e.message);else{const n=Sr.create("idb-get",{originalErrorMessage:e?.message});ji.warn(n.message)}}})).apply(this,arguments)}function UN(t,e){return my.apply(this,arguments)}function my(){return(my=m(function*(t,e){try{const r=(yield BN()).transaction(lu,"readwrite");return yield r.objectStore(lu).put(e,jN(t)),r.done}catch(n){if(n instanceof Bn)ji.warn(n.message);else{const r=Sr.create("idb-set",{originalErrorMessage:n?.message});ji.warn(r.message)}}})).apply(this,arguments)}function jN(t){return`${t.name}!${t.options.appId}`}class rK{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sK(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return m(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=$N();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return m(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const n=$N(),{heartbeatsToSend:r,unsentEntries:i}=function iK(t,e=1024){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),GN(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),GN(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=gd(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function $N(){return(new Date).toISOString().substring(0,10)}class sK{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(function*(){return!!Bi()&&cu().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return m(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function eK(t){return gy.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var n=this;return m(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return UN(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return m(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return UN(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function GN(t){return gd(JSON.stringify({version:2,heartbeats:t})).length}!function oK(t){$t(new Nt("platform-logger",e=>new I8(e),"PRIVATE")),$t(new Nt("heartbeat",e=>new rK(e),"PRIVATE")),Ue(hy,"0.9.4",t),Ue(hy,"0.9.4","esm2017"),Ue("fire-js","")}(""),Ue("firebase","9.17.2","app");const HN="@firebase/installations",yy="0.6.4",qN=1e4,zN=`w:${yy}`,WN="FIS_v2",cK="https://firebaseinstallations.googleapis.com/v1",lK=36e5,Ar=new tr("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function KN(t){return t instanceof Bn&&t.code.includes("request-failed")}function _y({projectId:t}){return`${cK}/projects/${t}/installations`}function QN(t){return{token:t.token,requestStatus:2,expiresIn:pK(t.expiresIn),creationTime:Date.now()}}function vy(t,e){return wy.apply(this,arguments)}function wy(){return(wy=m(function*(t,e){const r=(yield e.json()).error;return Ar.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function YN({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Iy(t){return Ey.apply(this,arguments)}function Ey(){return(Ey=m(function*(t){const e=yield t();return e.status>=500&&e.status<600?t():e})).apply(this,arguments)}function pK(t){return Number(t.replace("s","000"))}function Dy(){return(Dy=m(function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=_y(t),i=YN(t),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({fid:n,authVersion:WN,appId:t.appId,sdkVersion:zN})},u=yield Iy(()=>fetch(r,a));if(u.ok){const c=yield u.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:QN(c.authToken)}}throw yield vy("Create Installation",u)})).apply(this,arguments)}function JN(t){return new Promise(e=>{setTimeout(e,t)})}const _K=/^[cdef][\w-]{21}$/,by="";function vK(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=function wK(t){return function yK(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22)}(t);return _K.test(n)?n:by}catch{return by}}function vo(t){return`${t.appName}!${t.appId}`}const wo=new Map;function ZN(t,e){const n=vo(t);ek(n,e),function DK(t,e){const n=function tk(){return!Gi&&"BroadcastChannel"in self&&(Gi=new BroadcastChannel("[Firebase] FID Change"),Gi.onmessage=t=>{ek(t.data.key,t.data.fid)}),Gi}();n&&n.postMessage({key:t,fid:e}),function nk(){0===wo.size&&Gi&&(Gi.close(),Gi=null)}()}(n,e)}function ek(t,e){const n=wo.get(t);if(n)for(const r of n)r(e)}let Gi=null;const bK="firebase-installations-database",TK=1,Hi="firebase-installations-store";let Ty=null;function Cy(){return Ty||(Ty=wd(bK,TK,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Hi)}})),Ty}function Td(t,e){return Sy.apply(this,arguments)}function Sy(){return(Sy=m(function*(t,e){const n=vo(t),i=(yield Cy()).transaction(Hi,"readwrite"),s=i.objectStore(Hi),o=yield s.get(n);return yield s.put(e,n),yield i.done,(!o||o.fid!==e.fid)&&ZN(t,e.fid),e})).apply(this,arguments)}function Ay(t){return xy.apply(this,arguments)}function xy(){return(xy=m(function*(t){const e=vo(t),r=(yield Cy()).transaction(Hi,"readwrite");yield r.objectStore(Hi).delete(e),yield r.done})).apply(this,arguments)}function du(t,e){return My.apply(this,arguments)}function My(){return(My=m(function*(t,e){const n=vo(t),i=(yield Cy()).transaction(Hi,"readwrite"),s=i.objectStore(Hi),o=yield s.get(n),a=e(o);return void 0===a?yield s.delete(n):yield s.put(a,n),yield i.done,a&&(!o||o.fid!==a.fid)&&ZN(t,a.fid),a})).apply(this,arguments)}function Ny(t){return ky.apply(this,arguments)}function ky(){return ky=m(function*(t){let e;const n=yield du(t.appConfig,r=>{const i=function CK(t){return ik(t||{fid:vK(),registrationStatus:0})}(r),s=function SK(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(Ar.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function AK(t,e){return Ry.apply(this,arguments)}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:xK(t)}:{installationEntry:e}}(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===by?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}}),ky.apply(this,arguments)}function Ry(){return Ry=m(function*(t,e){try{const n=yield function mK(t,e){return Dy.apply(this,arguments)}(t,e);return Td(t.appConfig,n)}catch(n){throw KN(n)&&409===n.customData.serverCode?yield Ay(t.appConfig):yield Td(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}),Ry.apply(this,arguments)}function xK(t){return Py.apply(this,arguments)}function Py(){return(Py=m(function*(t){let e=yield rk(t.appConfig);for(;1===e.registrationStatus;)yield JN(100),e=yield rk(t.appConfig);if(0===e.registrationStatus){const{installationEntry:n,registrationPromise:r}=yield Ny(t);return r||n}return e})).apply(this,arguments)}function rk(t){return du(t,e=>{if(!e)throw Ar.create("installation-not-found");return ik(e)})}function ik(t){return function MK(t){return 1===t.registrationStatus&&t.registrationTime+qN<Date.now()}(t)?{fid:t.fid,registrationStatus:0}:t}function Oy(){return(Oy=m(function*({appConfig:t,heartbeatServiceProvider:e},n){const r=function kK(t,{fid:e}){return`${_y(t)}/${e}/authTokens:generate`}(t,n),i=function XN(t,{refreshToken:e}){const n=YN(t);return n.append("Authorization",function gK(t){return`${WN} ${t}`}(e)),n}(t,n),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:zN,appId:t.appId}})},u=yield Iy(()=>fetch(r,a));if(u.ok)return QN(yield u.json());throw yield vy("Generate Auth Token",u)})).apply(this,arguments)}function Fy(t){return Ly.apply(this,arguments)}function Ly(){return Ly=m(function*(t,e=!1){let n;const r=yield du(t.appConfig,s=>{if(!ok(s))throw Ar.create("not-registered");const o=s.authToken;if(!e&&function OK(t){return 2===t.requestStatus&&!function FK(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+lK}(t)}(o))return s;if(1===o.requestStatus)return n=function RK(t,e){return Vy.apply(this,arguments)}(t,e),s;{if(!navigator.onLine)throw Ar.create("app-offline");const a=function LK(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(s);return n=function PK(t,e){return By.apply(this,arguments)}(t,a),a}});return n?yield n:r.authToken}),Ly.apply(this,arguments)}function Vy(){return(Vy=m(function*(t,e){let n=yield sk(t.appConfig);for(;1===n.authToken.requestStatus;)yield JN(100),n=yield sk(t.appConfig);const r=n.authToken;return 0===r.requestStatus?Fy(t,e):r})).apply(this,arguments)}function sk(t){return du(t,e=>{if(!ok(e))throw Ar.create("not-registered");return function VK(t){return 1===t.requestStatus&&t.requestTime+qN<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function By(){return By=m(function*(t,e){try{const n=yield function NK(t,e){return Oy.apply(this,arguments)}(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield Td(t.appConfig,r),n}catch(n){if(!KN(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Td(t.appConfig,r)}else yield Ay(t.appConfig);throw n}}),By.apply(this,arguments)}function ok(t){return void 0!==t&&2===t.registrationStatus}function Uy(){return(Uy=m(function*(t){const e=t,{installationEntry:n,registrationPromise:r}=yield Ny(e);return r?r.catch(console.error):Fy(e).catch(console.error),n.fid})).apply(this,arguments)}function jy(){return jy=m(function*(t,e=!1){const n=t;return yield function jK(t){return $y.apply(this,arguments)}(n),(yield Fy(n,e)).token}),jy.apply(this,arguments)}function $y(){return($y=m(function*(t){const{registrationPromise:e}=yield Ny(t);e&&(yield e)})).apply(this,arguments)}function qy(t){return Ar.create("missing-app-config-values",{valueName:t})}const ak="installations",zK=t=>{const e=t.getProvider("app").getImmediate(),n=function HK(t){if(!t||!t.options)throw qy("App Configuration");if(!t.name)throw qy("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw qy(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:Dd(e,"heartbeat"),_delete:()=>Promise.resolve()}},WK=t=>{const n=Dd(t.getProvider("app").getImmediate(),ak).getImmediate();return{getId:()=>function BK(t){return Uy.apply(this,arguments)}(n),getToken:i=>function UK(t){return jy.apply(this,arguments)}(n,i)}};(function KK(){$t(new Nt(ak,zK,"PUBLIC")),$t(new Nt("installations-internal",WK,"PRIVATE"))})(),Ue(HN,yy),Ue(HN,yy,"esm2017");const zy="@firebase/remote-config",Zt=new tr("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class s6{constructor(e,n,r,i){this.client=e,this.storage=n,this.storageCache=r,this.logger=i}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-n,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var n=this;return m(function*(){const[r,i]=yield Promise.all([n.storage.getLastSuccessfulFetchTimestampMillis(),n.storage.getLastSuccessfulFetchResponse()]);if(i&&n.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield n.client.fetch(e),o=[n.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(n.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function o6(t=navigator){return t.languages&&t.languages[0]||t.language}class a6{constructor(e,n,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){var n=this;return m(function*(){const[r,i]=yield Promise.all([n.firebaseInstallations.getId(),n.firebaseInstallations.getToken()]),o=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${n.projectId}/namespaces/${n.namespace}:fetch?key=${n.apiKey}`,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},u={sdk_version:n.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:n.appId,language_code:o6()},c={method:"POST",headers:a,body:JSON.stringify(u)},l=fetch(o,c),d=new Promise((I,b)=>{e.signal.addEventListener(()=>{const v=new Error("The operation was aborted.");v.name="AbortError",b(v)})});let h;try{yield Promise.race([l,d]),h=yield l}catch(I){let b="fetch-client-network";throw"AbortError"===I?.name&&(b="fetch-timeout"),Zt.create(b,{originalErrorMessage:I?.message})}let f=h.status;const p=h.headers.get("ETag")||void 0;let g,y;if(200===h.status){let I;try{I=yield h.json()}catch(b){throw Zt.create("fetch-client-parse",{originalErrorMessage:b?.message})}g=I.entries,y=I.state}if("INSTANCE_STATE_UNSPECIFIED"===y?f=500:"NO_CHANGE"===y?f=304:("NO_TEMPLATE"===y||"EMPTY_CONFIG"===y)&&(g={}),304!==f&&200!==f)throw Zt.create("fetch-status",{httpStatus:f});return{status:f,eTag:p,config:g}})()}}class l6{constructor(e,n){this.client=e,this.storage=n}fetch(e){var n=this;return m(function*(){const r=(yield n.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return n.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:n,backoffCount:r}){var i=this;return m(function*(){yield function u6(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Zt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,n);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function c6(t){if(!(t instanceof Bn&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+ry(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(o),i.attemptFetch(e,o)}})()}}class f6{constructor(e,n,r,i,s){this.app=e,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Sd(t,e){const n=t.target.error||void 0;return Zt.create(e,{originalErrorMessage:n&&n?.message})}const qi="app_namespace_store";class y6{constructor(e,n,r,i=function m6(){return new Promise((t,e)=>{try{const n=indexedDB.open("firebase_remote_config",1);n.onerror=r=>{e(Sd(r,"storage-open"))},n.onsuccess=r=>{t(r.target.result)},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(qi,{keyPath:"compositeKey"})}}catch(n){e(Zt.create("storage-open",{originalErrorMessage:n?.message}))}})}()){this.appId=e,this.appName=n,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var n=this;return m(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([qi],"readonly").objectStore(qi),u=n.createCompositeKey(e);try{const c=a.get(u);c.onerror=l=>{s(Sd(l,"storage-get"))},c.onsuccess=l=>{const d=l.target.result;i(d?d.value:void 0)}}catch(c){s(Zt.create("storage-get",{originalErrorMessage:c?.message}))}})})()}set(e,n){var r=this;return m(function*(){const i=yield r.openDbPromise;return new Promise((s,o)=>{const u=i.transaction([qi],"readwrite").objectStore(qi),c=r.createCompositeKey(e);try{const l=u.put({compositeKey:c,value:n});l.onerror=d=>{o(Sd(d,"storage-set"))},l.onsuccess=()=>{s()}}catch(l){o(Zt.create("storage-set",{originalErrorMessage:l?.message}))}})})()}delete(e){var n=this;return m(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([qi],"readwrite").objectStore(qi),u=n.createCompositeKey(e);try{const c=a.delete(u);c.onerror=l=>{s(Sd(l,"storage-delete"))},c.onsuccess=()=>{i()}}catch(c){s(Zt.create("storage-delete",{originalErrorMessage:c?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class _6{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return m(function*(){const n=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield n;s&&(e.lastFetchStatus=s);const o=yield r;o&&(e.lastSuccessfulFetchTimestampMillis=o);const a=yield i;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function w6(){return Xy.apply(this,arguments)}function Xy(){return(Xy=m(function*(){if(!Bi())return!1;try{return yield cu()}catch{return!1}})).apply(this,arguments)}!function v6(){$t(new Nt("remote-config",function t(e,{instanceIdentifier:n}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Zt.create("registration-window");if(!Bi())throw Zt.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw Zt.create("registration-project-id");if(!o)throw Zt.create("registration-api-key");if(!a)throw Zt.create("registration-app-id");const u=new y6(a,r.name,n=n||"firebase"),c=new _6(u),l=new _o(zy);l.logLevel=oe.ERROR;const d=new a6(i,bd,n,s,o,a),h=new l6(d,u),f=new s6(h,u,c,l),p=new f6(r,f,c,u,l);return function n6(t){const e=jt(t);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(p),p},"PUBLIC").setMultipleInstances(!0)),Ue(zy,"0.4.4"),Ue(zy,"0.4.4","esm2017")}();const I6="/firebase-messaging-sw.js",E6="/firebase-cloud-messaging-push-scope",dk="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",D6="https://fcmregistrations.googleapis.com/v1",hk="google.c.a.c_id",b6="google.c.a.c_l",T6="google.c.a.ts",C6="google.c.a.e";var Io=(()=>{return(t=Io||(Io={})).PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",Io;var t})();function xr(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function S6(t){const n=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}const Jy="fcm_token_details_db",A6=5,fk="fcm_token_object_Store";function Zy(){return Zy=m(function*(t){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(Jy))return null;let e=null;return(yield wd(Jy,A6,{upgrade:(r=m(function*(i,s,o,a){var u;if(s<2||!i.objectStoreNames.contains(fk))return;const c=a.objectStore(fk),l=yield c.index("fcmSenderId").get(t);if(yield c.clear(),l)if(2===s){const d=l;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:null!==(u=d.createTime)&&void 0!==u?u:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:xr(d.vapidKey)}}}else if(3===s){const d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:xr(d.auth),p256dh:xr(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:xr(d.vapidKey)}}}else if(4===s){const d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:xr(d.auth),p256dh:xr(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:xr(d.vapidKey)}}}}),function(s,o,a,u){return r.apply(this,arguments)})})).close(),yield ly(Jy),yield ly("fcm_vapid_details_db"),yield ly("undefined"),function M6(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}(e)?e:null;var r}),Zy.apply(this,arguments)}const N6="firebase-messaging-database",k6=1,zi="firebase-messaging-store";let e_=null;function t_(){return e_||(e_=wd(N6,k6,{upgrade:(t,e)=>{0===e&&t.createObjectStore(zi)}})),e_}function pk(t){return n_.apply(this,arguments)}function n_(){return n_=m(function*(t){const e=o_(t),r=yield(yield t_()).transaction(zi).objectStore(zi).get(e);if(r)return r;{const i=yield function x6(t){return Zy.apply(this,arguments)}(t.appConfig.senderId);if(i)return yield r_(t,i),i}}),n_.apply(this,arguments)}function r_(t,e){return i_.apply(this,arguments)}function i_(){return(i_=m(function*(t,e){const n=o_(t),i=(yield t_()).transaction(zi,"readwrite");return yield i.objectStore(zi).put(e,n),yield i.done,e})).apply(this,arguments)}function s_(){return(s_=m(function*(t){const e=o_(t),r=(yield t_()).transaction(zi,"readwrite");yield r.objectStore(zi).delete(e),yield r.done})).apply(this,arguments)}function o_({appConfig:t}){return t.appId}const gt=new tr("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function O6(t,e){return a_.apply(this,arguments)}function a_(){return(a_=m(function*(t,e){const n=yield d_(t),r=mk(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(l_(t.appConfig),i)).json()}catch(o){throw gt.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error)throw gt.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw gt.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function u_(){return(u_=m(function*(t,e){const n=yield d_(t),r=mk(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(`${l_(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw gt.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error)throw gt.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw gt.create("token-update-no-token");return s.token})).apply(this,arguments)}function gk(t,e){return c_.apply(this,arguments)}function c_(){return(c_=m(function*(t,e){const r={method:"DELETE",headers:yield d_(t)};try{const s=yield(yield fetch(`${l_(t.appConfig)}/${e}`,r)).json();if(s.error)throw gt.create("token-unsubscribe-failed",{errorInfo:s.error.message})}catch(i){throw gt.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})).apply(this,arguments)}function l_({projectId:t}){return`${D6}/projects/${t}/registrations`}function d_(t){return h_.apply(this,arguments)}function h_(){return(h_=m(function*({appConfig:t,installations:e}){const n=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function mk({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==dk&&(i.web.applicationPubKey=r),i}const L6=6048e5;function f_(){return f_=m(function*(t){const e=yield function U6(t,e){return y_.apply(this,arguments)}(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:xr(e.getKey("auth")),p256dh:xr(e.getKey("p256dh"))},r=yield pk(t.firebaseDependencies);if(r){if(function j6(t,e){return e.vapidKey===t.vapidKey&&e.endpoint===t.endpoint&&e.auth===t.auth&&e.p256dh===t.p256dh}(r.subscriptionOptions,n))return Date.now()>=r.createTime+L6?function B6(t,e){return g_.apply(this,arguments)}(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield gk(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return _k(t.firebaseDependencies,n)}return _k(t.firebaseDependencies,n)}),f_.apply(this,arguments)}function p_(){return p_=m(function*(t){const e=yield pk(t.firebaseDependencies);e&&(yield gk(t.firebaseDependencies,e.token),yield function R6(t){return s_.apply(this,arguments)}(t.firebaseDependencies));const n=yield t.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}),p_.apply(this,arguments)}function g_(){return g_=m(function*(t,e){try{const n=yield function F6(t,e){return u_.apply(this,arguments)}(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield r_(t.firebaseDependencies,r),n}catch(n){throw yield function yk(t){return p_.apply(this,arguments)}(t),n}}),g_.apply(this,arguments)}function _k(t,e){return m_.apply(this,arguments)}function m_(){return(m_=m(function*(t,e){const r={token:yield O6(t,e),createTime:Date.now(),subscriptionOptions:e};return yield r_(t,r),r.token})).apply(this,arguments)}function y_(){return(y_=m(function*(t,e){return(yield t.pushManager.getSubscription())||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:S6(e)})})).apply(this,arguments)}function vk(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return function $6(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const s=e.notification.icon;s&&(t.notification.icon=s)}(e,t),function G6(t,e){e.data&&(t.data=e.data)}(e,t),function H6(t,e){var n,r,i,s,o;if(!(e.fcmOptions||null!==(n=e.notification)&&void 0!==n&&n.click_action))return;t.fcmOptions={};const a=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=e.notification)||void 0===s?void 0:s.click_action;a&&(t.fcmOptions.link=a);const u=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;u&&(t.fcmOptions.analyticsLabel=u)}(e,t),e}function wk(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function __(t){return gt.create("missing-app-config-values",{valueName:t})}wk("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),wk("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class W6{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function z6(t){if(!t||!t.options)throw __("App Configuration Object");if(!t.name)throw __("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw __(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}function Ik(t){return v_.apply(this,arguments)}function v_(){return(v_=m(function*(t){try{t.swRegistration=yield navigator.serviceWorker.register(I6,{scope:E6}),t.swRegistration.update().catch(()=>{})}catch(e){throw gt.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function w_(){return(w_=m(function*(t,e){if(!e&&!t.swRegistration&&(yield Ik(t)),e||!t.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw gt.create("invalid-sw-registration");t.swRegistration=e}})).apply(this,arguments)}function I_(){return(I_=m(function*(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=dk)})).apply(this,arguments)}function E_(){return E_=m(function*(t,e){if(!navigator)throw gt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw gt.create("permission-blocked");return yield function Q6(t,e){return I_.apply(this,arguments)}(t,e?.vapidKey),yield function K6(t,e){return w_.apply(this,arguments)}(t,e?.serviceWorkerRegistration),function V6(t){return f_.apply(this,arguments)}(t)}),E_.apply(this,arguments)}function D_(){return(D_=m(function*(t,e,n){const r=function X6(t){switch(t){case Io.NOTIFICATION_CLICKED:return"notification_open";case Io.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[hk],message_name:n[b6],message_time:n[T6],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function b_(){return b_=m(function*(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Io.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(vk(n)):t.onMessageHandler.next(vk(n)));const r=n.data;(function q6(t){return"object"==typeof t&&!!t&&hk in t})(r)&&"1"===r[C6]&&(yield function Y6(t,e,n){return D_.apply(this,arguments)}(t,n.messageType,r))}),b_.apply(this,arguments)}const Dk="@firebase/messaging",Z6=t=>{const e=new W6(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>function J6(t,e){return b_.apply(this,arguments)}(e,n)),e},e5=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>function Ek(t,e){return E_.apply(this,arguments)}(e,r)}};function Tk(){return T_.apply(this,arguments)}function T_(){return(T_=m(function*(){try{yield cu()}catch{return!1}return typeof window<"u"&&Bi()&&Zm()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function t5(){$t(new Nt("messaging",Z6,"PUBLIC")),$t(new Nt("messaging-internal",e5,"PRIVATE")),Ue(Dk,"0.12.4"),Ue(Dk,"0.12.4","esm2017")}();const Ad="analytics",i5="firebase_id",s5="origin",o5=6e4,a5="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ck="https://www.googletagmanager.com/gtag/js",mt=new _o("@firebase/analytics");function Sk(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function A_(){return(A_=m(function*(t,e,n,r,i,s){const o=r[i];try{if(o)yield e[o];else{const u=(yield Sk(n)).find(c=>c.measurementId===i);u&&(yield e[u.appId])}}catch(a){mt.error(a)}t("config",i,s)})).apply(this,arguments)}function x_(){return(x_=m(function*(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=yield Sk(n);for(const u of o){const c=a.find(d=>d.measurementId===u),l=c&&e[c.appId];if(!l){s=[];break}s.push(l)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),t("event",r,i||{})}catch(s){mt.error(s)}})).apply(this,arguments)}const gn=new tr("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),m5=30,Ak=new class _5{constructor(e={},n=1e3){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function v5(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function M_(){return(M_=m(function*(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:v5(r)},s=a5.replace("{app-id}",n),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let a="";try{const u=yield o.json();null!==(e=u.error)&&void 0!==e&&e.message&&(a=u.error.message)}catch{}throw gn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})).apply(this,arguments)}function N_(){return(N_=m(function*(t,e=Ak,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw gn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw gn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new b5;return setTimeout(m(function*(){a.abort()}),void 0!==n?n:o5),xk({appId:r,apiKey:i,measurementId:s},o,a,e)})).apply(this,arguments)}function xk(t,e,n){return k_.apply(this,arguments)}function k_(){return k_=m(function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=Ak){var s;const{appId:o,measurementId:a}=t;try{yield function E5(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(gn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(r,e)}catch(u){if(a)return mt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:o,measurementId:a};throw u}try{const u=yield function w5(t){return M_.apply(this,arguments)}(t);return i.deleteThrottleMetadata(o),u}catch(u){const c=u;if(!function D5(t){if(!(t instanceof Bn&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c)){if(i.deleteThrottleMetadata(o),a)return mt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:o,measurementId:a};throw u}const l=503===Number(null===(s=c?.customData)||void 0===s?void 0:s.httpStatus)?ry(n,i.intervalMillis,m5):ry(n,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return i.setThrottleMetadata(o,d),mt.debug(`Calling attemptFetch again in ${l} millis`),xk(t,d,r,i)}}),k_.apply(this,arguments)}class b5{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let R_,B_;function P_(){return(P_=m(function*(t,e,n,r,i){if(i&&i.global)t("event",n,r);else{const s=yield e;t("event",n,Object.assign(Object.assign({},r),{send_to:s}))}})).apply(this,arguments)}function U_(){return(U_=m(function*(){if(!Bi())return mt.warn(gn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield cu()}catch(t){return mt.warn(gn.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}return!0})).apply(this,arguments)}function j_(){return j_=m(function*(t,e,n,r,i,s,o){var a;const u=function I5(t){return N_.apply(this,arguments)}(t);u.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&mt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>mt.error(f)),e.push(u);const c=function M5(){return U_.apply(this,arguments)}().then(f=>{if(f)return r.getId()}),[l,d]=yield Promise.all([u,c]);(function p5(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Ck)&&n.src.includes(t))return n;return null})(s)||function u5(t,e){const n=document.createElement("script");n.src=`${Ck}?l=${t}&id=${e}`,n.async=!0,document.head.appendChild(n)}(s,l.measurementId),B_&&(i("consent","default",B_),function Mk(t){B_=t}(void 0)),i("js",new Date);const h=null!==(a=o?.config)&&void 0!==a?a:{};return h[s5]="firebase",h.update=!0,null!=d&&(h[i5]=d),i("config",l.measurementId,h),R_&&(i("set",R_),function Nk(t){R_=t}(void 0)),l.measurementId}),j_.apply(this,arguments)}class k5{constructor(e){this.app=e}_delete(){return delete Mr[this.app.options.appId],Promise.resolve()}}let Mr={},kk=[];const Rk={};let Ok,Nr,xd="dataLayer",Pk="gtag",$_=!1;function P5(t,e,n){!function R5(){const t=[];if(Jm()&&t.push("This is a browser extension environment."),Zm()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=gn.create("invalid-analytics-context",{errorInfo:e});mt.warn(n.message)}}();const r=t.options.appId;if(!r)throw gn.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw gn.create("no-api-key");mt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Mr[r])throw gn.create("already-exists",{id:r});if(!$_){!function c5(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(xd);const{wrappedGtag:s,gtagCore:o}=function f5(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function h5(t,e,n,r){function s(){return s=m(function*(o,a,u){try{"event"===o?yield function d5(t,e,n,r,i){return x_.apply(this,arguments)}(t,e,n,a,u):"config"===o?yield function l5(t,e,n,r,i,s){return A_.apply(this,arguments)}(t,e,n,r,a,u):"consent"===o?t("consent","update",u):t("set",a)}catch(c){mt.error(c)}}),s.apply(this,arguments)}return function i(o,a,u){return s.apply(this,arguments)}}(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}(Mr,kk,Rk,xd,Pk);Nr=s,Ok=o,$_=!0}return Mr[r]=function N5(t,e,n,r,i,s,o){return j_.apply(this,arguments)}(t,kk,Rk,e,Ok,xd,n),new k5(t)}function F5(){return G_.apply(this,arguments)}function G_(){return(G_=m(function*(){if(Jm()||!Zm()||!Bi())return!1;try{return yield cu()}catch{return!1}})).apply(this,arguments)}const Fk="@firebase/analytics";!function V5(){$t(new Nt(Ad,(e,{options:n})=>P5(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n),"PUBLIC")),$t(new Nt("analytics-internal",function t(e){try{const n=e.getProvider(Ad).getImmediate();return{logEvent:(r,i,s)=>function L5(t,e,n,r){t=jt(t),function T5(t,e,n,r,i){return P_.apply(this,arguments)}(Nr,Mr[t.app.options.appId],e,n,r).catch(i=>mt.error(i))}(n,r,i,s)}}catch(n){throw gn.create("interop-component-reg-failed",{reason:n})}},"PRIVATE")),Ue(Fk,"0.9.4"),Ue(Fk,"0.9.4","esm2017")}();class B5 extends Sn{constructor(e,n){super()}schedule(e,n=0){return this}}const Md={setInterval(t,e,...n){const{delegate:r}=Md;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=Md;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class Vk extends B5{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Md.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&Md.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ts(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const Bk={now:()=>(Bk.delegate||Date).now(),delegate:void 0};class hu{constructor(e,n=hu.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}hu.now=Bk.now;class Uk extends hu{constructor(e,n=hu.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const $5=new class j5 extends Uk{}(class U5 extends Vk{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),G5=new Uk(Vk),H_=new Pa("7.5.0"),q_="__angularfire_symbol__analyticsIsSupportedValue",z_="__angularfire_symbol__analyticsIsSupported",W_="__angularfire_symbol__remoteConfigIsSupportedValue",K_="__angularfire_symbol__remoteConfigIsSupported",Q_="__angularfire_symbol__messagingIsSupportedValue",Y_="__angularfire_symbol__messagingIsSupported";globalThis[z_]||(globalThis[z_]=F5().then(t=>globalThis[q_]=t).catch(()=>globalThis[q_]=!1)),globalThis[Y_]||(globalThis[Y_]=Tk().then(t=>globalThis[Q_]=t).catch(()=>globalThis[Q_]=!1)),globalThis[K_]||(globalThis[K_]=w6().then(t=>globalThis[W_]=t).catch(()=>globalThis[W_]=!1));const Z_=(t,e)=>{const n=e?[e]:VN(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};function Eo(){}class jk{constructor(e,n=$5){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},n,r)}}class q5{constructor(e){this.zone=e,this.task=null}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Eo,{},Eo,Eo)),n.pipe(function H5(t,e,n){const r=Te(t)||e||n?{next:t,error:e,complete:n}:t;return r?Cs((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Ss(s,u=>{var c;null===(c=r.next)||void 0===c||c.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,u),s.error(u)},()=>{var u,c;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Ef}({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let $k=(()=>{class t{constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new jk(Zone.current)),this.insideAngular=n.run(()=>new jk(Zone.current,G5)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return t.\u0275fac=function(n){return new(n||t)(ie(et))},t.\u0275prov=ge({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Wi(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function Ki(t){return Wi().ngZone.run(()=>t())}function W5(t){return Wi(),function K5(t){return function(n){return(n=n.lift(new q5(t.ngZone))).pipe(Rc(t.outsideAngular),kc(t.insideAngular))}}(Wi())(t)}const Q5=(t,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),Ki(()=>t.apply(void 0,r))},ni=(t,e)=>function(){let n;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(n||(n=Ki(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Eo,{},Eo,Eo)))),r[s]=Q5(r[s],n));const i=function z5(t){return Wi().ngZone.runOutsideAngular(()=>t())}(()=>t.apply(this,r));if(!e){if(i instanceof ot){const s=Wi();return i.pipe(Rc(s.outsideAngular),kc(s.insideAngular))}return Ki(()=>i)}return i instanceof ot?i.pipe(W5):i instanceof Promise?Ki(()=>new Promise((s,o)=>i.then(a=>Ki(()=>s(a)),a=>Ki(()=>o(a))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:Ki(()=>i)};class Do{constructor(e){return e}}class Gk{constructor(){return VN()}}const ev=new $("angularfire2._apps"),X5={provide:Do,useFactory:function Y5(t){return t&&1===t.length?t[0]:new Do(LN())},deps:[[new Kt,ev]]},J5={provide:Gk,deps:[[new Kt,ev]]};function Z5(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new Do(r)}}let e7=(()=>{class t{constructor(n){Ue("angularfire",H_.full,"core"),Ue("angularfire",H_.full,"app"),Ue("angular",Z0.full,n.toString())}}return t.\u0275fac=function(n){return new(n||t)(ie(Ll))},t.\u0275mod=Gn({type:t}),t.\u0275inj=An({providers:[X5,J5]}),t})();function t7(t,...e){return{ngModule:e7,providers:[{provide:ev,useFactory:Z5(t),multi:!0,deps:[et,Wn,$k,...e]}]}}const n7=ni(FN,!0);const r7=function Hk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},qk=new tr("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),zk=new _o("@firebase/auth");function Nd(t,...e){zk.logLevel<=oe.ERROR&&zk.error(`Auth (${bd}): ${t}`,...e)}function en(t,...e){throw tv(t,...e)}function nr(t,...e){return tv(t,...e)}function tv(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return qk.create(t,...e)}function S(t,e,...n){if(!t)throw tv(e,...n)}function rr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Nd(e),new Error(e)}function ri(t,e){t||rr(e)}const Kk=new Map;function kr(t){ri(t instanceof Function,"Expected a class definition");let e=Kk.get(t);return e?(ri(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Kk.set(t,e),e)}function Qk(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class pu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ri(n>e,"Short delay should be less than long delay!"),this.isMobile=function H4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}()||function z4(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()}get(){return function o7(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function nv(){return"http:"===Qk()||"https:"===Qk()}()||Jm()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class Yk{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const u7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},c7=new pu(3e4,6e4);function at(t,e,n,r){return iv.apply(this,arguments)}function iv(){return(iv=m(function*(t,e,n,r,i={}){return Xk(t,i,m(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=AN(Object.assign({key:t.config.apiKey},o)).slice(1),u=yield t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),Yk.fetch()(Jk(t,t.config.apiHost,n,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},s))}))})).apply(this,arguments)}function Xk(t,e,n){return sv.apply(this,arguments)}function sv(){return(sv=m(function*(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},u7),e);try{const i=new l7(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw gu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===u)throw gu(t,"credential-already-in-use",o);if("EMAIL_EXISTS"===u)throw gu(t,"email-already-in-use",o);if("USER_DISABLED"===u)throw gu(t,"user-disabled",o);const l=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw function Wk(t,e,n){const r=Object.assign(Object.assign({},r7()),{[e]:n});return new tr("auth","Firebase",r).create(e,{appName:t.name})}(t,l,c);en(t,l)}}catch(i){if(i instanceof Bn)throw i;en(t,"internal-error",{message:String(i)})}})).apply(this,arguments)}function Jk(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?function rv(t,e){ri(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}(t.config,i):`${t.config.apiScheme}://${i}`}class l7{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(nr(this.auth,"network-request-failed")),c7.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=nr(t,e,r);return i.customData._tokenResponse=n,i}function av(){return(av=m(function*(t,e){return at(t,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function cv(){return(cv=m(function*(t,e){return at(t,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function mu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function lv(){return(lv=m(function*(t,e=!1){const n=jt(t),r=yield n.getIdToken(e),i=kd(r);S(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:mu(dv(i.auth_time)),issuedAtTime:mu(dv(i.iat)),expirationTime:mu(dv(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function dv(t){return 1e3*Number(t)}function kd(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return Nd("JWT malformed, contained fewer than 3 sections"),null;try{const i=md(n);return i?JSON.parse(i):(Nd("Failed to decode base64 JWT payload"),null)}catch(i){return Nd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Pr(t,e){return hv.apply(this,arguments)}function hv(){return(hv=m(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(r){throw r instanceof Bn&&function m7({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})).apply(this,arguments)}class y7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var n=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(m(function*(){yield n.iteration()}),r)}iteration(){var e=this;return m(function*(){try{yield e.user.getIdToken(!0)}catch(n){return void("auth/network-request-failed"===n?.code&&e.schedule(!0))}e.schedule()})()}}class Zk{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=mu(this.lastLoginAt),this.creationTime=mu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function yu(t){return fv.apply(this,arguments)}function fv(){return fv=m(function*(t){var e;const n=t.auth,r=yield t.getIdToken(),i=yield Pr(t,function f7(t,e){return cv.apply(this,arguments)}(n,{idToken:r}));S(i?.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?function w7(t){return t.map(e=>{var{providerId:n}=e,r=Ab(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(s.providerUserInfo):[],a=function v7(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}(t.providerData,o),l=!!t.isAnonymous&&!(t.email&&s.passwordHash||a?.length),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Zk(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(t,d)}),fv.apply(this,arguments)}function pv(){return(pv=m(function*(t){const e=jt(t);yield yu(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function gv(){return(gv=m(function*(t,e){const n=yield Xk(t,{},m(function*(){const r=AN({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Jk(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Yk.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class _u{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){S(e.idToken,"internal-error"),S(typeof e.idToken<"u","internal-error"),S(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function g7(t){const e=kd(t);return S(e,"internal-error"),S(typeof e.exp<"u","internal-error"),S(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){var r=this;return m(function*(){return S(!r.accessToken||r.refreshToken,e,"user-token-expired"),n||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,n){var r=this;return m(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function I7(t,e){return gv.apply(this,arguments)}(e,n);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new _u;return r&&(S("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(S("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(S("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _u,this.toJSON())}_performRefresh(){return rr("not implemented")}}function ii(t,e){S("string"==typeof t||typeof t>"u","internal-error",{appName:e})}class Qi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Ab(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new y7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Zk(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var n=this;return m(function*(){const r=yield Pr(n,n.stsTokenManager.getToken(n.auth,e));return S(r,n.auth,"internal-error"),n.accessToken!==r&&(n.accessToken=r,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),r})()}getIdTokenResult(e){return function p7(t){return lv.apply(this,arguments)}(this,e)}reload(){return function _7(t){return pv.apply(this,arguments)}(this)}_assign(e){this!==e&&(S(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Qi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){S(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){var r=this;return m(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield yu(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return m(function*(){const n=yield e.getIdToken();return yield Pr(e,function d7(t,e){return av.apply(this,arguments)}(e.auth,{idToken:n})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,c,l;const d=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,f=null!==(s=n.phoneNumber)&&void 0!==s?s:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,g=null!==(a=n.tenantId)&&void 0!==a?a:void 0,y=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,I=null!==(c=n.createdAt)&&void 0!==c?c:void 0,b=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,{uid:v,emailVerified:k,isAnonymous:L,providerData:B,stsTokenManager:qe}=n;S(v&&qe,e,"internal-error");const bs=_u.fromJSON(this.name,qe);S("string"==typeof v,e,"internal-error"),ii(d,e.name),ii(h,e.name),S("boolean"==typeof k,e,"internal-error"),S("boolean"==typeof L,e,"internal-error"),ii(f,e.name),ii(p,e.name),ii(g,e.name),ii(y,e.name),ii(I,e.name),ii(b,e.name);const _b=new Qi({uid:v,auth:e,email:h,emailVerified:k,displayName:d,isAnonymous:L,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:bs,createdAt:I,lastLoginAt:b});return B&&Array.isArray(B)&&(_b.providerData=B.map(Ete=>Object.assign({},Ete))),y&&(_b._redirectEventId=y),_b}static _fromIdTokenResponse(e,n,r=!1){return m(function*(){const i=new _u;i.updateFromServerResponse(n);const s=new Qi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield yu(s),s})()}}const e1=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(function*(){return!0})()}_set(n,r){var i=this;return m(function*(){i.storage[n]=r})()}_get(n){var r=this;return m(function*(){const i=r.storage[n];return void 0===i?null:i})()}_remove(n){var r=this;return m(function*(){delete r.storage[n]})()}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})();function Rd(t,e,n){return`firebase:${t}:${e}:${n}`}class To{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Rd(this.userKey,i.apiKey,s),this.fullPersistenceKey=Rd("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return m(function*(){const n=yield e.persistence._get(e.fullUserKey);return n?Qi._fromJSON(e.auth,n):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var n=this;return m(function*(){if(n.persistence===e)return;const r=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=e,r?n.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return m(function*(){if(!n.length)return new To(kr(e1),e,r);const i=(yield Promise.all(n.map(function(){var c=m(function*(l){if(yield l._isAvailable())return l});return function(l){return c.apply(this,arguments)}}()))).filter(c=>c);let s=i[0]||kr(e1);const o=Rd(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const l=yield c._get(o);if(l){const d=Qi._fromJSON(e,l);c!==s&&(a=d),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return s._shouldAllowMigration&&u.length?(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(function(){var c=m(function*(l){if(l!==s)try{yield l._remove(o)}catch{}});return function(l){return c.apply(this,arguments)}}())),new To(s,e,r)):new To(s,e,r)})()}}function t1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(function i1(t=pn()){return/iemobile/i.test(t)}(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(function n1(t=pn()){return/firefox\//i.test(t)}(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(function o1(t=pn()){return/blackberry/i.test(t)}(e))return"Blackberry";if(function a1(t=pn()){return/webos/i.test(t)}(e))return"Webos";if(function mv(t=pn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}(e))return"Safari";if((e.includes("chrome/")||function r1(t=pn()){return/crios\//i.test(t)}(e))&&!e.includes("edge/"))return"Chrome";if(function s1(t=pn()){return/android/i.test(t)}(e))return"Android";{const r=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function u1(t,e=[]){let n;switch(t){case"Browser":n=t1(pn());break;case"Worker":n=`${t1(pn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${bd}/${r}`}class b7{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var n=this;return m(function*(){if(n.auth.currentUser===e)return;const r=[];try{for(const i of n.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}class T7{constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new c1(this),this.idTokenSubscription=new c1(this),this.beforeStateQueue=new b7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qk,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){var r=this;return n&&(this._popupRedirectResolver=kr(n)),this._initializationPromise=this.queue(m(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield To.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(n),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return m(function*(){if(e._deleted)return;const n=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||n){if(e.currentUser&&n&&e.currentUser.uid===n.uid)return e._currentUser._assign(n),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(n,!0)}})()}initializeCurrentUser(e){var n=this;return m(function*(){var r;const i=yield n.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const a=null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId,u=s?._redirectEventId,c=yield n.tryRedirectSignIn(e);(!a||a===u)&&c?.user&&(s=c.user,o=!0)}if(!s)return n.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield n.beforeStateQueue.runMiddleware(s)}catch(a){s=i,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(a))}return s?n.reloadAndSetCurrentUserOrClear(s):n.directlySetCurrentUser(null)}return S(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===s._redirectEventId?n.directlySetCurrentUser(s):n.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var n=this;return m(function*(){let r=null;try{r=yield n._popupRedirectResolver._completeRedirectFn(n,e,!0)}catch{yield n._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var n=this;return m(function*(){try{yield yu(e)}catch(r){if("auth/network-request-failed"!==r?.code)return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function a7(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var e=this;return m(function*(){e._deleted=!0})()}updateCurrentUser(e){var n=this;return m(function*(){const r=e?jt(e):null;return r&&S(r.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(r&&r._clone(n))})()}_updateCurrentUser(e,n=!1){var r=this;return m(function*(){if(!r._deleted)return e&&S(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),n||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(m(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return m(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var n=this;return this.queue(m(function*(){yield n.assertedPersistence.setPersistence(kr(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new tr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,n){var r=this;return m(function*(){const i=yield r.getOrInitRedirectPersistenceManager(n);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var n=this;return m(function*(){if(!n.redirectPersistenceManager){const r=e&&kr(e)||n._popupRedirectResolver;S(r,n,"argument-error"),n.redirectPersistenceManager=yield To.create(n,[kr(r._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(e){var n=this;return m(function*(){var r,i;return n._isInitialized&&(yield n.queue(m(function*(){}))),(null===(r=n._currentUser)||void 0===r?void 0:r._redirectEventId)===e?n._currentUser:(null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?n.redirectUser:null})()}_persistUserIfCurrent(e){var n=this;return m(function*(){if(e===n.currentUser)return n.queue(m(function*(){return n.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(n=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s="function"==typeof n?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return S(o,this,"internal-error"),o.then(()=>s(this.currentUser)),"function"==typeof n?e.addObserver(n,r,i):e.addObserver(n)}directlySetCurrentUser(e){var n=this;return m(function*(){n.currentUser&&n.currentUser!==e&&n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh(),n.currentUser=e,e?yield n.assertedPersistence.setCurrentUser(e):yield n.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return S(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=u1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return m(function*(){var n;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();return i&&(r["X-Firebase-Client"]=i),r})()}}class c1{constructor(e){this.auth=e,this.observer=null,this.addObserver=function Y4(t,e){const n=new X4(t,e);return n.subscribe.bind(n)}(n=>this.observer=n)}get next(){return S(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}(function A1(t){return`__${t}${Math.floor(1e6*Math.random())}`})("rcb"),new pu(3e4,6e4),new pu(2e3,1e4),new pu(3e4,6e4),new pu(5e3,15e3);var U1="@firebase/auth";class yQ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var n=this;return m(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){S(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}yd(),function vQ(t){$t(new Nt("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=r.options;return((a,u)=>{S(s&&!s.includes(":"),"invalid-api-key",{appName:a.name}),S(!o?.includes(":"),"argument-error",{appName:a.name});const c={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:u1(t)},l=new T7(a,u,c);return function s7(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(kr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}(l,n),l})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),$t(new Nt("auth-internal",e=>{const n=function tn(t){return jt(t)}(e.getProvider("auth").getImmediate());return new yQ(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ue(U1,"0.21.4",function _Q(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(t)),Ue(U1,"0.21.4","esm2017")}("Browser");class H1{constructor(){return Z_("auth")}}const Jw=new Map,q1={activated:!1,tokenObservers:[]},CQ={initialized:!1,enabled:!1};function yt(t){return Jw.get(t)||Object.assign({},q1)}function qd(){return CQ}const Zw="https://content-firebaseappcheck.googleapis.com/v1",MQ="exchangeDebugToken",z1={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class kQ{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var n=this;return m(function*(){n.stop();try{n.pending=new _d,yield function RQ(t){return new Promise(e=>{setTimeout(e,t)})}(n.getNextRun(e)),n.pending.resolve(),yield n.pending.promise,n.pending=new _d,yield n.operation(),n.pending.resolve(),yield n.pending.promise,n.process(!0).catch(()=>{})}catch(r){n.retryPolicy(r)?n.process(!1).catch(()=>{}):n.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}const Gt=new tr("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function nI(){return nI=m(function*({url:t,body:e},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const d=yield i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}const s={method:"POST",body:JSON.stringify(e),headers:r};let o,a;try{o=yield fetch(t,s)}catch(d){throw Gt.create("fetch-network-error",{originalErrorMessage:d?.message})}if(200!==o.status)throw Gt.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(d){throw Gt.create("fetch-parse-error",{originalErrorMessage:d?.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Gt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=1e3*Number(u[1]),l=Date.now();return{token:a.token,expireTimeMillis:l+c,issuedAtTimeMillis:l}}),nI.apply(this,arguments)}const VQ="firebase-app-check-database",BQ=1,Du="firebase-app-check-store";let Kd=null;function rI(){return rI=m(function*(t,e){const r=(yield function Q1(){return Kd||(Kd=new Promise((t,e)=>{try{const n=indexedDB.open(VQ,BQ);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Gt.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Du,{keyPath:"compositeKey"})}}catch(n){e(Gt.create("storage-open",{originalErrorMessage:n?.message}))}}),Kd)}()).transaction(Du,"readwrite"),s=r.objectStore(Du).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var c;a(Gt.create("storage-set",{originalErrorMessage:null===(c=u.target.error)||void 0===c?void 0:c.message}))}})}),rI.apply(this,arguments)}const bu=new _o("@firebase/app-check");function oI(t,e){return Bi()?function jQ(t,e){return function Y1(t,e){return rI.apply(this,arguments)}(function J1(t){return`${t.options.appId}-${t.name}`}(t),e)}(t,e).catch(n=>{bu.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function uI(){return uI=m(function*(){const t=qd();if(t.enabled&&t.token)return t.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),uI.apply(this,arguments)}const WQ={error:"UNKNOWN_ERROR"};function KQ(t){return Xm.encodeString(JSON.stringify(t),!1)}function Qd(t){return cI.apply(this,arguments)}function cI(){return cI=m(function*(t,e=!1){const n=t.app;!function W1(t){if(!yt(t).activated)throw Gt.create("use-before-activation",{appName:t.name})}(n);const r=yt(n);let s,i=r.token;if(i&&!Co(i)&&(r.token=void 0,i=void 0),!i){const u=yield r.cachedTokenPromise;u&&(Co(u)?i=u:yield oI(n,void 0))}if(!e&&i&&Co(i))return{token:i.token};let a,o=!1;if(function Z1(){return qd().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=function tI(t,e){return nI.apply(this,arguments)}(function LQ(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${Zw}/projects/${n}/apps/${r}:${MQ}?key=${i}`,body:{debug_token:e}}}(n,yield function eR(){return uI.apply(this,arguments)}()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=yield r.exchangeTokenPromise;return yield oI(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield yt(n).exchangeTokenPromise}catch(u){"appCheck/throttled"===u.code?bu.warn(u.message):bu.error(u),s=u}return i?s?a=Co(i)?{token:i.token,internalError:s}:rR(s):(a={token:i.token},r.token=i,yield oI(n,i)):a=rR(s),o&&function nR(t,e){const n=yt(t).tokenObservers;for(const r of n)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(n,a),a}),cI.apply(this,arguments)}function dI(t,e){const n=yt(t),r=n.tokenObservers.filter(i=>i.next!==e);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function tR(t){const{app:e}=t,n=yt(e);let r=n.tokenRefresher;r||(r=function QQ(t){const{app:e}=t;return new kQ(m(function*(){let r;if(r=yt(e).token?yield Qd(t,!0):yield Qd(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const n=yt(e);if(n.token){let r=n.token.issuedAtTimeMillis+.5*(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,n.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},z1.RETRIAL_MIN_WAIT,z1.RETRIAL_MAX_WAIT)}(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Co(t){return t.expireTimeMillis-Date.now()>0}function rR(t){return{token:KQ(WQ),error:t}}class YQ{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=yt(this.app);for(const n of e)dI(this.app,n.next);return Promise.resolve()}}const dR="app-check-internal";!function lY(){$t(new Nt("app-check",t=>function XQ(t,e){return new YQ(t,e)}(t.getProvider("app").getImmediate(),t.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(dR).initialize()})),$t(new Nt(dR,t=>function JQ(t){return{getToken:e=>Qd(t,e),addTokenListener:e=>function lI(t,e,n,r){const{app:i}=t,s=yt(i);if(s.tokenObservers=[...s.tokenObservers,{next:n,error:r,type:e}],s.token&&Co(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),tR(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>tR(t))}(t,"INTERNAL",e),removeTokenListener:e=>dI(t.app,e)}}(t.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),Ue("@firebase/app-check","0.6.4")}();class fR{constructor(){return Z_("app-check")}}typeof window<"u"&&window;var O,gY=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Fr={},mI=mI||{},q=gY||self;function Xd(){}function Jd(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Tu(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var yI="closure_uid_"+(1e9*Math.random()>>>0),yY=0;function _Y(t,e,n){return t.call.apply(t.bind,arguments)}function vY(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function kt(t,e,n){return(kt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_Y:vY).apply(null,arguments)}function Zd(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function _t(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function si(){this.s=this.s,this.o=this.o}si.prototype.s=!1,si.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function mY(t){Object.prototype.hasOwnProperty.call(t,yI)&&t[yI]||(t[yI]=++yY)}(this)},si.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const pR=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function _I(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function gR(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Jd(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Rt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Rt.prototype.h=function(){this.defaultPrevented=!0};var IY=function(){if(!q.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{q.addEventListener("test",Xd,e),q.removeEventListener("test",Xd,e)}catch{}return t}();function eh(t){return/^[\s\xa0]*$/.test(t)}var mR=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function vI(t,e){return t<e?-1:t>e?1:0}function th(){var t=q.navigator;return t&&(t=t.userAgent)?t:""}function ir(t){return-1!=th().indexOf(t)}function wI(t){return wI[" "](t),t}wI[" "]=Xd;var nh,DY=ir("Opera"),So=ir("Trident")||ir("MSIE"),yR=ir("Edge"),II=yR||So,_R=ir("Gecko")&&!(-1!=th().toLowerCase().indexOf("webkit")&&!ir("Edge"))&&!(ir("Trident")||ir("MSIE"))&&!ir("Edge"),bY=-1!=th().toLowerCase().indexOf("webkit")&&!ir("Edge");function vR(){var t=q.document;return t?t.documentMode:void 0}e:{var EI="",DI=function(){var t=th();return _R?/rv:([^\);]+)(\)|;)/.exec(t):yR?/Edge\/([\d\.]+)/.exec(t):So?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):bY?/WebKit\/(\S+)/.exec(t):DY?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(DI&&(EI=DI?DI[1]:""),So){var bI=vR();if(null!=bI&&bI>parseFloat(EI)){nh=String(bI);break e}}nh=EI}var TY={};var SY=q.document&&So&&(vR()||parseInt(nh,10))||void 0;function Cu(t,e){if(Rt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(_R){e:{try{wI(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:AY[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Cu.X.h.call(this)}}_t(Cu,Rt);var AY={2:"touch",3:"pen",4:"mouse"};Cu.prototype.h=function(){Cu.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Su="closure_listenable_"+(1e6*Math.random()|0),xY=0;function MY(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ha=i,this.key=++xY,this.ba=this.ea=!1}function rh(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function CI(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function IR(t){const e={};for(const n in t)e[n]=t[n];return e}const ER="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function DR(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<ER.length;s++)n=ER[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ih(t){this.src=t,this.g={},this.h=0}function SI(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=pR(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(rh(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function AI(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ba&&s.listener==e&&s.capture==!!n&&s.ha==r)return i}return-1}ih.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=AI(t,e,r,i);return-1<o?(e=t[o],n||(e.ea=!1)):((e=new MY(e,this.src,s,!!r,i)).ea=n,t.push(e)),e};var xI="closure_lm_"+(1e6*Math.random()|0),MI={};function bR(t,e,n,r,i){if(r&&r.once)return CR(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)bR(t,e[s],n,r,i);return null}return n=PI(n),t&&t[Su]?t.N(e,n,Tu(r)?!!r.capture:!!r,i):TR(t,e,n,!1,r,i)}function TR(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Tu(i)?!!i.capture:!!i,a=kI(t);if(a||(t[xI]=a=new ih(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function NY(){const e=kY;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)IY||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(AR(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function CR(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)CR(t,e[s],n,r,i);return null}return n=PI(n),t&&t[Su]?t.O(e,n,Tu(r)?!!r.capture:!!r,i):TR(t,e,n,!0,r,i)}function SR(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)SR(t,e[s],n,r,i);else r=Tu(r)?!!r.capture:!!r,n=PI(n),t&&t[Su]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=AI(s=t.g[e],n,r,i))&&(rh(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=kI(t))&&(e=t.g[e.toString()],t=-1,e&&(t=AI(e,n,r,i)),(n=-1<t?e[t]:null)&&NI(n))}function NI(t){if("number"!=typeof t&&t&&!t.ba){var e=t.src;if(e&&e[Su])SI(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(AR(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=kI(e))?(SI(n,t),0==n.h&&(n.src=null,e[xI]=null)):rh(t)}}}function AR(t){return t in MI?MI[t]:MI[t]="on"+t}function kY(t,e){if(t.ba)t=!0;else{e=new Cu(e,this);var n=t.listener,r=t.ha||t.src;t.ea&&NI(t),t=n.call(r,e)}return t}function kI(t){return(t=t[xI])instanceof ih?t:null}var RI="__closure_events_fn_"+(1e9*Math.random()>>>0);function PI(t){return"function"==typeof t?t:(t[RI]||(t[RI]=function(e){return t.handleEvent(e)}),t[RI])}function ut(){si.call(this),this.i=new ih(this),this.P=this,this.I=null}function vt(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new Rt(e,t);else if(e instanceof Rt)e.target=e.target||t;else{var i=e;DR(e=new Rt(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=sh(o,r,!0,e)&&i}if(i=sh(o=e.g=t,r,!0,e)&&i,i=sh(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=sh(o=e.g=n[s],r,!1,e)&&i}function sh(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ba&&o.capture==n){var a=o.listener,u=o.ha||o.src;o.ea&&SI(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}_t(ut,si),ut.prototype[Su]=!0,ut.prototype.removeEventListener=function(t,e,n,r){SR(this,t,e,n,r)},ut.prototype.M=function(){if(ut.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)rh(n[r]);delete t.g[e],t.h--}}this.I=null},ut.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},ut.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var OI=q.JSON.stringify;function RY(){var t=NR;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var FI,xR=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new OY,t=>t.reset());class OY{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function FY(t){q.setTimeout(()=>{throw t},0)}function MR(t,e){FI||function LY(){var t=q.Promise.resolve(void 0);FI=function(){t.then(VY)}}(),LI||(FI(),LI=!0),NR.add(t,e)}var LI=!1,NR=new class PY{constructor(){this.h=this.g=null}add(e,n){const r=xR.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}};function VY(){for(var t;t=RY();){try{t.h.call(t.g)}catch(n){FY(n)}var e=xR;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}LI=!1}function oh(t,e){ut.call(this),this.h=t||1,this.g=e||q,this.j=kt(this.lb,this),this.l=Date.now()}function VI(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}function BI(t,e,n){if("function"==typeof t)n&&(t=kt(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=kt(t.handleEvent,t)}return 2147483647<Number(e)?-1:q.setTimeout(t,e||0)}function kR(t){t.g=BI(()=>{t.g=null,t.i&&(t.i=!1,kR(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}_t(oh,ut),(O=oh.prototype).ca=!1,O.R=null,O.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),vt(this,"tick"),this.ca&&(VI(this),this.start()))}},O.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},O.M=function(){oh.X.M.call(this),VI(this),delete this.g};class BY extends si{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:kR(this)}M(){super.M(),this.g&&(q.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Au(t){si.call(this),this.h=t,this.g={}}_t(Au,si);var RR=[];function PR(t,e,n,r){Array.isArray(n)||(n&&(RR[0]=n.toString()),n=RR);for(var i=0;i<n.length;i++){var s=bR(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function OR(t){CI(t.g,function(e,n){this.g.hasOwnProperty(n)&&NI(e)},t),t.g={}}function ah(){this.g=!0}function Ao(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function GY(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return OI(n)}catch{return e}}(t,n)+(r?" "+r:"")})}Au.prototype.M=function(){Au.X.M.call(this),OR(this)},Au.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ah.prototype.Aa=function(){this.g=!1},ah.prototype.info=function(){};var Zi={},FR=null;function uh(){return FR=FR||new ut}function LR(t){Rt.call(this,Zi.Pa,t)}function xu(t){const e=uh();vt(e,new LR(e))}function VR(t,e){Rt.call(this,Zi.STAT_EVENT,t),this.stat=e}function Ht(t){const e=uh();vt(e,new VR(e,t))}function BR(t,e){Rt.call(this,Zi.Qa,t),this.size=e}function Mu(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return q.setTimeout(function(){t()},e)}Zi.Pa="serverreachability",_t(LR,Rt),Zi.STAT_EVENT="statevent",_t(VR,Rt),Zi.Qa="timingevent",_t(BR,Rt);var ch={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},UR={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function UI(){}function $R(){}UI.prototype.h=null;var GI,Nu={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function jI(){Rt.call(this,"d")}function $I(){Rt.call(this,"c")}function lh(){}function ku(t,e,n,r){this.l=t,this.j=e,this.m=n,this.U=r||1,this.S=new Au(this),this.O=HY,this.T=new oh(t=II?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new GR}function GR(){this.i=null,this.g="",this.h=!1}_t(jI,Rt),_t($I,Rt),_t(lh,UI),lh.prototype.g=function(){return new XMLHttpRequest},lh.prototype.i=function(){return{}},GI=new lh;var HY=45e3,HI={},dh={};function qI(t,e,n){t.K=1,t.v=gh(Lr(e)),t.s=n,t.P=!0,HR(t,null)}function HR(t,e){t.F=Date.now(),Ru(t),t.A=Lr(t.v);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),eP(n.i,"t",r),t.C=0,n=t.l.H,t.h=new GR,t.g=bP(t.l,n?e:null,!t.s),0<t.N&&(t.L=new BY(kt(t.La,t,t.g),t.N)),PR(t.S,t.g,"readystatechange",t.ib),e=t.H?IR(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),xu(),function UY(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");o=2<=d.length&&"type"==d[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.U,t.s)}function qR(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Da}function zR(t,e,n){let i,r=!0;for(;!t.I&&t.C<n.length;){if(i=qY(t,n),i==dh){4==e&&(t.o=4,Ht(14),r=!1),Ao(t.j,t.m,null,"[Incomplete Response]");break}if(i==HI){t.o=4,Ht(15),Ao(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Ao(t.j,t.m,i,null),zI(t,i)}qR(t)&&i!=dh&&i!=HI&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Ht(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.$&&(t.$=!0,(e=t.l).g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),eE(e),e.K=!0,Ht(11))):(Ao(t.j,t.m,n,"[Invalid Chunked Response]"),es(t),Pu(t))}function qY(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?dh:(n=Number(e.substring(n,r)),isNaN(n)?HI:(r+=1)+n>e.length?dh:(e=e.substr(r,n),t.C=r+n,e))}function Ru(t){t.V=Date.now()+t.O,WR(t,t.O)}function WR(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Mu(kt(t.gb,t),e)}function hh(t){t.B&&(q.clearTimeout(t.B),t.B=null)}function Pu(t){0==t.l.G||t.I||wP(t.l,t)}function es(t){hh(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,VI(t.T),OR(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function zI(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||WI(n.h,t)))if(!t.J&&WI(n.h,t)&&3==n.G){try{var r=n.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break e;Ih(n),vh(n)}ZI(n),Ht(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=Mu(kt(n.cb,n),6e3));if(1>=rP(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else ns(n,11)}else if((t.J||n.g==t)&&Ih(n),!eh(e))for(i=n.Fa.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.I=c[1],n.ka=c[2];const l=c[3];null!=l&&(n.ma=l,n.j.info("VER="+n.ma));const d=c[4];null!=d&&(n.Ca=d,n.j.info("SVER="+n.Ca));const h=c[5];null!=h&&"number"==typeof h&&0<h&&(n.J=r=1.5*h,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.h;s.g||-1==p.indexOf("spdy")&&-1==p.indexOf("quic")&&-1==p.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(KI(s,s.h),s.h=null))}if(r.D){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.za=g,Se(r.F,r.D,g))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms"));var o=t;if((r=n).sa=DP(r,r.H?r.ka:null,r.V),o.J){iP(r.h,o);var a=o,u=r.J;u&&a.setTimeout(u),a.B&&(hh(a),Ru(a)),r.g=o}else _P(r);0<n.i.length&&wh(n)}else"stop"!=c[0]&&"close"!=c[0]||ns(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?ns(n,7):JI(n):"noop"!=c[0]&&n.l&&n.l.wa(c),n.A=0)}xu()}catch{}}function KR(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Jd(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function WY(t){if(t.oa&&"function"==typeof t.oa)return t.oa();if(!t.W||"function"!=typeof t.W){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Jd(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function zY(t){if(t.W&&"function"==typeof t.W)return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(Jd(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(O=ku.prototype).setTimeout=function(t){this.O=t},O.ib=function(t){t=t.target;const e=this.L;e&&3==Vr(t)?e.l():this.La(t)},O.La=function(t){try{if(t==this.g)e:{const l=Vr(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>l)&&(3!=l||II||this.g&&(this.h.h||this.g.fa()||hP(this.g)))){this.I||4!=l||7==e||xu(),hh(this);var n=this.g.aa();this.Y=n;t:if(qR(this)){var r=hP(this.g);t="";var i=r.length,s=4==Vr(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){es(this),Pu(this);var o="";break t}this.h.i=new q.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=200==n,function jY(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.U,l,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!eh(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,Ht(12),es(this),Pu(this);break e}Ao(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,zI(this,n)}this.P?(zR(this,l,o),II&&this.i&&3==l&&(PR(this.S,this.T,"tick",this.hb),this.T.start())):(Ao(this.j,this.m,o,null),zI(this,o)),4==l&&es(this),this.i&&!this.I&&(4==l?wP(this.l,this):(this.i=!1,Ru(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Ht(12)):(this.o=0,Ht(13)),es(this),Pu(this)}}}catch{}},O.hb=function(){if(this.g){var t=Vr(this.g),e=this.g.fa();this.C<e.length&&(hh(this),zR(this,t,e),this.i&&4!=t&&Ru(this))}},O.cancel=function(){this.I=!0,es(this)},O.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(function $Y(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(xu(),Ht(17)),es(this),this.o=2,Pu(this)):WR(this,this.V-t)};var QR=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ts(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ts){this.h=void 0!==e?e:t.h,fh(this,t.j),this.s=t.s,this.g=t.g,ph(this,t.m),this.l=t.l,e=t.i;var n=new Lu;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),YR(this,n),this.o=t.o}else t&&(n=String(t).match(QR))?(this.h=!!e,fh(this,n[1]||"",!0),this.s=Ou(n[2]||""),this.g=Ou(n[3]||"",!0),ph(this,n[4]),this.l=Ou(n[5]||"",!0),YR(this,n[6]||"",!0),this.o=Ou(n[7]||"")):(this.h=!!e,this.i=new Lu(null,this.h))}function Lr(t){return new ts(t)}function fh(t,e,n){t.j=n?Ou(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ph(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function YR(t,e,n){e instanceof Lu?(t.i=e,function eX(t,e){e&&!t.j&&(oi(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(JR(this,r),eP(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=Fu(e,JY)),t.i=new Lu(e,t.h))}function Se(t,e,n){t.i.set(e,n)}function gh(t){return Se(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ou(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Fu(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,QY),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function QY(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ts.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Fu(e,XR,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Fu(e,XR,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Fu(n,"/"==n.charAt(0)?XY:YY,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Fu(n,ZY)),t.join("")};var XR=/[#\/\?@]/g,YY=/[#\?:]/g,XY=/[#\?]/g,JY=/[#\?@]/g,ZY=/#/g;function Lu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function oi(t){t.g||(t.g=new Map,t.h=0,t.i&&function KY(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function JR(t,e){oi(t),e=xo(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function ZR(t,e){return oi(t),e=xo(t,e),t.g.has(e)}function eP(t,e,n){JR(t,e),0<n.length&&(t.i=null,t.g.set(xo(t,e),_I(n)),t.h+=n.length)}function xo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function tP(t){this.l=t||nX,t=q.PerformanceNavigationTiming?0<(t=q.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(q.g&&q.g.Ga&&q.g.Ga()&&q.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(O=Lu.prototype).add=function(t,e){oi(this),this.i=null,t=xo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},O.forEach=function(t,e){oi(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},O.oa=function(){oi(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n},O.W=function(t){oi(this);let e=[];if("string"==typeof t)ZR(this,t)&&(e=e.concat(this.g.get(xo(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},O.set=function(t,e){return oi(this),this.i=null,ZR(this,t=xo(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},O.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},O.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.W(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var nX=10;function nP(t){return!!t.h||!!t.g&&t.g.size>=t.j}function rP(t){return t.h?1:t.g?t.g.size:0}function WI(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function KI(t,e){t.g?t.g.add(e):t.h=e}function iP(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function sP(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return _I(t.i)}function QI(){}function rX(){this.g=new QI}function iX(t,e,n){const r=n||"";try{KR(t,function(i,s){let o=i;Tu(i)&&(o=OI(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function mh(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Vu(t){this.l=t.ac||null,this.j=t.jb||!1}function yh(t,e){ut.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=YI,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}tP.prototype.cancel=function(){if(this.i=sP(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},QI.prototype.stringify=function(t){return q.JSON.stringify(t,void 0)},QI.prototype.parse=function(t){return q.JSON.parse(t,void 0)},_t(Vu,UI),Vu.prototype.g=function(){return new yh(this.l,this.j)},Vu.prototype.i=function(t){return function(){return t}}({}),_t(yh,ut);var YI=0;function oP(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}function Bu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Uu(t)}function Uu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(O=yh.prototype).open=function(t,e){if(this.readyState!=YI)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Uu(this)},O.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||q).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},O.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bu(this)),this.readyState=YI},O.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Uu(this)),this.g&&(this.readyState=3,Uu(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof q.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;oP(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))},O.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Bu(this):Uu(this),3==this.readyState&&oP(this)}},O.Va=function(t){this.g&&(this.response=this.responseText=t,Bu(this))},O.Ua=function(t){this.g&&(this.response=t,Bu(this))},O.ga=function(){this.g&&Bu(this)},O.setRequestHeader=function(t,e){this.v.append(t,e)},O.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},O.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(yh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var oX=q.JSON.parse;function Pe(t){ut.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=aP,this.K=this.L=!1}_t(Pe,ut);var aP="",aX=/^https?$/i,uX=["POST","PUT"];function uP(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,cP(t),_h(t)}function cP(t){t.D||(t.D=!0,vt(t,"complete"),vt(t,"error"))}function lP(t){if(t.h&&typeof mI<"u"&&(!t.C[1]||4!=Vr(t)||2!=t.aa()))if(t.v&&4==Vr(t))BI(t.Ha,0,t);else if(vt(t,"readystatechange"),4==Vr(t)){t.h=!1;try{const a=t.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===a){var i=String(t.H).match(QR)[1]||null;if(!i&&q.self&&q.self.location){var s=q.self.location.protocol;i=s.substr(0,s.length-1)}r=!aX.test(i?i.toLowerCase():"")}n=r}if(n)vt(t,"complete"),vt(t,"success");else{t.m=6;try{var o=2<Vr(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.aa()+"]",cP(t)}}finally{_h(t)}}}function _h(t,e){if(t.g){dP(t);const n=t.g,r=t.C[0]?Xd:null;t.g=null,t.C=null,e||vt(t,"ready");try{n.onreadystatechange=r}catch{}}}function dP(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(q.clearTimeout(t.A),t.A=null)}function Vr(t){return t.g?t.g.readyState:0}function hP(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case aP:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function fP(t){let e="";return CI(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function XI(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=fP(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Se(t,e,n))}function ju(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function pP(t){this.Ca=0,this.i=[],this.j=new ah,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ju("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ju("baseRetryDelayMs",5e3,t),this.bb=ju("retryDelaySeedMs",1e4,t),this.$a=ju("forwardChannelMaxRetries",2,t),this.ta=ju("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new tP(t&&t.concurrentRequestLimit),this.Fa=new rX,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function JI(t){if(gP(t),3==t.G){var e=t.U++,n=Lr(t.F);Se(n,"SID",t.I),Se(n,"RID",e),Se(n,"TYPE","terminate"),$u(t,n),(e=new ku(t,t.j,e,void 0)).K=2,e.v=gh(Lr(n)),n=!1,q.navigator&&q.navigator.sendBeacon&&(n=q.navigator.sendBeacon(e.v.toString(),"")),!n&&q.Image&&((new Image).src=e.v,n=!0),n||(e.g=bP(e.l,null),e.g.da(e.v)),e.F=Date.now(),Ru(e)}EP(t)}function vh(t){t.g&&(eE(t),t.g.cancel(),t.g=null)}function gP(t){vh(t),t.u&&(q.clearTimeout(t.u),t.u=null),Ih(t),t.h.cancel(),t.m&&("number"==typeof t.m&&q.clearTimeout(t.m),t.m=null)}function wh(t){nP(t.h)||t.m||(t.m=!0,MR(t.Ja,t),t.C=0)}function mP(t,e){var n;n=e?e.m:t.U++;const r=Lr(t.F);Se(r,"SID",t.I),Se(r,"RID",n),Se(r,"AID",t.T),$u(t,r),t.o&&t.s&&XI(r,t.o,t.s),n=new ku(t,t.j,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=yP(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),KI(t.h,n),qI(n,r,e)}function $u(t,e){t.ia&&CI(t.ia,function(n,r){Se(e,r,n)}),t.l&&KR({},function(n,r){Se(e,r,n)})}function yP(t,e,n){n=Math.min(t.i.length,n);var r=t.l?kt(t.l.Ra,t.l,t):null;e:{var i=t.i;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let c=i[u].h;const l=i[u].g;if(c-=s,0>c)s=Math.max(0,i[u].h-100),a=!1;else try{iX(l,o,"req"+c+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,r}function _P(t){t.g||t.u||(t.Z=1,MR(t.Ia,t),t.A=0)}function ZI(t){return!(t.g||t.u||3<=t.A||(t.Z++,t.u=Mu(kt(t.Ia,t),IP(t,t.A)),t.A++,0))}function eE(t){null!=t.B&&(q.clearTimeout(t.B),t.B=null)}function vP(t){t.g=new ku(t,t.j,"rpc",t.Z),null===t.o&&(t.g.H=t.s),t.g.N=0;var e=Lr(t.sa);Se(e,"RID","rpc"),Se(e,"SID",t.I),Se(e,"CI",t.L?"0":"1"),Se(e,"AID",t.T),Se(e,"TYPE","xmlhttp"),$u(t,e),t.o&&t.s&&XI(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=gh(Lr(e)),n.s=null,n.P=!0,HR(n,t)}function Ih(t){null!=t.v&&(q.clearTimeout(t.v),t.v=null)}function wP(t,e){var n=null;if(t.g==e){Ih(t),eE(t),t.g=null;var r=2}else{if(!WI(t.h,e))return;n=e.D,iP(t.h,e),r=1}if(0!=t.G)if(t.pa=e.Y,e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;vt(r=uh(),new BR(r,n)),wh(t)}else _P(t);else if(3==(i=e.o)||0==i&&0<t.pa||!(1==r&&function lX(t,e){return!(rP(t.h)>=t.h.j-(t.m?1:0)||(t.m?(t.i=e.D.concat(t.i),0):1==t.G||2==t.G||t.C>=(t.Za?0:t.$a)||(t.m=Mu(kt(t.Ja,t,e),IP(t,t.C)),t.C++,0)))}(t,e)||2==r&&ZI(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),i){case 1:ns(t,5);break;case 4:ns(t,10);break;case 3:ns(t,6);break;default:ns(t,2)}}function IP(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function ns(t,e){if(t.j.info("Error code "+e),2==e){var n=null;t.l&&(n=null);var r=kt(t.kb,t);n||(n=new ts("//www.google.com/images/cleardot.gif"),q.location&&"http"==q.location.protocol||fh(n,"https"),gh(n)),function sX(t,e){const n=new ah;if(q.Image){const r=new Image;r.onload=Zd(mh,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Zd(mh,n,r,"TestLoadImage: error",!1,e),r.onabort=Zd(mh,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Zd(mh,n,r,"TestLoadImage: timeout",!1,e),q.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Ht(2);t.G=0,t.l&&t.l.va(e),EP(t),gP(t)}function EP(t){if(t.G=0,t.la=[],t.l){const e=sP(t.h);(0!=e.length||0!=t.i.length)&&(gR(t.la,e),gR(t.la,t.i),t.h.i.length=0,_I(t.i),t.i.length=0),t.l.ua()}}function DP(t,e,n){var r=n instanceof ts?Lr(n):new ts(n,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),ph(r,r.m);else{var i=q.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new ts(null,void 0);r&&fh(s,r),e&&(s.g=e),i&&ph(s,i),n&&(s.l=n),r=s}return e=t.za,(n=t.D)&&e&&Se(r,n,e),Se(r,"VER",t.ma),$u(t,r),r}function bP(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Pe(n&&t.Da&&!t.ra?new Vu({jb:!0}):t.ra)).Ka(t.H),e}function TP(){}function Eh(){if(So&&!(10<=Number(SY)))throw Error("Environmental error: no available transport.")}function mn(t,e){ut.call(this),this.g=new pP(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!eh(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!eh(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Mo(this)}function CP(t){jI.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function SP(){$I.call(this),this.status=1}function Mo(t){this.g=t}(O=Pe.prototype).Ka=function(t){this.L=t},O.da=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():GI.g(),this.C=function jR(t){return t.h||(t.h=t.i())}(this.u?this.u:GI),this.g.onreadystatechange=kt(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){return void uP(this,s)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())n.set(s,r.get(s))}r=Array.from(n.keys()).find(s=>"content-type"==s.toLowerCase()),i=q.FormData&&t instanceof q.FormData,!(0<=pR(uX,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{dP(this),0<this.B&&((this.K=function cX(t){return So&&function CY(){return function EY(t){var e=TY;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}(function(){let t=0;const e=mR(String(nh)).split("."),n=mR("9").split("."),r=Math.max(e.length,n.length);for(let o=0;0==t&&o<r;o++){var i=e[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;t=vI(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||vI(0==i[2].length,0==s[2].length)||vI(i[2],s[2]),i=i[3],s=s[3]}while(0==t)}return 0<=t})}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=kt(this.qa,this)):this.A=BI(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){uP(this,s)}},O.qa=function(){typeof mI<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vt(this,"timeout"),this.abort(8))},O.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,vt(this,"complete"),vt(this,"abort"),_h(this))},O.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_h(this,!0)),Pe.X.M.call(this)},O.Ha=function(){this.s||(this.F||this.v||this.l?lP(this):this.fb())},O.fb=function(){lP(this)},O.aa=function(){try{return 2<Vr(this)?this.g.status:-1}catch{return-1}},O.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},O.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),oX(e)}},O.Ea=function(){return this.m},O.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(O=pP.prototype).ma=8,O.G=1,O.Ja=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const i=new ku(this,this.j,t,void 0);let s=this.s;if(this.S&&(s?(s=IR(s),DR(s,this.S)):s=this.S),null!==this.o||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=yP(this,i,e),Se(n=Lr(this.F),"RID",t),Se(n,"CVER",22),this.D&&Se(n,"X-HTTP-Session-Id",this.D),$u(this,n),s&&(this.N?e="headers="+encodeURIComponent(String(fP(s)))+"&"+e:this.o&&XI(n,this.o,s)),KI(this.h,i),this.Ya&&Se(n,"TYPE","init"),this.O?(Se(n,"$req",e),Se(n,"SID","null"),i.Z=!0,qI(i,n,null)):qI(i,n,e),this.G=2}}else 3==this.G&&(t?mP(this,t):0==this.i.length||nP(this.h)||mP(this))},O.Ia=function(){if(this.u=null,vP(this),this.$&&!(this.K||null==this.g||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=Mu(kt(this.eb,this),t)}},O.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ht(10),vh(this),vP(this))},O.cb=function(){null!=this.v&&(this.v=null,vh(this),ZI(this),Ht(19))},O.kb=function(t){t?(this.j.info("Successfully pinged google.com"),Ht(2)):(this.j.info("Failed to ping google.com"),Ht(1))},(O=TP.prototype).xa=function(){},O.wa=function(){},O.va=function(){},O.ua=function(){},O.Ra=function(){},Eh.prototype.g=function(t,e){return new mn(t,e)},_t(mn,ut),mn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;Ht(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=DP(t,null,t.V),wh(t)},mn.prototype.close=function(){JI(this.g)},mn.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=OI(t),t=n);e.i.push(new class{constructor(t,e){this.h=t,this.g=e}}(e.ab++,t)),3==e.G&&wh(e)},mn.prototype.M=function(){this.g.l=null,delete this.j,JI(this.g),delete this.g,mn.X.M.call(this)},_t(CP,jI),_t(SP,$I),_t(Mo,TP),Mo.prototype.xa=function(){vt(this.g,"a")},Mo.prototype.wa=function(t){vt(this.g,new CP(t))},Mo.prototype.va=function(t){vt(this.g,new SP)},Mo.prototype.ua=function(){vt(this.g,"b")},Eh.prototype.createWebChannel=Eh.prototype.g,mn.prototype.send=mn.prototype.u,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,ch.NO_ERROR=0,ch.TIMEOUT=8,ch.HTTP_ERROR=6,UR.COMPLETE="complete",$R.EventType=Nu,Nu.OPEN="a",Nu.CLOSE="b",Nu.ERROR="c",Nu.MESSAGE="d",ut.prototype.listen=ut.prototype.N,Pe.prototype.listenOnce=Pe.prototype.O,Pe.prototype.getLastError=Pe.prototype.Oa,Pe.prototype.getLastErrorCode=Pe.prototype.Ea,Pe.prototype.getStatus=Pe.prototype.aa,Pe.prototype.getResponseJson=Pe.prototype.Sa,Pe.prototype.getResponseText=Pe.prototype.fa,Pe.prototype.send=Pe.prototype.da,Pe.prototype.setWithCredentials=Pe.prototype.Ka;var dX=Fr.createWebChannelTransport=function(){return new Eh},hX=Fr.getStatEventTarget=function(){return uh()},tE=Fr.ErrorCode=ch,fX=Fr.EventType=UR,pX=Fr.Event=Zi,AP=Fr.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},gX=Fr.FetchXmlHttpFactory=Vu,Dh=Fr.WebChannel=$R,mX=Fr.XhrIo=Pe;const xP="@firebase/firestore";class ct{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ct.UNAUTHENTICATED=new ct(null),ct.GOOGLE_CREDENTIALS=new ct("google-credentials-uid"),ct.FIRST_PARTY=new ct("first-party-uid"),ct.MOCK_USER=new ct("mock-user");let No="9.17.2";const ai=new _o("@firebase/firestore");function nE(){return ai.logLevel}function T(t,...e){if(ai.logLevel<=oe.DEBUG){const n=e.map(rE);ai.debug(`Firestore (${No}): ${t}`,...n)}}function je(t,...e){if(ai.logLevel<=oe.ERROR){const n=e.map(rE);ai.error(`Firestore (${No}): ${t}`,...n)}}function ko(t,...e){if(ai.logLevel<=oe.WARN){const n=e.map(rE);ai.warn(`Firestore (${No}): ${t}`,...n)}}function rE(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function P(t="Unexpected state"){const e=`FIRESTORE (${No}) INTERNAL ASSERTION FAILED: `+t;throw je(e),new Error(e)}function F(t,e){t||P()}function x(t,e){return t}const w={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class D extends Bn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class it{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class MP{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yX{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ct.UNAUTHENTICATED))}shutdown(){}}class _X{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class vX{constructor(e){this.t=e,this.currentUser=ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let o=new it;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new it,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(m(function*(){yield c.promise,yield s(r.currentUser)}))},u=c=>{T("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(T("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new it)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(T("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(F("string"==typeof r.accessToken),new MP(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return F(null===e||"string"==typeof e),new ct(e)}}class wX{constructor(e,n,r,i){this.h=e,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=ct.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(F(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class IX{constructor(e,n,r,i){this.h=e,this.l=n,this.m=r,this.g=i}getToken(){return Promise.resolve(new wX(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class NP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EX{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const r=s=>{null!=s.error&&T("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.A;return this.A=s.token,T("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{T("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):T("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(F("string"==typeof n.token),this.A=n.token,new NP(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function DX(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class kP{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=DX(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function z(t,e){return t<e?-1:t>e?1:0}function Ro(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}class Ne{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new D(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new D(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new D(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new D(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ne.fromMillis(Date.now())}static fromDate(e){return Ne.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ne(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?z(this.nanoseconds,e.nanoseconds):z(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class V{constructor(e){this.timestamp=e}static fromTimestamp(e){return new V(e)}static min(){return new V(new Ne(0,0))}static max(){return new V(new Ne(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Gu{constructor(e,n,r){void 0===n?n=0:n>e.length&&P(),void 0===r?r=e.length-n:r>e.length-n&&P(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===Gu.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ae extends Gu{construct(e,n,r){return new ae(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new D(w.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ae(n)}static emptyPath(){return new ae([])}}const bX=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $e extends Gu{construct(e,n,r){return new $e(e,n,r)}static isValidIdentifier(e){return bX.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$e.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new $e(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new D(w.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new D(w.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new D(w.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new D(w.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $e(n)}static emptyPath(){return new $e([])}}class A{constructor(e){this.path=e}static fromPath(e){return new A(ae.fromString(e))}static fromName(e){return new A(ae.fromString(e).popFirst(5))}static empty(){return new A(ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ae.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new A(new ae(e.slice()))}}function OP(t){return new yn(t.readTime,t.key,-1)}class yn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new yn(V.min(),A.empty(),-1)}static max(){return new yn(V.max(),A.empty(),-1)}}function sE(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=A.comparator(t.documentKey,e.documentKey),0!==n?n:z(t.largestBatchId,e.largestBatchId))}const FP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SX{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ui(t){return oE.apply(this,arguments)}function oE(){return oE=m(function*(t){if(t.code!==w.FAILED_PRECONDITION||t.message!==FP)throw t;T("LocalStore","Unexpectedly lost primary lease")}),oE.apply(this,arguments)}class _{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&P(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new _((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof _?n:_.resolve(n)}catch(n){return _.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):_.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):_.reject(n)}static resolve(e){return new _((n,r)=>{n(e)})}static reject(e){return new _((n,r)=>{r(e)})}static waitFor(e){return new _((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=_.resolve(!1);for(const r of e)n=n.next(i=>i?_.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new _((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(l=>{o[c]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new _((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}function ci(t){return"IndexedDbTransactionError"===t.name}let _n=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>r.writeSequenceNumber(i))}ut(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.ct&&this.ct(n),n}}return t.at=-1,t})();class PX{constructor(e,n,r,i,s,o,a,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=u}}class ss{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ss("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ss&&e.projectId===this.projectId&&e.database===this.database}}function VP(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function os(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function BP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function zu(t){return null==t}function Wu(t){return 0===t&&1/t==-1/0}class OX extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class st{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw i instanceof DOMException?new OX("Invalid base64 string: "+i):i}}(e);return new st(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new st(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return z(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}st.EMPTY_BYTE_STRING=new st("");const FX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function li(t){if(F(!!t),"string"==typeof t){let e=0;const n=FX.exec(t);if(F(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(t.seconds),nanos:Oe(t.nanos)}}function Oe(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function as(t){return"string"==typeof t?st.fromBase64String(t):st.fromUint8Array(t)}function cE(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function jP(t){const e=t.mapValue.fields.__previous_value__;return cE(e)?jP(e):e}function Ku(t){const e=li(t.mapValue.fields.__local_write_time__.timestampValue);return new Ne(e.seconds,e.nanos)}const di={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function us(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cE(t)?4:qP(t)?9007199254740991:10:P()}function sr(t,e){if(t===e)return!0;const n=us(t);if(n!==us(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ku(t).isEqual(Ku(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=li(r.timestampValue),o=li(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return i=e,as(t.bytesValue).isEqual(as(i.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Oe(r.geoPointValue.latitude)===Oe(i.geoPointValue.latitude)&&Oe(r.geoPointValue.longitude)===Oe(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Oe(r.integerValue)===Oe(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Oe(r.doubleValue),o=Oe(i.doubleValue);return s===o?Wu(s)===Wu(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return Ro(t.arrayValue.values||[],e.arrayValue.values||[],sr);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(VP(s)!==VP(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(void 0===o[a]||!sr(s[a],o[a])))return!1;return!0}(t,e);default:return P()}var i}function Qu(t,e){return void 0!==(t.values||[]).find(n=>sr(n,e))}function hi(t,e){if(t===e)return 0;const n=us(t),r=us(e);if(n!==r)return z(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return z(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=Oe(i.integerValue||i.doubleValue),a=Oe(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return $P(t.timestampValue,e.timestampValue);case 4:return $P(Ku(t),Ku(e));case 5:return z(t.stringValue,e.stringValue);case 6:return function(i,s){const o=as(i),a=as(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let u=0;u<o.length&&u<a.length;u++){const c=z(o[u],a[u]);if(0!==c)return c}return z(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=z(Oe(i.latitude),Oe(s.latitude));return 0!==o?o:z(Oe(i.longitude),Oe(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let u=0;u<o.length&&u<a.length;++u){const c=hi(o[u],a[u]);if(c)return c}return z(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===di.mapValue&&s===di.mapValue)return 0;if(i===di.mapValue)return 1;if(s===di.mapValue)return-1;const o=i.fields||{},a=Object.keys(o),u=s.fields||{},c=Object.keys(u);a.sort(),c.sort();for(let l=0;l<a.length&&l<c.length;++l){const d=z(a[l],c[l]);if(0!==d)return d;const h=hi(o[a[l]],u[c[l]]);if(0!==h)return h}return z(a.length,c.length)}(t.mapValue,e.mapValue);default:throw P()}}function $P(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return z(t,e);const n=li(t),r=li(e),i=z(n.seconds,r.seconds);return 0!==i?i:z(n.nanos,r.nanos)}function Po(t){return lE(t)}function lE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=li(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?as(t.bytesValue).toBase64():"referenceValue"in t?A.fromName(t.referenceValue).toString():"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=lE(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${lE(r.fields[a])}`;return s+"}"}(t.mapValue):P();var e}function dE(t){return!!t&&"integerValue"in t}function Yu(t){return!!t&&"arrayValue"in t}function GP(t){return!!t&&"nullValue"in t}function HP(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ah(t){return!!t&&"mapValue"in t}function Xu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return os(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Xu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Xu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function qP(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class fi{constructor(e,n){this.position=e,this.inclusive=n}}function KP(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?A.comparator(A.fromName(o.referenceValue),n.key):hi(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function QP(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!sr(t.position[n],e.position[n]))return!1;return!0}class YP{}class ne extends YP{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new BX(e,n,r):"array-contains"===n?new $X(e,r):"in"===n?new nO(e,r):"not-in"===n?new GX(e,r):"array-contains-any"===n?new HX(e,r):new ne(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new UX(e,r):new jX(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(hi(n,this.value)):null!==n&&us(this.value)===us(n)&&this.matchesComparison(hi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return P()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class pe extends YP{constructor(e,n){super(),this.filters=e,this.op=n,this.ft=null}static create(e,n){return new pe(e,n)}matches(e){return Oo(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ft||(this.ft=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(n=>n.isInequality());return null!==e?e.field:null}dt(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function Oo(t){return"and"===t.op}function fE(t){return function XP(t){for(const e of t.filters)if(e instanceof pe)return!1;return!0}(t)&&Oo(t)}function pE(t){if(t instanceof ne)return t.field.canonicalString()+t.op.toString()+Po(t.value);if(fE(t))return t.filters.map(e=>pE(e)).join(",");{const e=t.filters.map(n=>pE(n)).join(",");return`${t.op}(${e})`}}function JP(t,e){return t instanceof ne?(n=t,(r=e)instanceof ne&&n.op===r.op&&n.field.isEqual(r.field)&&sr(n.value,r.value)):t instanceof pe?function(n,r){return r instanceof pe&&n.op===r.op&&n.filters.length===r.filters.length&&n.filters.reduce((i,s,o)=>i&&JP(s,r.filters[o]),!0)}(t,e):void P();var n,r}function eO(t){return t instanceof ne?function(e){return`${e.field.canonicalString()} ${e.op} ${Po(e.value)}`}(t):t instanceof pe?function(e){return e.op.toString()+" {"+e.getFilters().map(eO).join(" ,")+"}"}(t):"Filter"}class BX extends ne{constructor(e,n,r){super(e,n,r),this.key=A.fromName(r.referenceValue)}matches(e){const n=A.comparator(e.key,this.key);return this.matchesComparison(n)}}class UX extends ne{constructor(e,n){super(e,"in",n),this.keys=tO(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class jX extends ne{constructor(e,n){super(e,"not-in",n),this.keys=tO(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function tO(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>A.fromName(r.referenceValue))}class $X extends ne{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Yu(n)&&Qu(n.arrayValue,this.value)}}class nO extends ne{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Qu(this.value.arrayValue,n)}}class GX extends ne{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Qu(this.value.arrayValue,n)}}class HX extends ne{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Yu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Qu(this.value.arrayValue,r))}}class Fo{constructor(e,n="asc"){this.field=e,this.dir=n}}function qX(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Fe{constructor(e,n){this.comparator=e,this.root=n||wt.EMPTY}insert(e,n){return new Fe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wt.BLACK,null,null))}remove(e){return new Fe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xh(this.root,e,this.comparator,!1)}getReverseIterator(){return new xh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xh(this.root,e,this.comparator,!0)}}class xh{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??wt.RED,this.left=i??wt.EMPTY,this.right=s??wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new wt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return wt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw P();const e=this.left.check();if(e!==this.right.check())throw P();return e+(this.isRed()?0:1)}}wt.EMPTY=null,wt.RED=!0,wt.BLACK=!1,wt.EMPTY=new class{constructor(){this.size=0}get key(){throw P()}get value(){throw P()}get color(){throw P()}get left(){throw P()}get right(){throw P()}copy(t,e,n,r,i){return this}insert(t,e,n){return new wt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class me{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new rO(this.data.getIterator())}getIteratorFrom(e){return new rO(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof me)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new me(this.comparator);return n.data=e,n}}class rO{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class nn{constructor(e){this.fields=e,e.sort($e.comparator)}static empty(){return new nn([])}unionWith(e){let n=new me($e.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new nn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ro(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class lt{constructor(e){this.value=e}static empty(){return new lt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ah(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xu(n)}setAll(e){let n=$e.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Xu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Ah(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return sr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ah(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){os(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new lt(Xu(this.value))}}function iO(t){const e=[];return os(t.fields,(n,r)=>{const i=new $e([n]);if(Ah(r)){const s=iO(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new nn(e)}class De{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new De(e,0,V.min(),V.min(),V.min(),lt.empty(),0)}static newFoundDocument(e,n,r,i){return new De(e,1,n,V.min(),r,i,0)}static newNoDocument(e,n){return new De(e,2,n,V.min(),V.min(),lt.empty(),0)}static newUnknownDocument(e,n){return new De(e,3,n,V.min(),V.min(),lt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(V.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=lt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=lt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=V.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof De&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new De(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class zX{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this._t=null}}function gE(t,e=null,n=[],r=[],i=null,s=null,o=null){return new zX(t,e,n,r,i,s,o)}function ls(t){const e=x(t);if(null===e._t){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>pE(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),zu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Po(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Po(r)).join(",")),e._t=n}return e._t}function Ju(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!qX(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!JP(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!QP(t.startAt,e.startAt)&&QP(t.endAt,e.endAt)}function Mh(t){return A.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Br{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.wt=null,this.gt=null}}function Vo(t){return new Br(t)}function uO(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function ds(t){const e=x(t);if(null===e.wt){e.wt=[];const n=function kh(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(null!==n)return n}return null}(e),r=function mE(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}(e);if(null!==n&&null===r)n.isKeyField()||e.wt.push(new Fo(n)),e.wt.push(new Fo($e.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Fo($e.keyField(),s))}}}return e.wt}function qt(t){const e=x(t);if(!e.gt)if("F"===e.limitType)e.gt=gE(e.path,e.collectionGroup,ds(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of ds(e))n.push(new Fo(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new fi(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new fi(e.startAt.position,e.startAt.inclusive):null;e.gt=gE(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e.gt}function Rh(t,e,n){return new Br(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zu(t,e){return Ju(qt(t),qt(e))&&t.limitType===e.limitType}function cO(t){return`${ls(qt(t))}|lt:${t.limitType}`}function vE(t){return`Query(target=${function(e){let n=e.path.canonicalString();return null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>eO(r)).join(", ")}]`),zu(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Po(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Po(r)).join(",")),`Target(${n})`}(qt(t))}; limitType=${t.limitType})`}function ec(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return null!==n.collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):A.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of ds(n))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&(r=e,!((n=t).startAt&&!function(i,s,o){const a=KP(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,ds(n),r)||n.endAt&&!function(i,s,o){const a=KP(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,ds(n),r)));var n,r}function dO(t){return(e,n)=>{let r=!1;for(const i of ds(t)){const s=WX(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function WX(t,e,n){const r=t.field.isKeyField()?A.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),u=o.data.field(i);return null!==a&&null!==u?hi(a,u):P()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return P()}}function hO(t,e){if(t.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wu(e)?"-0":e}}function fO(t){return{integerValue:""+t}}function pO(t,e){return function UP(t){return"number"==typeof t&&Number.isInteger(t)&&!Wu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?fO(e):hO(t,e)}class Ph{constructor(){this._=void 0}}function KX(t,e,n){return t instanceof Bo?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof hs?mO(t,e):t instanceof fs?yO(t,e):function(r,i){const s=gO(r,i),o=_O(s)+_O(r.It);return dE(s)&&dE(r.It)?fO(o):hO(r.Tt,o)}(t,e)}function QX(t,e,n){return t instanceof hs?mO(t,e):t instanceof fs?yO(t,e):n}function gO(t,e){return t instanceof Uo?dE(n=e)||(r=n)&&"doubleValue"in r?e:{integerValue:0}:null;var r,n}class Bo extends Ph{}class hs extends Ph{constructor(e){super(),this.elements=e}}function mO(t,e){const n=vO(e);for(const r of t.elements)n.some(i=>sr(i,r))||n.push(r);return{arrayValue:{values:n}}}class fs extends Ph{constructor(e){super(),this.elements=e}}function yO(t,e){let n=vO(e);for(const r of t.elements)n=n.filter(i=>!sr(i,r));return{arrayValue:{values:n}}}class Uo extends Ph{constructor(e,n){super(),this.Tt=e,this.It=n}}function _O(t){return Oe(t.integerValue||t.doubleValue)}function vO(t){return Yu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class XX{constructor(e,n){this.version=e,this.transformResults=n}}class Ae{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ae}static exists(e){return new Ae(void 0,e)}static updateTime(e){return new Ae(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Oh(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Fh{}function wO(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new $o(t.key,Ae.none()):new jo(t.key,t.data,Ae.none());{const n=t.data,r=lt.empty();let i=new me($e.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Ur(t.key,r,new nn(i.toArray()),Ae.none())}}function JX(t,e,n){t instanceof jo?function(r,i,s){const o=r.value.clone(),a=DO(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Ur?function(r,i,s){if(!Oh(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=DO(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(EO(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function nc(t,e,n,r){return t instanceof jo?function(i,s,o,a){if(!Oh(i.precondition,s))return o;const u=i.value.clone(),c=bO(i.fieldTransforms,a,s);return u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ur?function(i,s,o,a){if(!Oh(i.precondition,s))return o;const u=bO(i.fieldTransforms,a,s),c=s.data;return c.setAll(EO(i)),c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null===o?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(l=>l.field))}(t,e,n,r):(o=n,Oh(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function ZX(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=gO(r.transform,i||null);null!=s&&(null===n&&(n=lt.empty()),n.set(r.field,s))}return n||null}function IO(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(n=t.fieldTransforms)&&void 0===r||n&&r&&Ro(n,r,(i,s)=>function YX(t,e){return t.field.isEqual(e.field)&&(r=e.transform,(n=t.transform)instanceof hs&&r instanceof hs||n instanceof fs&&r instanceof fs?Ro(n.elements,r.elements,sr):n instanceof Uo&&r instanceof Uo?sr(n.It,r.It):n instanceof Bo&&r instanceof Bo);var n,r}(i,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}class jo extends Fh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ur extends Fh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function EO(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function DO(t,e,n){const r=new Map;F(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,QX(o,a,n[i]))}return r}function bO(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,KX(s,o,e))}return r}class $o extends Fh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wE extends Fh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class eJ{constructor(e){this.count=e}}var Ye,ue;function CO(t){if(void 0===t)return je("GRPC error has no .code"),w.UNKNOWN;switch(t){case Ye.OK:return w.OK;case Ye.CANCELLED:return w.CANCELLED;case Ye.UNKNOWN:return w.UNKNOWN;case Ye.DEADLINE_EXCEEDED:return w.DEADLINE_EXCEEDED;case Ye.RESOURCE_EXHAUSTED:return w.RESOURCE_EXHAUSTED;case Ye.INTERNAL:return w.INTERNAL;case Ye.UNAVAILABLE:return w.UNAVAILABLE;case Ye.UNAUTHENTICATED:return w.UNAUTHENTICATED;case Ye.INVALID_ARGUMENT:return w.INVALID_ARGUMENT;case Ye.NOT_FOUND:return w.NOT_FOUND;case Ye.ALREADY_EXISTS:return w.ALREADY_EXISTS;case Ye.PERMISSION_DENIED:return w.PERMISSION_DENIED;case Ye.FAILED_PRECONDITION:return w.FAILED_PRECONDITION;case Ye.ABORTED:return w.ABORTED;case Ye.OUT_OF_RANGE:return w.OUT_OF_RANGE;case Ye.UNIMPLEMENTED:return w.UNIMPLEMENTED;case Ye.DATA_LOSS:return w.DATA_LOSS;default:return P()}}(ue=Ye||(Ye={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";class pi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){os(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return BP(this.inner)}size(){return this.innerSize}}const tJ=new Fe(A.comparator);function rn(){return tJ}const SO=new Fe(A.comparator);function rc(...t){let e=SO;for(const n of t)e=e.insert(n.key,n);return e}function AO(t){let e=SO;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function or(){return ic()}function xO(){return ic()}function ic(){return new pi(t=>t.toString(),(t,e)=>t.isEqual(e))}const nJ=new Fe(A.comparator),rJ=new me(A.comparator);function X(...t){let e=rJ;for(const n of t)e=e.add(n);return e}const iJ=new me(z);function Lh(){return iJ}class sc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,oc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new sc(V.min(),i,Lh(),rn(),X())}}class oc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new oc(r,n,X(),X(),X())}}class Vh{constructor(e,n,r,i){this.Et=e,this.removedTargetIds=n,this.key=r,this.At=i}}class MO{constructor(e,n){this.targetId=e,this.Rt=n}}class NO{constructor(e,n,r=st.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class kO{constructor(){this.bt=0,this.vt=PO(),this.Pt=st.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.Pt}get Dt(){return 0!==this.bt}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.Pt=e)}Nt(){let e=X(),n=X(),r=X();return this.vt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:P()}}),new oc(this.Pt,this.Vt,e,n,r)}kt(){this.St=!1,this.vt=PO()}Ot(e,n){this.St=!0,this.vt=this.vt.insert(e,n)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ft(){this.bt+=1}$t(){this.bt-=1}Bt(){this.St=!0,this.Vt=!0}}class sJ{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=rn(),this.Kt=RO(),this.Gt=new me(z)}Qt(e){for(const n of e.Et)e.At&&e.At.isFoundDocument()?this.jt(n,e.At):this.zt(n,e.key,e.At);for(const n of e.removedTargetIds)this.zt(n,e.key,e.At)}Wt(e){this.forEachTarget(e,n=>{const r=this.Ht(n);switch(e.state){case 0:this.Jt(n)&&r.xt(e.resumeToken);break;case 1:r.$t(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.$t(),r.Dt||this.removeTarget(n);break;case 3:this.Jt(n)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:this.Jt(n)&&(this.Yt(n),r.xt(e.resumeToken));break;default:P()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qt.forEach((r,i)=>{this.Jt(i)&&n(i)})}Zt(e){const n=e.targetId,r=e.Rt.count,i=this.Xt(n);if(i){const s=i.target;if(Mh(s))if(0===r){const o=new A(s.path);this.zt(n,o,De.newNoDocument(o,V.min()))}else F(1===r);else this.te(n)!==r&&(this.Yt(n),this.Gt=this.Gt.add(n))}}ee(e){const n=new Map;this.qt.forEach((s,o)=>{const a=this.Xt(o);if(a){if(s.current&&Mh(a.target)){const u=new A(a.target.path);null!==this.Ut.get(u)||this.ne(o,u)||this.zt(o,u,De.newNoDocument(u,e))}s.Ct&&(n.set(o,s.Nt()),s.kt())}});let r=X();this.Kt.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.Xt(u);return!c||2===c.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.Ut.forEach((s,o)=>o.setReadTime(e));const i=new sc(e,n,this.Gt,this.Ut,r);return this.Ut=rn(),this.Kt=RO(),this.Gt=new me(z),i}jt(e,n){if(!this.Jt(e))return;const r=this.ne(e,n.key)?2:0;this.Ht(e).Ot(n.key,r),this.Ut=this.Ut.insert(n.key,n),this.Kt=this.Kt.insert(n.key,this.se(n.key).add(e))}zt(e,n,r){if(!this.Jt(e))return;const i=this.Ht(e);this.ne(e,n)?i.Ot(n,1):i.Mt(n),this.Kt=this.Kt.insert(n,this.se(n).delete(e)),r&&(this.Ut=this.Ut.insert(n,r))}removeTarget(e){this.qt.delete(e)}te(e){const n=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ft(e){this.Ht(e).Ft()}Ht(e){let n=this.qt.get(e);return n||(n=new kO,this.qt.set(e,n)),n}se(e){let n=this.Kt.get(e);return n||(n=new me(z),this.Kt=this.Kt.insert(e,n)),n}Jt(e){const n=null!==this.Xt(e);return n||T("WatchChangeAggregator","Detected inactive target",e),n}Xt(e){const n=this.qt.get(e);return n&&n.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new kO),this.Lt.getRemoteKeysForTarget(e).forEach(n=>{this.zt(e,n,null)})}ne(e,n){return this.Lt.getRemoteKeysForTarget(e).has(n)}}function RO(){return new Fe(A.comparator)}function PO(){return new Fe(A.comparator)}const oJ={asc:"ASCENDING",desc:"DESCENDING"},aJ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uJ={and:"AND",or:"OR"};class cJ{constructor(e,n){this.databaseId=e,this.yt=n}}function Go(t,e){return t.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OO(t,e){return t.yt?e.toBase64():e.toUint8Array()}function lJ(t,e){return Go(t,e.toTimestamp())}function Ge(t){return F(!!t),V.fromTimestamp(function(e){const n=li(e);return new Ne(n.seconds,n.nanos)}(t))}function IE(t,e){return(n=t,new ae(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function FO(t){const e=ae.fromString(t);return F(qO(e)),e}function ac(t,e){return IE(t.databaseId,e.path)}function ar(t,e){const n=FO(e);if(n.get(1)!==t.databaseId.projectId)throw new D(w.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new D(w.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new A(VO(n))}function EE(t,e){return IE(t.databaseId,e)}function uc(t){return new ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function VO(t){return F(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function BO(t,e,n){return{name:ac(t,e),fields:n.value.mapValue.fields}}function jO(t,e){return{documents:[EE(t,e.path)]}}function bE(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=EE(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=EE(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(0!==u.length)return HO(pe.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(0!==u.length)return u.map(c=>{return{field:gi((l=c).field),direction:gJ(l.dir)};var l})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=(c=e.limit,t.yt||zu(c)?c:{value:c});var c,a,u;return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt={before:!(u=e.endAt).inclusive,values:u.position}),n}function $O(t){let e=function LO(t){const e=FO(t);return 4===e.length?ae.emptyPath():VO(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){F(1===r);const l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(l){const d=GO(l);return d instanceof pe&&fE(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(l=>{return new Fo(Ho((d=l).field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction));var d}));let a=null;n.limit&&(a=function(l){let d;return d="object"==typeof l?l.value:l,zu(d)?null:d}(n.limit));let u=null;var l;n.startAt&&(u=new fi((l=n.startAt).values||[],!!l.before));let c=null;return n.endAt&&(c=function(l){return new fi(l.values||[],!l.before)}(n.endAt)),function aO(t,e,n,r,i,s,o,a){return new Br(t,e,n,r,i,s,o,a)}(e,i,o,s,a,"F",u,c)}function GO(t){return void 0!==t.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Ho(e.unaryFilter.field);return ne.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Ho(e.unaryFilter.field);return ne.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ho(e.unaryFilter.field);return ne.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Ho(e.unaryFilter.field);return ne.create(s,"!=",{nullValue:"NULL_VALUE"});default:return P()}}(t):void 0!==t.fieldFilter?function(e){return ne.create(Ho(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return P()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(e){return pe.create(e.compositeFilter.filters.map(n=>GO(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return P()}}(e.compositeFilter.op))}(t):P()}function gJ(t){return oJ[t]}function mJ(t){return aJ[t]}function yJ(t){return uJ[t]}function gi(t){return{fieldPath:t.canonicalString()}}function Ho(t){return $e.fromServerFormat(t.fieldPath)}function HO(t){return t instanceof ne?function(e){if("=="===e.op){if(HP(e.value))return{unaryFilter:{field:gi(e.field),op:"IS_NAN"}};if(GP(e.value))return{unaryFilter:{field:gi(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(HP(e.value))return{unaryFilter:{field:gi(e.field),op:"IS_NOT_NAN"}};if(GP(e.value))return{unaryFilter:{field:gi(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gi(e.field),op:mJ(e.op),value:e.value}}}(t):t instanceof pe?function(e){const n=e.getFilters().map(r=>HO(r));return 1===n.length?n[0]:{compositeFilter:{op:yJ(e.op),filters:n}}}(t):P()}function _J(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function qO(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class CE{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&JX(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=nc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=nc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=xO();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=wO(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(V.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),X())}isEqual(e){return this.batchId===e.batchId&&Ro(this.mutations,e.mutations,(n,r)=>IO(n,r))&&Ro(this.baseMutations,e.baseMutations,(n,r)=>IO(n,r))}}class SE{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){F(e.mutations.length===r.length);let i=nJ;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new SE(e,n,r,i)}}class AE{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class mi{constructor(e,n,r,i,s=V.min(),o=V.min(),a=st.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new mi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new mi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class JO{constructor(e){this.oe=e}}function xE(t){const e=$O({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Rh(e,e.limit,"L"):e}class ys{constructor(){}ae(e,n){this.he(e,n),n.le()}he(e,n){if("nullValue"in e)this.fe(n,5);else if("booleanValue"in e)this.fe(n,10),n.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(n,15),n.de(Oe(e.integerValue));else if("doubleValue"in e){const r=Oe(e.doubleValue);isNaN(r)?this.fe(n,13):(this.fe(n,15),Wu(r)?n.de(0):n.de(r))}else if("timestampValue"in e){const r=e.timestampValue;this.fe(n,20),"string"==typeof r?n._e(r):(n._e(`${r.seconds||""}`),n.de(r.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,n),this.me(n);else if("bytesValue"in e)this.fe(n,30),n.ge(as(e.bytesValue)),this.me(n);else if("referenceValue"in e)this.ye(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.fe(n,45),n.de(r.latitude||0),n.de(r.longitude||0)}else"mapValue"in e?qP(e)?this.fe(n,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,n),this.me(n)):"arrayValue"in e?(this.Ie(e.arrayValue,n),this.me(n)):P()}we(e,n){this.fe(n,25),this.Te(e,n)}Te(e,n){n._e(e)}pe(e,n){const r=e.fields||{};this.fe(n,55);for(const i of Object.keys(r))this.we(i,n),this.he(r[i],n)}Ie(e,n){const r=e.values||[];this.fe(n,50);for(const i of r)this.he(i,n)}ye(e,n){this.fe(n,37),A.fromName(e).path.forEach(r=>{this.fe(n,60),this.Te(r,n)})}fe(e,n){e.de(n)}me(e){e.de(2)}}ys.Ee=new ys;class qJ{constructor(){this.Ze=new OE}addToCollectionParentIndex(e,n){return this.Ze.add(n),_.resolve()}getCollectionParents(e,n){return _.resolve(this.Ze.getEntries(n))}addFieldIndex(e,n){return _.resolve()}deleteFieldIndex(e,n){return _.resolve()}getDocumentsMatchingTarget(e,n){return _.resolve(null)}getIndexType(e,n){return _.resolve(0)}getFieldIndexes(e,n){return _.resolve([])}getNextCollectionGroupToUpdate(e){return _.resolve(null)}getMinOffset(e,n){return _.resolve(yn.min())}getMinOffsetFromCollectionGroup(e,n){return _.resolve(yn.min())}updateCollectionGroup(e,n,r){return _.resolve()}updateIndexEntries(e,n){return _.resolve()}}class OE{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new me(ae.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new me(ae.comparator)).toArray()}}new Uint8Array(0);class sn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new sn(e,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(41943040,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);class vs{constructor(e){this.Pn=e}next(){return this.Pn+=2,this.Pn}static Vn(){return new vs(0)}static Sn(){return new vs(-1)}}class JJ{constructor(){this.changes=new pi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,De.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?_.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class tZ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class EF{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&nc(r.mutation,i,nn.empty(),Ne.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,X()).next(()=>r))}getLocalViewOfDocuments(e,n,r=X()){const i=or();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=rc();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=or();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,X()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=rn();const o=ic(),a=ic();return n.forEach((u,c)=>{const l=r.get(c.key);i.has(c.key)&&(void 0===l||l.mutation instanceof Ur)?s=s.insert(c.key,c):void 0!==l?(o.set(c.key,l.mutation.getFieldMask()),nc(l.mutation,c,l.mutation.getFieldMask(),Ne.now())):o.set(c.key,nn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,l)=>o.set(c,l)),n.forEach((c,l)=>{var d;return a.set(c,new tZ(l,null!==(d=o.get(c))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ic();let i=new Fe((o,a)=>o-a),s=X();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(null===c)return;let l=r.get(u)||nn.empty();l=a.applyToLocalView(c,l),r.set(u,l);const d=(i.get(a.batchId)||X()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,l=u.value,d=xO();l.forEach(h=>{if(!s.has(h)){const f=wO(n.get(h),r.get(h));null!==f&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return _.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return A.isDocumentKey((i=n).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):function yE(t){return null!==t.collectionGroup}(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r);var i}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):_.resolve(or());let a=-1,u=s;return o.next(c=>_.forEach(c,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(l)?_.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{u=u.insert(l,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,X())).next(l=>({batchId:a,changes:AO(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new A(n)).next(r=>{let i=rc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=rc();return this.indexManager.getCollectionParents(e,i).next(o=>_.forEach(o,a=>{const u=(c=n,l=a.child(i),new Br(l,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt));var c,l;return this.getDocumentsMatchingCollectionQuery(e,u,r).next(c=>{c.forEach((l,d)=>{s=s.insert(l,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((a,u)=>{const c=u.getKey();null===s.get(c)&&(s=s.insert(c,De.newInvalidDocument(c)))});let o=rc();return s.forEach((a,u)=>{const c=i.get(a);void 0!==c&&nc(c.mutation,u,nn.empty(),Ne.now()),ec(n,u)&&(o=o.insert(a,u))}),o})}}class nZ{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,n){return _.resolve(this.es.get(n))}saveBundleMetadata(e,n){var r;return this.es.set(n.id,{id:(r=n).id,version:r.version,createTime:Ge(r.createTime)}),_.resolve()}getNamedQuery(e,n){return _.resolve(this.ns.get(n))}saveNamedQuery(e,n){return this.ns.set(n.name,{name:(r=n).name,query:xE(r.bundledQuery),readTime:Ge(r.readTime)}),_.resolve();var r}}class rZ{constructor(){this.overlays=new Fe(A.comparator),this.ss=new Map}getOverlay(e,n){return _.resolve(this.overlays.get(n))}getOverlays(e,n){const r=or();return _.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ce(e,n,s)}),_.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.ss.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ss.delete(r)),_.resolve()}getOverlaysForCollection(e,n,r){const i=or(),s=n.length+1,o=new A(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return _.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Fe((c,l)=>c-l);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let l=s.get(c.largestBatchId);null===l&&(l=or(),s=s.insert(c.largestBatchId,l)),l.set(c.getKey(),c)}}const a=or(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,l)=>a.set(c,l)),!(a.size()>=i)););return _.resolve(a)}ce(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.ss.get(i.largestBatchId).delete(r.key);this.ss.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new AE(n,r));let s=this.ss.get(n);void 0===s&&(s=X(),this.ss.set(n,s)),this.ss.set(n,s.add(r.key))}}class FE{constructor(){this.rs=new me(ht.os),this.us=new me(ht.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,n){const r=new ht(e,n);this.rs=this.rs.add(r),this.us=this.us.add(r)}hs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ls(new ht(e,n))}fs(e,n){e.forEach(r=>this.removeReference(r,n))}ds(e){const n=new A(new ae([])),r=new ht(n,e),i=new ht(n,e+1),s=[];return this.us.forEachInRange([r,i],o=>{this.ls(o),s.push(o.key)}),s}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const n=new A(new ae([])),r=new ht(n,e),i=new ht(n,e+1);let s=X();return this.us.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ht(e,0),r=this.rs.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class ht{constructor(e,n){this.key=e,this.gs=n}static os(e,n){return A.comparator(e.key,n.key)||z(e.gs,n.gs)}static cs(e,n){return z(e.gs,n.gs)||A.comparator(e.key,n.key)}}class iZ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ys=1,this.ps=new me(ht.os)}checkEmpty(e){return _.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.ys;this.ys++;const o=new CE(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.ps=this.ps.add(new ht(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return _.resolve(o)}lookupMutationBatch(e,n){return _.resolve(this.Is(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.Ts(n+1),s=i<0?0:i;return _.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return _.resolve(0===this.mutationQueue.length?-1:this.ys-1)}getAllMutationBatches(e){return _.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ht(n,0),i=new ht(n,Number.POSITIVE_INFINITY),s=[];return this.ps.forEachInRange([r,i],o=>{const a=this.Is(o.gs);s.push(a)}),_.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new me(z);return n.forEach(i=>{const s=new ht(i,0),o=new ht(i,Number.POSITIVE_INFINITY);this.ps.forEachInRange([s,o],a=>{r=r.add(a.gs)})}),_.resolve(this.Es(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;A.isDocumentKey(s)||(s=s.child(""));const o=new ht(new A(s),0);let a=new me(z);return this.ps.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.gs)),!0)},o),_.resolve(this.Es(a))}Es(e){const n=[];return e.forEach(r=>{const i=this.Is(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){F(0===this.As(n.batchId,"removed")),this.mutationQueue.shift();let r=this.ps;return _.forEach(n.mutations,i=>{const s=new ht(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ps=r})}bn(e){}containsKey(e,n){const r=new ht(n,0),i=this.ps.firstAfterOrEqual(r);return _.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return _.resolve()}As(e,n){return this.Ts(e)}Ts(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Is(e){const n=this.Ts(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class sZ{constructor(e){this.Rs=e,this.docs=new Fe(A.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Rs(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return _.resolve(r?r.document.mutableCopy():De.newInvalidDocument(n))}getEntries(e,n){let r=rn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():De.newInvalidDocument(i))}),_.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=rn();const o=n.path,a=new A(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:l}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||sE(OP(l),r)<=0||(i.has(l.key)||ec(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return _.resolve(s)}getAllFromCollectionGroup(e,n,r,i){P()}bs(e,n){return _.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new oZ(this)}getSize(e){return _.resolve(this.size)}}class oZ extends JJ{constructor(e){super(),this.Xn=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Xn.addEntry(e,i)):this.Xn.removeEntry(r)}),_.waitFor(n)}getFromCache(e,n){return this.Xn.getEntry(e,n)}getAllFromCache(e,n){return this.Xn.getEntries(e,n)}}class aZ{constructor(e){this.persistence=e,this.vs=new pi(n=>ls(n),Ju),this.lastRemoteSnapshotVersion=V.min(),this.highestTargetId=0,this.Ps=0,this.Vs=new FE,this.targetCount=0,this.Ss=vs.Vn()}forEachTarget(e,n){return this.vs.forEach((r,i)=>n(i)),_.resolve()}getLastRemoteSnapshotVersion(e){return _.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _.resolve(this.Ps)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),_.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Ps&&(this.Ps=n),_.resolve()}xn(e){this.vs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ss=new vs(n),this.highestTargetId=n),e.sequenceNumber>this.Ps&&(this.Ps=e.sequenceNumber)}addTargetData(e,n){return this.xn(n),this.targetCount+=1,_.resolve()}updateTargetData(e,n){return this.xn(n),_.resolve()}removeTargetData(e,n){return this.vs.delete(n.target),this.Vs.ds(n.targetId),this.targetCount-=1,_.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.vs.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.vs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),_.waitFor(s).next(()=>i)}getTargetCount(e){return _.resolve(this.targetCount)}getTargetData(e,n){const r=this.vs.get(n)||null;return _.resolve(r)}addMatchingKeys(e,n,r){return this.Vs.hs(n,r),_.resolve()}removeMatchingKeys(e,n,r){this.Vs.fs(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),_.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Vs.ds(n),_.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Vs.ws(n);return _.resolve(r)}containsKey(e,n){return _.resolve(this.Vs.containsKey(n))}}class DF{constructor(e,n){this.Ds={},this.overlays={},this.Cs=new _n(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new aZ(this),this.indexManager=new qJ,this.remoteDocumentCache=new sZ(r=>this.referenceDelegate.ks(r)),this.Tt=new JO(n),this.Os=new nZ(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new rZ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Ds[e.toKey()];return r||(r=new iZ(n,this.referenceDelegate),this.Ds[e.toKey()]=r),r}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Os}runTransaction(e,n,r){T("MemoryPersistence","Starting transaction:",e);const i=new uZ(this.Cs.next());return this.referenceDelegate.Ms(),r(i).next(s=>this.referenceDelegate.Fs(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}$s(e,n){return _.or(Object.values(this.Ds).map(r=>()=>r.containsKey(e,n)))}}class uZ extends SX{constructor(e){super(),this.currentSequenceNumber=e}}class Kh{constructor(e){this.persistence=e,this.Bs=new FE,this.Ls=null}static qs(e){return new Kh(e)}get Us(){if(this.Ls)return this.Ls;throw P()}addReference(e,n,r){return this.Bs.addReference(r,n),this.Us.delete(r.toString()),_.resolve()}removeReference(e,n,r){return this.Bs.removeReference(r,n),this.Us.add(r.toString()),_.resolve()}markPotentiallyOrphaned(e,n){return this.Us.add(n.toString()),_.resolve()}removeTarget(e,n){this.Bs.ds(n.targetId).forEach(i=>this.Us.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Us.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ms(){this.Ls=new Set}Fs(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _.forEach(this.Us,r=>{const i=A.fromPath(r);return this.Ks(e,i).next(s=>{s||n.removeEntry(i,V.min())})}).next(()=>(this.Ls=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ks(e,n).next(r=>{r?this.Us.delete(n.toString()):this.Us.add(n.toString())})}ks(e){return 0}Ks(e,n){return _.or([()=>_.resolve(this.Bs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.$s(e,n)])}}class UE{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ci=r,this.xi=i}static Ni(e,n){let r=X(),i=X();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new UE(e,n.fromCache,r,i)}}class TF{constructor(){this.ki=!1}initialize(e,n){this.Oi=e,this.indexManager=n,this.ki=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Mi(e,n).next(s=>s||this.Fi(e,n,i,r)).next(s=>s||this.$i(e,n))}Mi(e,n){if(uO(n))return _.resolve(null);let r=qt(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=Rh(n,null,"F"),r=qt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=X(...s);return this.Oi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.Bi(n,a);return this.Li(n,c,o,u.readTime)?this.Mi(e,Rh(n,null,"F")):this.qi(e,c,n,u)}))})))}Fi(e,n,r,i){return uO(n)||i.isEqual(V.min())?this.$i(e,n):this.Oi.getDocuments(e,r).next(s=>{const o=this.Bi(n,s);return this.Li(n,o,r,i)?this.$i(e,n):(nE()<=oe.DEBUG&&T("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),vE(n)),this.qi(e,o,n,function PP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=V.fromTimestamp(1e9===r?new Ne(n+1,0):new Ne(n,r));return new yn(i,A.empty(),e)}(i,-1)))})}Bi(e,n){let r=new me(dO(e));return n.forEach((i,s)=>{ec(e,s)&&(r=r.add(s))}),r}Li(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}$i(e,n){return nE()<=oe.DEBUG&&T("QueryEngine","Using full collection scan to execute query:",vE(n)),this.Oi.getDocumentsMatchingQuery(e,n,yn.min())}qi(e,n,r,i){return this.Oi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class lZ{constructor(e,n,r,i){this.persistence=e,this.Ui=n,this.Tt=i,this.Ki=new Fe(z),this.Gi=new pi(s=>ls(s),Ju),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.Os=e.getBundleCache(),this.zi(r)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EF(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ki))}}function SF(t,e){return jE.apply(this,arguments)}function jE(){return jE=m(function*(t,e){const n=x(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.zi(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=X();for(const c of i){o.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}for(const c of s){a.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}return n.localDocuments.getDocuments(r,u).next(c=>({Wi:c,removedBatchIds:o,addedBatchIds:a}))})})}),jE.apply(this,arguments)}function AF(t){const e=x(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ns.getLastRemoteSnapshotVersion(n))}function fZ(t,e){const n=x(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ko(t,e,n){return $E.apply(this,arguments)}function $E(){return $E=m(function*(t,e,n){const r=x(t),i=r.Ki.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!ci(o))throw o;T("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ki=r.Ki.remove(e),r.Gi.delete(i.target)}),$E.apply(this,arguments)}function Yh(t,e,n){const r=x(t);let i=V.min(),s=X();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,u,c){const l=x(a),d=l.Gi.get(c);return void 0!==d?_.resolve(l.Ki.get(d)):l.Ns.getTargetData(u,c)}(r,o,qt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.Ui.getDocumentsMatchingQuery(o,e,n?i:V.min(),n?s:X())).next(a=>(function kF(t,e,n){let r=t.Qi.get(e)||V.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Qi.set(e,r)}(r,function lO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),a),{documents:a,Yi:s})))}class WE{constructor(){this.activeTargetIds=Lh()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class OF{constructor(){this.Ur=new WE,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,n,r){this.Kr[e]=n}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new WE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class mZ{Gr(e){}shutdown(){}}class FF{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){T("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){T("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const yZ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _Z{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}class vZ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.co=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,n,r,i,s){const o=this.fo(e,n);T("RestConnection","Sending: ",o,r);const a={};return this._o(a,i,s),this.wo(e,o,a,r).then(u=>(T("RestConnection","Received: ",u),u),u=>{throw ko("RestConnection",`${e} failed with error: `,u,"url: ",o,"request:",r),u})}mo(e,n,r,i,s,o){return this.lo(e,n,r,i,s)}_o(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+No,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}fo(e,n){return`${this.co}/v1/${n}:${yZ[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,n,r,i){return new Promise((s,o)=>{const a=new mX;a.setWithCredentials(!0),a.listenOnce(fX.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case tE.NO_ERROR:const c=a.getResponseJson();T("Connection","XHR received:",JSON.stringify(c)),s(c);break;case tE.TIMEOUT:T("Connection",'RPC "'+e+'" timed out'),o(new D(w.DEADLINE_EXCEEDED,"Request time out"));break;case tE.HTTP_ERROR:const l=a.getStatus();if(T("Connection",'RPC "'+e+'" failed with status:',l,"response text:",a.getResponseText()),l>0){let d=a.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d?.error;if(h&&h.status&&h.message){const f=function(p){const g=p.toLowerCase().replace(/_/g,"-");return Object.values(w).indexOf(g)>=0?g:w.UNKNOWN}(h.status);o(new D(f,h.message))}else o(new D(w.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new D(w.UNAVAILABLE,"Connection failed."));break;default:P()}}finally{T("Connection",'RPC "'+e+'" completed.')}});const u=JSON.stringify(i);a.send(n,"POST",u,r,15)})}yo(e,n,r){const i=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=dX(),o=hX(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new gX({})),this._o(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const u=i.join("");T("Connection","Creating WebChannel: "+u,a);const c=s.createWebChannel(u,a);let l=!1,d=!1;const h=new _Z({Yr:p=>{d?T("Connection","Not sending because WebChannel is closed:",p):(l||(T("Connection","Opening WebChannel transport."),c.open(),l=!0),T("Connection","WebChannel sending:",p),c.send(p))},Zr:()=>c.close()}),f=(p,g,y)=>{p.listen(g,I=>{try{y(I)}catch(b){setTimeout(()=>{throw b},0)}})};return f(c,Dh.EventType.OPEN,()=>{d||T("Connection","WebChannel transport opened.")}),f(c,Dh.EventType.CLOSE,()=>{d||(d=!0,T("Connection","WebChannel transport closed"),h.oo())}),f(c,Dh.EventType.ERROR,p=>{d||(d=!0,ko("Connection","WebChannel transport errored:",p),h.oo(new D(w.UNAVAILABLE,"The operation could not be completed")))}),f(c,Dh.EventType.MESSAGE,p=>{var g;if(!d){const y=p.data[0];F(!!y);const b=y.error||(null===(g=y[0])||void 0===g?void 0:g.error);if(b){T("Connection","WebChannel received error:",b);const v=b.status;let k=function(B){const qe=Ye[B];if(void 0!==qe)return CO(qe)}(v),L=b.message;void 0===k&&(k=w.INTERNAL,L="Unknown error status: "+v+" with message "+b.message),d=!0,h.oo(new D(k,L)),c.close()}else T("Connection","WebChannel received:",y),h.uo(y)}}),f(o,pX.STAT_EVENT,p=>{p.stat===AP.PROXY?T("Connection","Detected buffering proxy"):p.stat===AP.NOPROXY&&T("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.ro()},0),h}}function Zh(){return typeof document<"u"?document:null}function _c(t){return new cJ(t,!0)}class QE{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Ys=e,this.timerId=n,this.po=r,this.Io=i,this.To=s,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}bo(){this.Eo=this.To}vo(e){this.cancel();const n=Math.floor(this.Eo+this.Po()),r=Math.max(0,Date.now()-this.Ro),i=Math.max(0,n-r);i>0&&T("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Eo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,i,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}Po(){return(Math.random()-.5)*this.Eo}}class VF{constructor(e,n,r,i,s,o,a,u){this.Ys=e,this.So=r,this.Do=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new QE(e,n)}Oo(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Fo()}stop(){var e=this;return m(function*(){e.Oo()&&(yield e.close(0))})()}$o(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}Lo(){var e=this;return m(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}close(e,n){var r=this;return m(function*(){r.Uo(),r.Ko(),r.ko.cancel(),r.Co++,4!==e?r.ko.reset():n&&n.code===w.RESOURCE_EXHAUSTED?(je(n.toString()),je("Using maximum backoff delay to prevent overloading the backend."),r.ko.bo()):n&&n.code===w.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Go(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.no(n)})()}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),n=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Co===n&&this.jo(r,i)},r=>{e(()=>{const i=new D(w.UNKNOWN,"Fetching auth token failed: "+r.message);return this.zo(i)})})}jo(e,n){const r=this.Qo(this.Co);this.stream=this.Wo(e,n),this.stream.Xr(()=>{r(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(i=>{r(()=>this.zo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Fo(){var e=this;this.state=5,this.ko.vo(m(function*(){e.state=0,e.start()}))}zo(e){return T("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return n=>{this.Ys.enqueueAndForget(()=>this.Co===e?n():(T("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wZ extends VF{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.Tt=s}Wo(e,n){return this.connection.yo("Listen",e,n)}onMessage(e){this.ko.reset();const n=function hJ(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:P(),i=e.targetChange.targetIds||[],s=function(u,c){return u.yt?(F(void 0===c||"string"==typeof c),st.fromBase64String(c||"")):(F(void 0===c||c instanceof Uint8Array),st.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=void 0===u.code?w.UNKNOWN:CO(u.code);return new D(c,u.message||"")}(o);n=new NO(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=ar(t,r.document.name),s=Ge(r.document.updateTime),o=r.document.createTime?Ge(r.document.createTime):V.min(),a=new lt({mapValue:{fields:r.document.fields}}),u=De.newFoundDocument(i,s,o,a);n=new Vh(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=ar(t,r.document),s=r.readTime?Ge(r.readTime):V.min(),o=De.newNoDocument(i,s);n=new Vh([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=ar(t,r.document);n=new Vh([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return P();{const r=e.filter,s=new eJ(r.count||0);n=new MO(r.targetId,s)}}var u;return n}(this.Tt,e),r=function(i){if(!("targetChange"in i))return V.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?V.min():s.readTime?Ge(s.readTime):V.min()}(e);return this.listener.Ho(n,r)}Jo(e){const n={};n.database=uc(this.Tt),n.addTarget=function(i,s){let o;const a=s.target;return o=Mh(a)?{documents:jO(i,a)}:{query:bE(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=OO(i,s.resumeToken):s.snapshotVersion.compareTo(V.min())>0&&(o.readTime=Go(i,s.snapshotVersion.toTimestamp())),o}(this.Tt,e);const r=function pJ(t,e){const n=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return P()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.qo(n)}Yo(e){const n={};n.database=uc(this.Tt),n.removeTarget=e,this.qo(n)}}class IZ extends VF{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.Tt=s,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,n){return this.connection.yo("Write",e,n)}onMessage(e){if(F(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const n=function fJ(t,e){return t&&t.length>0?(F(void 0!==e),t.map(n=>function(r,i){let s=Ge(r.updateTime?r.updateTime:i);return s.isEqual(V.min())&&(s=Ge(i)),new XX(s,r.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=Ge(e.commitTime);return this.listener.eu(r,n)}return F(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=uc(this.Tt),this.qo(e)}tu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>function cc(t,e){let n;if(e instanceof jo)n={update:BO(t,e.key,e.value)};else if(e instanceof $o)n={delete:ac(t,e.key)};else if(e instanceof Ur)n={update:BO(t,e.key,e.data),updateMask:_J(e.fieldMask)};else{if(!(e instanceof wE))return P();n={verify:ac(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof Bo)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof hs)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof fs)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Uo)return{fieldPath:s.field.canonicalString(),increment:o.It};throw P()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:lJ(t,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:P()),n;var i}(this.Tt,r))};this.qo(n)}}class EZ extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.Tt=i,this.iu=!1}ru(){if(this.iu)throw new D(w.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,n,r){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.lo(e,n,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new D(w.UNKNOWN,i.toString())})}mo(e,n,r,i){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.mo(e,n,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new D(w.UNKNOWN,s.toString())})}terminate(){this.iu=!0}}class bZ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(je(n),this.cu=!1):T("OnlineStateTracker",n)}du(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}class TZ{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=s,this.yu.Gr(a=>{r.enqueueAndForget(m(function*(){var u;jr(o)&&(T("RemoteStore","Restarting streams for network reachability change."),yield(u=m(function*(c){const l=x(c);l.mu.add(4),yield Qo(l),l.pu.set("Unknown"),l.mu.delete(4),yield vc(l)}),function(c){return u.apply(this,arguments)})(o))}))}),this.pu=new bZ(r,i)}}function vc(t){return XE.apply(this,arguments)}function XE(){return XE=m(function*(t){if(jr(t))for(const e of t.gu)yield e(!0)}),XE.apply(this,arguments)}function Qo(t){return JE.apply(this,arguments)}function JE(){return JE=m(function*(t){for(const e of t.gu)yield e(!1)}),JE.apply(this,arguments)}function ef(t,e){const n=x(t);n.wu.has(e.targetId)||(n.wu.set(e.targetId,e),tD(n)?eD(n):Xo(n).Mo()&&ZE(n,e))}function wc(t,e){const n=x(t),r=Xo(n);n.wu.delete(e),r.Mo()&&BF(n,e),0===n.wu.size&&(r.Mo()?r.Bo():jr(n)&&n.pu.set("Unknown"))}function ZE(t,e){t.Iu.Ft(e.targetId),Xo(t).Jo(e)}function BF(t,e){t.Iu.Ft(e),Xo(t).Yo(e)}function eD(t){t.Iu=new sJ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>t.wu.get(e)||null}),Xo(t).start(),t.pu.au()}function tD(t){return jr(t)&&!Xo(t).Oo()&&t.wu.size>0}function jr(t){return 0===x(t).mu.size}function UF(t){t.Iu=void 0}function CZ(t){return nD.apply(this,arguments)}function nD(){return nD=m(function*(t){t.wu.forEach((e,n)=>{ZE(t,e)})}),nD.apply(this,arguments)}function SZ(t,e){return rD.apply(this,arguments)}function rD(){return rD=m(function*(t,e){UF(t),tD(t)?(t.pu.fu(e),eD(t)):t.pu.set("Unknown")}),rD.apply(this,arguments)}function AZ(t,e,n){return iD.apply(this,arguments)}function iD(){return iD=m(function*(t,e,n){if(t.pu.set("Online"),e instanceof NO&&2===e.state&&e.cause)try{yield(r=m(function*(i,s){const o=s.cause;for(const a of s.targetIds)i.wu.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.wu.delete(a),i.Iu.removeTarget(a))}),function(i,s){return r.apply(this,arguments)})(t,e)}catch(r){T("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield tf(t,r)}else if(e instanceof Vh?t.Iu.Qt(e):e instanceof MO?t.Iu.Zt(e):t.Iu.Wt(e),!n.isEqual(V.min()))try{const r=yield AF(t.localStore);n.compareTo(r)>=0&&(yield function(i,s){const o=i.Iu.ee(s);return o.targetChanges.forEach((a,u)=>{if(a.resumeToken.approximateByteSize()>0){const c=i.wu.get(u);c&&i.wu.set(u,c.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const u=i.wu.get(a);if(!u)return;i.wu.set(a,u.withResumeToken(st.EMPTY_BYTE_STRING,u.snapshotVersion)),BF(i,a);const c=new mi(u.target,a,1,u.sequenceNumber);ZE(i,c)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n))}catch(r){T("RemoteStore","Failed to raise snapshot:",r),yield tf(t,r)}var r}),iD.apply(this,arguments)}function tf(t,e,n){return sD.apply(this,arguments)}function sD(){return sD=m(function*(t,e,n){if(!ci(e))throw e;t.mu.add(1),yield Qo(t),t.pu.set("Offline"),n||(n=()=>AF(t.localStore)),t.asyncQueue.enqueueRetryable(m(function*(){T("RemoteStore","Retrying IndexedDB access"),yield n(),t.mu.delete(1),yield vc(t)}))}),sD.apply(this,arguments)}function jF(t,e){return e().catch(n=>tf(t,n,e))}function Yo(t){return oD.apply(this,arguments)}function oD(){return oD=m(function*(t){const e=x(t),n=wi(e);let r=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;xZ(e);)try{const i=yield fZ(e.localStore,r);if(null===i){0===e._u.length&&n.Bo();break}r=i.batchId,MZ(e,i)}catch(i){yield tf(e,i)}$F(e)&&GF(e)}),oD.apply(this,arguments)}function xZ(t){return jr(t)&&t._u.length<10}function MZ(t,e){t._u.push(e);const n=wi(t);n.Mo()&&n.Xo&&n.tu(e.mutations)}function $F(t){return jr(t)&&!wi(t).Oo()&&t._u.length>0}function GF(t){wi(t).start()}function NZ(t){return aD.apply(this,arguments)}function aD(){return aD=m(function*(t){wi(t).su()}),aD.apply(this,arguments)}function kZ(t){return uD.apply(this,arguments)}function uD(){return uD=m(function*(t){const e=wi(t);for(const n of t._u)e.tu(n.mutations)}),uD.apply(this,arguments)}function RZ(t,e,n){return cD.apply(this,arguments)}function cD(){return cD=m(function*(t,e,n){const r=t._u.shift(),i=SE.from(r,e,n);yield jF(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Yo(t)}),cD.apply(this,arguments)}function PZ(t,e){return lD.apply(this,arguments)}function lD(){return lD=m(function*(t,e){var n;e&&wi(t).Xo&&(yield(n=m(function*(r,i){if(function TO(t){switch(t){default:return P();case w.CANCELLED:case w.UNKNOWN:case w.DEADLINE_EXCEEDED:case w.RESOURCE_EXHAUSTED:case w.INTERNAL:case w.UNAVAILABLE:case w.UNAUTHENTICATED:return!1;case w.INVALID_ARGUMENT:case w.NOT_FOUND:case w.ALREADY_EXISTS:case w.PERMISSION_DENIED:case w.FAILED_PRECONDITION:case w.ABORTED:case w.OUT_OF_RANGE:case w.UNIMPLEMENTED:case w.DATA_LOSS:return!0}}(s=i.code)&&s!==w.ABORTED){const o=r._u.shift();wi(r).$o(),yield jF(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Yo(r)}var s}),function(r,i){return n.apply(this,arguments)})(t,e)),$F(t)&&GF(t)}),lD.apply(this,arguments)}function HF(t,e){return dD.apply(this,arguments)}function dD(){return dD=m(function*(t,e){const n=x(t);n.asyncQueue.verifyOperationInProgress(),T("RemoteStore","RemoteStore received new credentials");const r=jr(n);n.mu.add(3),yield Qo(n),r&&n.pu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.mu.delete(3),yield vc(n)}),dD.apply(this,arguments)}function fD(){return fD=m(function*(t,e){const n=x(t);e?(n.mu.delete(2),yield vc(n)):e||(n.mu.add(2),yield Qo(n),n.pu.set("Unknown"))}),fD.apply(this,arguments)}function Xo(t){return t.Tu||(t.Tu=function(e,n,r){const i=x(e);return i.ru(),new wZ(n,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(t.datastore,t.asyncQueue,{Xr:CZ.bind(null,t),no:SZ.bind(null,t),Ho:AZ.bind(null,t)}),t.gu.push(function(){var e=m(function*(n){n?(t.Tu.$o(),tD(t)?eD(t):t.pu.set("Unknown")):(yield t.Tu.stop(),UF(t))});return function(n){return e.apply(this,arguments)}}())),t.Tu}function wi(t){return t.Eu||(t.Eu=function(e,n,r){const i=x(e);return i.ru(),new IZ(n,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(t.datastore,t.asyncQueue,{Xr:NZ.bind(null,t),no:PZ.bind(null,t),nu:kZ.bind(null,t),eu:RZ.bind(null,t)}),t.gu.push(function(){var e=m(function*(n){n?(t.Eu.$o(),yield Yo(t)):(yield t.Eu.stop(),t._u.length>0&&(T("RemoteStore",`Stopping write stream with ${t._u.length} pending writes`),t._u=[]))});return function(n){return e.apply(this,arguments)}}())),t.Eu}class pD{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new it,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new pD(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new D(w.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jo(t,e){if(je("AsyncQueue",`${e}: ${t}`),ci(t))return new D(w.UNAVAILABLE,`${e}: ${t}`);throw t}class Zo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||A.comparator(n.key,r.key):(n,r)=>A.comparator(n.key,r.key),this.keyedMap=rc(),this.sortedSet=new Fe(this.comparator)}static emptySet(e){return new Zo(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Zo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new Zo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class qF{constructor(){this.Au=new Fe(A.comparator)}track(e){const n=e.doc.key,r=this.Au.get(n);r?0!==e.type&&3===r.type?this.Au=this.Au.insert(n,e):3===e.type&&1!==r.type?this.Au=this.Au.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Au=this.Au.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Au=this.Au.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Au=this.Au.remove(n):1===e.type&&2===r.type?this.Au=this.Au.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Au=this.Au.insert(n,{type:2,doc:e.doc}):P():this.Au=this.Au.insert(n,e)}Ru(){const e=[];return this.Au.inorderTraversal((n,r)=>{e.push(r)}),e}}class ea{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ea(e,n,Zo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class OZ{constructor(){this.bu=void 0,this.listeners=[]}}class FZ{constructor(){this.queries=new pi(e=>cO(e),Zu),this.onlineState="Unknown",this.vu=new Set}}function mD(){return mD=m(function*(t,e){const n=x(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new OZ),i)try{s.bu=yield n.onListen(r)}catch(o){const a=Jo(o,`Initialization of query '${vE(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Pu(n.onlineState),s.bu&&e.Vu(s.bu)&&vD(n)}),mD.apply(this,arguments)}function _D(){return _D=m(function*(t,e){const n=x(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),_D.apply(this,arguments)}function LZ(t,e){const n=x(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const a of o.listeners)a.Vu(i)&&(r=!0);o.bu=i}}r&&vD(n)}function VZ(t,e,n){const r=x(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function vD(t){t.vu.forEach(e=>{e.next()})}class wD{constructor(e,n,r){this.query=e,this.Su=n,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new ea(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Du?this.xu(e)&&(this.Su.next(e),n=!0):this.Nu(e,this.onlineState)&&(this.ku(e),n=!0),this.Cu=e,n}onError(e){this.Su.error(e)}Pu(e){this.onlineState=e;let n=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),n=!0),n}Nu(e,n){return!e.fromCache||(!this.options.Ou||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}xu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ku(e){e=ea.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}class KF{constructor(e){this.key=e}}class QF{constructor(e){this.key=e}}class YF{constructor(e,n){this.query=e,this.Ku=n,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=X(),this.mutatedKeys=X(),this.ju=dO(e),this.zu=new Zo(this.ju)}get Wu(){return this.Ku}Hu(e,n){const r=n?n.Ju:new qF,i=n?n.zu:this.zu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{const h=i.get(l),f=ec(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let y=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(r.track({type:3,doc:f}),y=!0):this.Yu(h,f)||(r.track({type:2,doc:f}),y=!0,(u&&this.ju(f,u)>0||c&&this.ju(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),y=!0):h&&!f&&(r.track({type:1,doc:h}),y=!0,(u||c)&&(a=!0)),y&&(f?(o=o.add(f),s=g?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{zu:o,Ju:r,Li:a,mutatedKeys:s}}Yu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const s=e.Ju.Ru();s.sort((c,l)=>function(d,h){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return P()}};return f(d)-f(h)}(c.type,l.type)||this.ju(c.doc,l.doc)),this.Zu(r);const o=n?this.Xu():[],a=0===this.Qu.size&&this.current?1:0,u=a!==this.Gu;return this.Gu=a,0!==s.length||u?{snapshot:new ea(this.query,e.zu,i,s,e.mutatedKeys,0===a,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),tc:o}:{tc:o}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new qF,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(n=>this.Ku=this.Ku.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ku=this.Ku.delete(n)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=X(),this.zu.forEach(r=>{this.ec(r.key)&&(this.Qu=this.Qu.add(r.key))});const n=[];return e.forEach(r=>{this.Qu.has(r)||n.push(new QF(r))}),this.Qu.forEach(r=>{e.has(r)||n.push(new KF(r))}),n}nc(e){this.Ku=e.Yi,this.Qu=X();const n=this.Hu(e.documents);return this.applyChanges(n,!0)}sc(){return ea.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}class jZ{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class $Z{constructor(e){this.key=e,this.ic=!1}}class GZ{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.rc={},this.oc=new pi(a=>cO(a),Zu),this.uc=new Map,this.cc=new Set,this.ac=new Fe(A.comparator),this.hc=new Map,this.lc=new FE,this.fc={},this.dc=new Map,this._c=vs.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return!0===this.wc}}function HZ(t,e){return ID.apply(this,arguments)}function ID(){return ID=m(function*(t,e){const n=function HD(t){const e=x(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=XF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZZ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WZ.bind(null,e),e.rc.Ho=LZ.bind(null,e.eventManager),e.rc.gc=VZ.bind(null,e.eventManager),e}(t);let r,i;const s=n.oc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.sc();else{const o=yield function Wo(t,e){const n=x(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ns.getTargetData(r,e).next(s=>s?(i=s,_.resolve(i)):n.Ns.allocateTargetId(r).next(o=>(i=new mi(e,o,0,r.currentSequenceNumber),n.Ns.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ki.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ki=n.Ki.insert(r.targetId,r),n.Gi.set(e,r.targetId)),r})}(n.localStore,qt(e));n.isPrimaryClient&&ef(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield function ED(t,e,n,r,i){return DD.apply(this,arguments)}(n,e,r,"current"===a,o.resumeToken)}return i}),ID.apply(this,arguments)}function DD(){return DD=m(function*(t,e,n,r,i){t.mc=(d,h,f)=>{return(p=m(function*(g,y,I,b){let v=y.view.Hu(I);v.Li&&(v=yield Yh(g.localStore,y.query,!1).then(({documents:B})=>y.view.Hu(B,v)));const k=b&&b.targetChanges.get(y.targetId),L=y.view.applyChanges(v,g.isPrimaryClient,k);return RD(g,y.targetId,L.tc),L.snapshot}),function(g,y,I,b){return p.apply(this,arguments)})(t,d,h,f);var p};const s=yield Yh(t.localStore,e,!0),o=new YF(e,s.Yi),a=o.Hu(s.documents),u=oc.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),c=o.applyChanges(a,t.isPrimaryClient,u);RD(t,n,c.tc);const l=new jZ(e,n,o);return t.oc.set(e,l),t.uc.has(n)?t.uc.get(n).push(e):t.uc.set(n,[e]),c.snapshot}),DD.apply(this,arguments)}function qZ(t,e){return bD.apply(this,arguments)}function bD(){return bD=m(function*(t,e){const n=x(t),r=n.oc.get(e),i=n.uc.get(r.targetId);if(i.length>1)return n.uc.set(r.targetId,i.filter(s=>!Zu(s,e))),void n.oc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ko(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),wc(n.remoteStore,r.targetId),ta(n,r.targetId)}).catch(ui))):(ta(n,r.targetId),yield Ko(n.localStore,r.targetId,!0))}),bD.apply(this,arguments)}function TD(){return TD=m(function*(t,e,n){const r=function qD(t){const e=x(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KZ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QZ.bind(null,e),e}(t);try{const i=yield function(s,o){const a=x(s),u=Ne.now(),c=o.reduce((h,f)=>h.add(f.key),X());let l,d;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>{let f=rn(),p=X();return a.ji.getEntries(h,c).next(g=>{f=g,f.forEach((y,I)=>{I.isValidDocument()||(p=p.add(y))})}).next(()=>a.localDocuments.getOverlayedDocuments(h,f)).next(g=>{l=g;const y=[];for(const I of o){const b=ZX(I,l.get(I.key).overlayedDocument);null!=b&&y.push(new Ur(I.key,b,iO(b.value.mapValue),Ae.exists(!0)))}return a.mutationQueue.addMutationBatch(h,u,y,o)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(l,p);return a.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:AO(l)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let u=s.fc[s.currentUser.toKey()];u||(u=new Fe(z)),u=u.insert(o,a),s.fc[s.currentUser.toKey()]=u}(r,i.batchId,n),yield $r(r,i.changes),yield Yo(r.remoteStore)}catch(i){const s=Jo(i,"Failed to persist write");n.reject(s)}}),TD.apply(this,arguments)}function XF(t,e){return CD.apply(this,arguments)}function CD(){return CD=m(function*(t,e){const n=x(t);try{const r=yield function hZ(t,e){const n=x(t),r=e.snapshotVersion;let i=n.Ki;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ji.newChangeBuffer({trackRemovals:!0});i=n.Ki;const a=[];e.targetChanges.forEach((l,d)=>{const h=i.get(d);if(!h)return;a.push(n.Ns.removeMatchingKeys(s,l.removedDocuments,d).next(()=>n.Ns.addMatchingKeys(s,l.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);var p,g,y;e.targetMismatches.has(d)?f=f.withResumeToken(st.EMPTY_BYTE_STRING,V.min()).withLastLimboFreeSnapshotVersion(V.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),g=f,y=l,(0===(p=h).resumeToken.approximateByteSize()||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8||y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0)&&a.push(n.Ns.updateTargetData(s,f))});let u=rn(),c=X();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(function xF(t,e,n){let r=X(),i=X();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=rn();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(V.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||0===u.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):T("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Hi:o,Ji:i}})}(s,o,e.documentUpdates).next(l=>{u=l.Hi,c=l.Ji})),!r.isEqual(V.min())){const l=n.Ns.getLastRemoteSnapshotVersion(s).next(d=>n.Ns.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return _.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.Ki=i,s))}(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.hc.get(s);o&&(F(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ic=!0:i.modifiedDocuments.size>0?F(o.ic):i.removedDocuments.size>0&&(F(o.ic),o.ic=!1))}),yield $r(n,r,e)}catch(r){yield ui(r)}}),CD.apply(this,arguments)}function JF(t,e,n){const r=x(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.oc.forEach((s,o)=>{const a=o.view.Pu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=x(s);a.onlineState=o;let u=!1;a.queries.forEach((c,l)=>{for(const d of l.listeners)d.Pu(o)&&(u=!0)}),u&&vD(a)}(r.eventManager,e),i.length&&r.rc.Ho(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function WZ(t,e,n){return SD.apply(this,arguments)}function SD(){return SD=m(function*(t,e,n){const r=x(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.hc.get(e),s=i&&i.key;if(s){let o=new Fe(A.comparator);o=o.insert(s,De.newNoDocument(s,V.min()));const a=X().add(s),u=new sc(V.min(),new Map,new me(z),o,a);yield XF(r,u),r.ac=r.ac.remove(s),r.hc.delete(e),PD(r)}else yield Ko(r.localStore,e,!1).then(()=>ta(r,e,n)).catch(ui)}),SD.apply(this,arguments)}function KZ(t,e){return AD.apply(this,arguments)}function AD(){return AD=m(function*(t,e){const n=x(t),r=e.batch.batchId;try{const i=yield function dZ(t,e){const n=x(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ji.newChangeBuffer({trackRemovals:!0});return function(o,a,u,c){const l=u.batch,d=l.keys();let h=_.resolve();return d.forEach(f=>{h=h.next(()=>c.getEntry(a,f)).next(p=>{const g=u.docVersions.get(f);F(null!==g),p.version.compareTo(g)<0&&(l.applyToRemoteDocument(p,u),p.isValidDocument()&&(p.setReadTime(u.commitVersion),c.addEntry(p)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(a,l))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=X();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(a=a.add(o.batch.mutations[u].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);kD(n,r,null),ND(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield $r(n,i)}catch(i){yield ui(i)}}),AD.apply(this,arguments)}function QZ(t,e,n){return xD.apply(this,arguments)}function xD(){return xD=m(function*(t,e,n){const r=x(t);try{const i=yield function(s,o){const a=x(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return a.mutationQueue.lookupMutationBatch(u,o).next(l=>(F(null!==l),c=l.keys(),a.mutationQueue.removeMutationBatch(u,l))).next(()=>a.mutationQueue.performConsistencyCheck(u)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(u,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>a.localDocuments.getDocuments(u,c))})}(r.localStore,e);kD(r,e,n),ND(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield $r(r,i)}catch(i){yield ui(i)}}),xD.apply(this,arguments)}function ND(t,e){(t.dc.get(e)||[]).forEach(n=>{n.resolve()}),t.dc.delete(e)}function kD(t,e,n){const r=x(t);let i=r.fc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.fc[r.currentUser.toKey()]=i}}function ta(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.uc.get(e))t.oc.delete(r),n&&t.rc.gc(r,n);t.uc.delete(e),t.isPrimaryClient&&t.lc.ds(e).forEach(r=>{t.lc.containsKey(r)||ZF(t,r)})}function ZF(t,e){t.cc.delete(e.path.canonicalString());const n=t.ac.get(e);null!==n&&(wc(t.remoteStore,n),t.ac=t.ac.remove(e),t.hc.delete(n),PD(t))}function RD(t,e,n){for(const r of n)r instanceof KF?(t.lc.addReference(r.key,e),XZ(t,r)):r instanceof QF?(T("SyncEngine","Document no longer in limbo: "+r.key),t.lc.removeReference(r.key,e),t.lc.containsKey(r.key)||ZF(t,r.key)):P()}function XZ(t,e){const n=e.key,r=n.path.canonicalString();t.ac.get(n)||t.cc.has(r)||(T("SyncEngine","New document in limbo: "+n),t.cc.add(r),PD(t))}function PD(t){for(;t.cc.size>0&&t.ac.size<t.maxConcurrentLimboResolutions;){const e=t.cc.values().next().value;t.cc.delete(e);const n=new A(ae.fromString(e)),r=t._c.next();t.hc.set(r,new $Z(n)),t.ac=t.ac.insert(n,r),ef(t.remoteStore,new mi(qt(Vo(n.path)),r,2,_n.at))}}function $r(t,e,n){return OD.apply(this,arguments)}function OD(){return OD=m(function*(t,e,n){const r=x(t),i=[],s=[],o=[];var a;r.oc.isEmpty()||(r.oc.forEach((a,u)=>{o.push(r.mc(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);const l=UE.Ni(u.targetId,c);s.push(l)}}))}),yield Promise.all(o),r.rc.Ho(i),yield(a=m(function*(u,c){const l=x(u);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>_.forEach(c,h=>_.forEach(h.Ci,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>_.forEach(h.xi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!ci(d))throw d;T("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const f=l.Ki.get(h),g=f.withLastLimboFreeSnapshotVersion(f.snapshotVersion);l.Ki=l.Ki.insert(h,g)}}}),function(u,c){return a.apply(this,arguments)})(r.localStore,s))}),OD.apply(this,arguments)}function JZ(t,e){return FD.apply(this,arguments)}function FD(){return FD=m(function*(t,e){const n=x(t);if(!n.currentUser.isEqual(e)){T("SyncEngine","User change. New user:",e.toKey());const r=yield SF(n.localStore,e);n.currentUser=e,(i=n).dc.forEach(o=>{o.forEach(a=>{a.reject(new D(w.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.dc.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield $r(n,r.Wi)}var i}),FD.apply(this,arguments)}function ZZ(t,e){const n=x(t),r=n.hc.get(e);if(r&&r.ic)return X().add(r.key);{let i=X();const s=n.uc.get(e);if(!s)return i;for(const o of s){const a=n.oc.get(o);i=i.unionWith(a.view.Wu)}return i}}class uee{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return m(function*(){n.Tt=_c(e.databaseInfo.databaseId),n.sharedClientState=n.Ic(e),n.persistence=n.Tc(e),yield n.persistence.start(),n.localStore=n.Ec(e),n.gcScheduler=n.Ac(e,n.localStore),n.indexBackfillerScheduler=n.Rc(e,n.localStore)})()}Ac(e,n){return null}Rc(e,n){return null}Ec(e){return function CF(t,e,n,r){return new lZ(t,e,n,r)}(this.persistence,new TF,e.initialUser,this.Tt)}Tc(e){return new DF(Kh.qs,this.Tt)}Ic(e){return new OF}terminate(){var e=this;return m(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class zD{initialize(e,n){var r=this;return m(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>JF(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=JZ.bind(null,r.syncEngine),yield function hD(t,e){return fD.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new FZ}createDatastore(e){const n=_c(e.databaseInfo.databaseId),r=new vZ(e.databaseInfo);return new EZ(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>JF(this.syncEngine,a,0),o=FF.C()?new FF:new mZ,new TZ(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,u,c){const l=new GZ(r,i,s,o,a,u);return c&&(l.wc=!0),l}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return function(){var e=m(function*(n){const r=x(n);T("RemoteStore","RemoteStore shutting down."),r.mu.add(5),yield Qo(r),r.yu.shutdown(),r.pu.set("Unknown")});return function(n){return e.apply(this,arguments)}}()(this.remoteStore)}}class nf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):je("Uncaught Error in snapshot listener:",e.toString())}Pc(){this.muted=!0}vc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class pee{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ct.UNAUTHENTICATED,this.clientId=kP.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=m(function*(a){T("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(T("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return m(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new D(w.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new it;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(m(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=Jo(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function WD(){return WD=m(function*(t,e){t.asyncQueue.verifyOperationInProgress(),T("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=m(function*(s){r.isEqual(s)||(yield SF(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}),WD.apply(this,arguments)}function KD(){return KD=m(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield function QD(t){return YD.apply(this,arguments)}(t);T("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>HF(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>HF(e.remoteStore,s)),t.onlineComponents=e}),KD.apply(this,arguments)}function YD(){return YD=m(function*(t){return t.offlineComponents||(T("FirestoreClient","Using default OfflineComponentProvider"),yield function rL(t,e){return WD.apply(this,arguments)}(t,new uee)),t.offlineComponents}),YD.apply(this,arguments)}function rf(t){return XD.apply(this,arguments)}function XD(){return XD=m(function*(t){return t.onlineComponents||(T("FirestoreClient","Using default OnlineComponentProvider"),yield function iL(t,e){return KD.apply(this,arguments)}(t,new zD)),t.onlineComponents}),XD.apply(this,arguments)}function na(t){return eb.apply(this,arguments)}function eb(){return eb=m(function*(t){const e=yield rf(t),n=e.eventManager;return n.onListen=HZ.bind(null,e.syncEngine),n.onUnlisten=qZ.bind(null,e.syncEngine),n}),eb.apply(this,arguments)}const cL=new Map;function tb(t,e,n){if(!n)throw new D(w.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function lL(t){if(!A.isDocumentKey(t))throw new D(w.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function dL(t){if(A.isDocumentKey(t))throw new D(w.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function of(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(n=t).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof t?"a function":P()}function re(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new D(w.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=of(t);throw new D(w.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}class fL{constructor(e){var n;if(void 0===e.host){if(void 0!==e.ssl)throw new D(w.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new D(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function Eee(t,e,n,r){if(!0===e&&!0===r)throw new D(w.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ic{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fL({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new D(w.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new D(w.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fL(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new yX;switch(n.type){case"gapi":return new IX(n.client,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new D(w.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=cL.get(e);n&&(T("ComponentProvider","Removing Datastore"),cL.delete(e),n.terminate())}(this),Promise.resolve()}}class He{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new He(this.firestore,e,this._key)}}class It{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new It(this.firestore,e,this._query)}}class cr extends It{constructor(e,n,r){super(e,n,Vo(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new He(this.firestore,null,new A(e))}withConverter(e){return new cr(this.firestore,e,this._path)}}function bee(t,e,...n){if(t=jt(t),tb("collection","path",e),t instanceof Ic){const r=ae.fromString(e,...n);return dL(r),new cr(t,null,r)}{if(!(t instanceof He||t instanceof cr))throw new D(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ae.fromString(e,...n));return dL(r),new cr(t.firestore,null,r)}}function pL(t,e,...n){if(t=jt(t),1===arguments.length&&(e=kP.R()),tb("doc","path",e),t instanceof Ic){const r=ae.fromString(e,...n);return lL(r),new He(t,null,new A(r))}{if(!(t instanceof He||t instanceof cr))throw new D(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ae.fromString(e,...n));return lL(r),new He(t.firestore,t instanceof cr?t.converter:null,new A(r))}}class Tee{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new QE(this,"async_queue_retry"),this.Hc=()=>{const n=Zh();n&&T("AsyncQueue","Visibility state changed to "+n.visibilityState),this.ko.Vo()};const e=Zh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const n=Zh();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const n=new it;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}Zc(){var e=this;return m(function*(){if(0!==e.Uc.length){try{yield e.Uc[0](),e.Uc.shift(),e.ko.reset()}catch(n){if(!ci(n))throw n;T("AsyncQueue","Operation failed with retryable error: "+n)}e.Uc.length>0&&e.ko.vo(()=>e.Zc())}})()}Yc(e){const n=this.qc.then(()=>(this.jc=!0,e().catch(r=>{throw this.Qc=r,this.jc=!1,je("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(r)),r}).then(r=>(this.jc=!1,r))));return this.qc=n,n}enqueueAfterDelay(e,n,r){this.Jc(),this.Wc.indexOf(e)>-1&&(n=0);const i=pD.createAndSchedule(this,e,n,r,s=>this.Xc(s));return this.Gc.push(i),i}Jc(){this.Qc&&P()}verifyOperationInProgress(){}ta(){var e=this;return m(function*(){let n;do{n=e.qc,yield n}while(n!==e.qc)})()}ea(e){for(const n of this.Gc)if(n.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Gc)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const n=this.Gc.indexOf(e);this.Gc.splice(n,1)}}function nb(t){return function(e,n){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(t)}class be extends Ic{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Tee,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||mL(this),this._firestoreClient.terminate()}}function See(t,e){const r="string"==typeof t?t:e||"(default)",i=Dd("object"==typeof t?t:LN(),"firestore").getImmediate({identifier:r});if(!i._initialized){const s=U4("firestore");s&&function Dee(t,e,n,r={}){var i;const s=(t=re(t,Ic))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&ko("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let o,a;if("string"==typeof r.mockUserToken)o=r.mockUserToken,a=ct.MOCK_USER;else{o=function G4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[gd(JSON.stringify({alg:"none",type:"JWT"})),gd(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new D(w.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new ct(u)}t._authCredentials=new _X(new MP(o,a))}}(i,...s)}return i}function Xe(t){return t._firestoreClient||mL(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function mL(t){var e;const n=t._freezeSettings(),r=(s=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new PX(t._databaseId,s,t._persistenceKey,(a=n).host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams));var s,a;t._firestoreClient=new pee(t._authCredentials,t._appCheckCredentials,t._queue,r)}class Is{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Is(st.fromBase64String(e))}catch(n){throw new D(w.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Is(st.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ra{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new D(w.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $e(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class rb{constructor(e){this._methodName=e}}class ib{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new D(w.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new D(w.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return z(this._lat,e._lat)||z(this._long,e._long)}}const xee=/^__.*__$/;class Mee{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new Ur(e,this.data,this.fieldMask,n,this.fieldTransforms):new jo(e,this.data,n,this.fieldTransforms)}}class vL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ur(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function wL(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw P()}}class af{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.Tt=r,this.ignoreUndefinedProperties=i,void 0===s&&this.ia(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new af(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.oa({path:r,ca:!1});return i.aa(e),i}ha(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.oa({path:r,ca:!1});return i.ia(),i}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return cf(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(wL(this.ra)&&xee.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class Nee{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.Tt=r||_c(e)}wa(e,n,r,i=!1){return new af({ra:e,methodName:n,_a:r,path:$e.emptyPath(),ca:!1,da:i},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function ia(t){const e=t._freezeSettings(),n=_c(t._databaseId);return new Nee(t._databaseId,!!e.ignoreUndefinedProperties,n)}function sb(t,e,n,r,i,s={}){const o=t.wa(s.merge||s.mergeFields?2:0,e,n,i);ab("Data must be an object, but it was:",o,r);const a=TL(r,o);let u,c;if(s.merge)u=new nn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const l=[];for(const d of s.mergeFields){const h=bc(e,d,n);if(!o.contains(h))throw new D(w.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);SL(l,h)||l.push(h)}u=new nn(l),c=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=o.fieldTransforms;return new Mee(new lt(a),u,c)}class Dc extends rb{_toFieldTransform(e){if(2!==e.ra)throw e.fa(1===e.ra?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dc}}function Es(t,e){if(CL(t=jt(t)))return ab("Unsupported field value:",e,t),TL(t,e);if(t instanceof rb)return function(n,r){if(!wL(r.ra))throw r.fa(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.fa(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.ca&&4!==e.ra)throw e.fa("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=Es(o,r.la(s));null==a&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if(null===(n=jt(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return pO(r.Tt,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const i=Ne.fromDate(n);return{timestampValue:Go(r.Tt,i)}}if(n instanceof Ne){const i=new Ne(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Go(r.Tt,i)}}if(n instanceof ib)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Is)return{bytesValue:OO(r.Tt,n._byteString)};if(n instanceof He){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r.fa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:IE(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.fa(`Unsupported field value: ${of(n)}`)}(t,e)}function TL(t,e){const n={};return BP(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):os(t,(r,i)=>{const s=Es(i,e.ua(r));null!=s&&(n[r]=s)}),{mapValue:{fields:n}}}function CL(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ne||t instanceof ib||t instanceof Is||t instanceof He||t instanceof rb)}function ab(t,e,n){if(!CL(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=of(n);throw e.fa("an object"===r?t+" a custom object":t+" "+r)}var r}function bc(t,e,n){if((e=jt(e))instanceof ra)return e._internalPath;if("string"==typeof e)return uf(t,e);throw cf("Field path arguments must be of type string or ",t,!1,void 0,n)}const Oee=new RegExp("[~\\*/\\[\\]]");function uf(t,e,n){if(e.search(Oee)>=0)throw cf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ra(...e.split("."))._internalPath}catch{throw cf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function cf(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new D(w.INVALID_ARGUMENT,a+t+u)}function SL(t,e){return t.some(n=>n.isEqual(e))}class ub{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new He(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Fee(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(lf("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class Fee extends ub{data(){return super.data()}}function lf(t,e){return"string"==typeof e?uf(t,e):e instanceof ra?e._internalPath:e._delegate._internalPath}class Vee{convertValue(e,n="none"){switch(us(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(as(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw P()}}convertObject(e,n){const r={};return os(e.fields,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new ib(Oe(e.latitude),Oe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=jP(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ku(e));default:return null}}convertTimestamp(e){const n=li(e);return new Ne(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ae.fromString(e);F(qO(r));const i=new ss(r.get(1),r.get(3)),s=new A(r.popFirst(5));return i.isEqual(n)||je(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}class Ds{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class oa extends ub{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new pf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(lf("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class pf extends oa{data(e={}){return super.data(e)}}class aa{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ds(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new pf(this._firestore,this._userDataWriter,r.key,r,new Ds(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new D(w.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new pf(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ds(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||3!==o.type).map(o=>{const a=new pf(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Ds(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,c=-1;return 0!==o.type&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:Uee(o.type),doc:a,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Uee(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return P()}}class Ii extends Vee{constructor(e){super(),this.firestore=e}convertBytes(e){return new Is(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new He(this.firestore,null,n)}}function jee(t,e,n,...r){t=re(t,He);const i=re(t.firestore,be),s=ia(i);let o;return o="string"==typeof(e=jt(e))||e instanceof ra?function DL(t,e,n,r,i,s){const o=t.wa(1,e,n),a=[bc(e,r,n)],u=[i];if(s.length%2!=0)throw new D(w.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(bc(e,s[h])),u.push(s[h+1]);const c=[],l=lt.empty();for(let h=a.length-1;h>=0;--h)if(!SL(c,a[h])){const f=a[h];let p=u[h];p=jt(p);const g=o.ha(f);if(p instanceof Dc)c.push(f);else{const y=Es(p,g);null!=y&&(c.push(f),l.set(f,y))}}const d=new nn(c);return new vL(l,d,o.fieldTransforms)}(s,"updateDoc",t._key,e,n,r):function EL(t,e,n,r){const i=t.wa(1,e,n);ab("Data must be an object, but it was:",i,r);const s=[],o=lt.empty();os(r,(u,c)=>{const l=uf(e,u,n);c=jt(c);const d=i.ha(l);if(c instanceof Dc)s.push(l);else{const h=Es(c,d);null!=h&&(s.push(l),o.set(l,h))}});const a=new nn(s);return new vL(o,a,i.fieldTransforms)}(s,"updateDoc",t._key,e),Cc(i,[o.toMutation(t._key,Ae.exists(!0))])}function $ee(t){return Cc(re(t.firestore,be),[new $o(t._key,Ae.none())])}function Gee(t,e){const n=re(t.firestore,be),r=pL(t),i=function lb(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}(t.converter,e);return Cc(n,[sb(ia(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Ae.exists(!1))]).then(()=>r)}function Cc(t,e){return function(n,r){const i=new it;return n.asyncQueue.enqueueAndForget(m(function*(){return function zZ(t,e,n){return TD.apply(this,arguments)}(yield function ZD(t){return rf(t).then(e=>e.syncEngine)}(n),r,i)})),i.promise}(Xe(t),e)}!function(t,e=!0){No=bd,$t(new Nt("firestore",(n,{instanceIdentifier:r,options:i})=>{const s=n.getProvider("app").getImmediate(),o=new be(new vX(n.getProvider("auth-internal")),new EX(n.getProvider("app-check-internal")),function(a,u){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new D(w.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ss(a.options.projectId,u)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Ue(xP,"3.8.4",t),Ue(xP,"3.8.4","esm2017")}();var Qee={includeMetadataChanges:!1};function hb(t,e){return void 0===e&&(e=Qee),new ot(function(n){var r=function Hee(t,...e){var n,r,i;t=jt(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||nb(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(nb(e[o])){const d=e[o];e[o]=null===(n=d.next)||void 0===n?void 0:n.bind(d),e[o+1]=null===(r=d.error)||void 0===r?void 0:r.bind(d),e[o+2]=null===(i=d.complete)||void 0===i?void 0:i.bind(d)}let u,c,l;if(t instanceof He)c=re(t.firestore,be),l=Vo(t._key.path),u={next:d=>{e[o]&&e[o](function db(t,e,n){const r=n.docs.get(e._key),i=new Ii(t);return new oa(t,i,e._key,r,new Ds(n.hasPendingWrites,n.fromCache),e.converter)}(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=re(t,It);c=re(d.firestore,be),l=d._query;const h=new Ii(c);u={next:f=>{e[o]&&e[o](new aa(c,h,d,f))},error:e[o+1],complete:e[o+2]},function AL(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new D(w.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query)}return function(d,h,f,p){const g=new nf(p),y=new wD(h,g,f);return d.asyncQueue.enqueueAndForget(m(function*(){return function gD(t,e){return mD.apply(this,arguments)}(yield na(d),y)})),()=>{g.Pc(),d.asyncQueue.enqueueAndForget(m(function*(){return function yD(t,e){return _D.apply(this,arguments)}(yield na(d),y)}))}}(Xe(c),l,a,u)}(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function nte(t,e){return void 0===e&&(e={}),function tte(t){return hb(t,{includeMetadataChanges:!0}).pipe(ca(function(e){return e.docs}))}(t).pipe(ca(function(n){return n.map(function(r){return function FL(t,e){void 0===e&&(e={});var n=t.data();return!t.exists()||"object"!=typeof n||null===n||e.idField&&(n[e.idField]=t.id),n}(r,e)})}))}class mf{constructor(e){return e}}const UL="firestore",gb=new $("angularfire2.firestore-instances");function ste(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new mf(r)}}const ote={provide:class rte{constructor(){return Z_(UL)}},deps:[[new Kt,gb]]},ate={provide:mf,useFactory:function ite(t,e){const n=function J_(t,e,n){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===n);if(1===s.length)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}(UL,t,e);return n&&new mf(n)},deps:[[new Kt,gb],Do]};let ute=(()=>{class t{constructor(){Ue("angularfire",H_.full,"fst")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Gn({type:t}),t.\u0275inj=An({providers:[ate,ote]}),t})();function cte(t,...e){return{ngModule:ute,providers:[{provide:gb,useFactory:ste(t),multi:!0,deps:[et,Wn,$k,Gk,[new Kt,H1],[new Kt,fR],...e]}]}}const lte=ni(nte,!0),dte=ni(Gee,!0),mb=ni(bee,!0),hte=ni($ee,!0),yb=ni(pL,!0),fte=ni(See,!0),pte=ni(jee,!0);let jL=(()=>{class t{constructor(n){this.afs=n}addNote(n){return n.id=yb(mb(this.afs,"id")).id,dte(mb(this.afs,"Notes"),n)}getAllNotes(){const n=mb(this.afs,"Notes");return lte(n,{idField:"id"})}deleteNote(n){const r=yb(this.afs,`Notes/${n.id}`);return hte(r)}updateNote(n,r){const i=yb(this.afs,`Notes/${r}`);return pte(i,n)}}return t.\u0275fac=function(n){return new(n||t)(ie(mf))},t.\u0275prov=ge({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),gte=(()=>{class t{constructor(n){this.noteService=n}onClick(){"create"===this.action?this.noteService.addNote({id:"",noteTitle:this.noteForm.value.title,noteDescription:this.noteForm.value.description}).then(n=>{n&&(console.log(`${n} was successfully created`),this.noteForm.reset())}):this.noteService.updateNote({id:this.noteForm.value.id,noteDescription:this.noteForm.value.description,noteTitle:this.noteForm.value.title},this.noteForm.value.id)}}return t.\u0275fac=function(n){return new(n||t)(C(jL))},t.\u0275cmp=pa({type:t,selectors:[["app-modal"]],inputs:{noteForm:"noteForm",modalConfig:"modalConfig",action:"action"},decls:22,vars:7,consts:[["tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",3,"id"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"formGroup"],[1,"mb-3"],["for","title-name",1,"col-form-label"],["type","text","id","title-name","formControlName","title",1,"form-control"],["for","message-text",1,"col-form-label"],["formControlName","description","id","message-text",1,"form-control"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"disabled","click"]],template:function(n,r){1&n&&(At(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),Jn(5),We(),Qr(6,"button",5),We(),At(7,"div",6)(8,"form",7)(9,"div",8)(10,"label",9),Jn(11),We(),Qr(12,"input",10),We(),At(13,"div",8)(14,"label",11),Jn(15),We(),Qr(16,"textarea",12),We()()(),At(17,"div",13)(18,"button",14),Jn(19," Close "),We(),At(20,"button",15),Xt("click",function(){return r.onClick()}),Jn(21),We()()()()()),2&n&&(gg("id",r.modalConfig.id),hn(5),uo(" ",r.modalConfig.modalLabel," "),hn(3),Kr("formGroup",r.noteForm),hn(3),Ua(r.modalConfig.modalTitleLabel),hn(4),Ua(r.modalConfig.modalTextLabel),hn(5),Kr("disabled",r.noteForm.invalid),hn(1),uo(" ",r.modalConfig.modalResumeBtnText," "))},dependencies:[$m,rd,HM,Nm,uu,zm]}),t})();function mte(t,e){if(1&t){const n=function QC(){return E()}();At(0,"div",6)(1,"div",7)(2,"h5"),Jn(3),We(),At(4,"p",8),Jn(5),We(),At(6,"div",9)(7,"span",10)(8,"i",11),Xt("click",function(){const s=$f(n).$implicit;return Gf(pg().updateNote(s))}),We()(),At(9,"span",10)(10,"i",12),Xt("click",function(){const s=$f(n).$implicit;return Gf(pg().deleteNote(s))}),We()()()()()}if(2&t){const n=e.$implicit;hn(3),Ua(n.noteTitle),hn(2),uo(" ",n.noteDescription," ")}}const yte=function(){return{id:"addNotesModal",modalLabel:"Create new note",modalTitleLabel:"Note title",modalTextLabel:"Note text",modalResumeBtnText:"Create note"}},_te=function(){return{id:"editNotesModal",modalLabel:"Edit note",modalTitleLabel:"Note title",modalTextLabel:"Note text",modalResumeBtnText:"Edit note"}};let vte=(()=>{class t{ngOnInit(){this.getAllNotes()}constructor(n,r){this.noteService=n,this.notes=[],this.noteForm=r.group({id:[""],title:["",IM.required],description:["",IM.required]})}getAllNotes(){this.noteService.getAllNotes().subscribe(n=>{this.notes=n})}deleteNote(n){this.noteService.deleteNote(n)}updateNote(n){this.noteForm.setValue({description:n.noteDescription,title:n.noteTitle,id:n.id})}}return t.\u0275fac=function(n){return new(n||t)(C(jL),C(S4))},t.\u0275cmp=pa({type:t,selectors:[["app-note"]],decls:8,vars:10,consts:[[1,"note-wrapper"],[1,"row"],["class","col-md-4",4,"ngFor","ngForOf"],["type","button","data-bs-toggle","modal","data-bs-target","#addNotesModal",1,"btn","btn-primary","mt-2"],[3,"formGroup"],[3,"modalConfig","noteForm","action"],[1,"col-md-4"],[1,"card","card-body"],[1,"text-muted"],[1,"d-flex","align-items-center"],[1,"mx-2"],["data-bs-toggle","modal","data-bs-target","#editNotesModal",1,"bi","bi-pen","note-btn",3,"click"],[1,"bi","bi-trash","note-btn",3,"click"]],template:function(n,r){1&n&&(At(0,"div",0)(1,"div",1),function WC(t,e,n,r,i,s,o,a){const u=E(),c=se(),l=t+Ee,d=c.firstCreatePass?function o$(t,e,n,r,i,s,o,a,u){const c=e.consts,l=Xs(e,t,4,o||null,zr(c,a));ng(e,n,l,zr(c,u)),Kc(e,l);const d=l.tView=tg(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,s,o):c.data[l];qn(d,!1);const h=u[ee].createComment("");ul(c,u,h,d),Ct(h,u),vl(u,u[l]=SC(h,u,h,d)),qc(d)&&Zp(c,u,d),null!=o&&eg(u,d,a)}(2,mte,11,2,"div",2),We(),At(3,"button",3),Jn(4," Create note "),We(),At(5,"form",4),Qr(6,"app-modal",5),We(),Qr(7,"app-modal",5),We()),2&n&&(hn(2),Kr("ngForOf",r.notes),hn(3),Kr("formGroup",r.noteForm),hn(1),Kr("modalConfig",xg(8,yte))("noteForm",r.noteForm)("action","create"),hn(1),Kr("modalConfig",xg(9,_te))("noteForm",r.noteForm)("action","edit"))},dependencies:[$x,$m,Nm,uu,gte],styles:[".card[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;min-width:0;word-wrap:break-word;background-color:#fff;border:0 solid transparent;border-radius:1;margin-bottom:30px}.card-body[_ngcontent-%COMP%]{flex:1 1 auto;padding:1.5rem}.note-btn[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),t})(),wte=(()=>{class t{constructor(){this.title="angular-notes"}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=pa({type:t,selectors:[["app-root"]],decls:3,vars:0,template:function(n,r){1&n&&(At(0,"h1"),Jn(1,"Hello world"),We(),Qr(2,"app-note"))},dependencies:[vte]}),t})(),Ite=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Gn({type:t,bootstrap:[wte]}),t.\u0275inj=An({imports:[d3,A4,t7(()=>n7({apiKey:"AIzaSyCpci1KXvSPYIEFldrxgX-flQVOfSYrg-8",authDomain:"angular-notes-e1d76.firebaseapp.com",projectId:"angular-notes-e1d76",storageBucket:"angular-notes-e1d76.appspot.com",messagingSenderId:"183542395935",appId:"1:183542395935:web:5662dfa5523ad68238912a"})),cte(()=>fte())]}),t})();l3().bootstrapModule(Ite).catch(t=>console.error(t))}},Te=>{Te(Te.s=56)}]);